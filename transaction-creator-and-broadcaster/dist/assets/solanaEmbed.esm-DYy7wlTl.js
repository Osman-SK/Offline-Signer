import{s as iu,a as zt,g as cn,c as tn,r as ou,P as Do}from"./index-Borzhawk.js";var rr={exports:{}},$o;function Bn(){if($o)return rr.exports;$o=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(P,$,q){return Function.prototype.apply.call(P,$,q)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:n=function(P){return Object.getOwnPropertyNames(P)};function r(j){console&&console.warn&&console.warn(j)}var i=Number.isNaN||function(P){return P!==P};function o(){o.init.call(this)}rr.exports=o,rr.exports.once=N,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function l(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(j){if(typeof j!="number"||j<0||i(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");a=j}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||i(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this};function h(j){return j._maxListeners===void 0?o.defaultMaxListeners:j._maxListeners}o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(P){for(var $=[],q=1;q<arguments.length;q++)$.push(arguments[q]);var s=P==="error",u=this._events;if(u!==void 0)s=s&&u.error===void 0;else if(!s)return!1;if(s){var d;if($.length>0&&(d=$[0]),d instanceof Error)throw d;var E=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw E.context=d,E}var _=u[P];if(_===void 0)return!1;if(typeof _=="function")t(_,this,$);else for(var p=_.length,C=W(_,p),q=0;q<p;++q)t(C[q],this,$);return!0};function f(j,P,$,q){var s,u,d;if(l($),u=j._events,u===void 0?(u=j._events=Object.create(null),j._eventsCount=0):(u.newListener!==void 0&&(j.emit("newListener",P,$.listener?$.listener:$),u=j._events),d=u[P]),d===void 0)d=u[P]=$,++j._eventsCount;else if(typeof d=="function"?d=u[P]=q?[$,d]:[d,$]:q?d.unshift($):d.push($),s=h(j),s>0&&d.length>s&&!d.warned){d.warned=!0;var E=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");E.name="MaxListenersExceededWarning",E.emitter=j,E.type=P,E.count=d.length,r(E)}return j}o.prototype.addListener=function(P,$){return f(this,P,$,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(P,$){return f(this,P,$,!0)};function S(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function A(j,P,$){var q={fired:!1,wrapFn:void 0,target:j,type:P,listener:$},s=S.bind(q);return s.listener=$,q.wrapFn=s,s}o.prototype.once=function(P,$){return l($),this.on(P,A(this,P,$)),this},o.prototype.prependOnceListener=function(P,$){return l($),this.prependListener(P,A(this,P,$)),this},o.prototype.removeListener=function(P,$){var q,s,u,d,E;if(l($),s=this._events,s===void 0)return this;if(q=s[P],q===void 0)return this;if(q===$||q.listener===$)--this._eventsCount===0?this._events=Object.create(null):(delete s[P],s.removeListener&&this.emit("removeListener",P,q.listener||$));else if(typeof q!="function"){for(u=-1,d=q.length-1;d>=0;d--)if(q[d]===$||q[d].listener===$){E=q[d].listener,u=d;break}if(u<0)return this;u===0?q.shift():m(q,u),q.length===1&&(s[P]=q[0]),s.removeListener!==void 0&&this.emit("removeListener",P,E||$)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(P){var $,q,s;if(q=this._events,q===void 0)return this;if(q.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):q[P]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete q[P]),this;if(arguments.length===0){var u=Object.keys(q),d;for(s=0;s<u.length;++s)d=u[s],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if($=q[P],typeof $=="function")this.removeListener(P,$);else if($!==void 0)for(s=$.length-1;s>=0;s--)this.removeListener(P,$[s]);return this};function D(j,P,$){var q=j._events;if(q===void 0)return[];var s=q[P];return s===void 0?[]:typeof s=="function"?$?[s.listener||s]:[s]:$?T(s):W(s,s.length)}o.prototype.listeners=function(P){return D(this,P,!0)},o.prototype.rawListeners=function(P){return D(this,P,!1)},o.listenerCount=function(j,P){return typeof j.listenerCount=="function"?j.listenerCount(P):B.call(j,P)},o.prototype.listenerCount=B;function B(j){var P=this._events;if(P!==void 0){var $=P[j];if(typeof $=="function")return 1;if($!==void 0)return $.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function W(j,P){for(var $=new Array(P),q=0;q<P;++q)$[q]=j[q];return $}function m(j,P){for(;P+1<j.length;P++)j[P]=j[P+1];j.pop()}function T(j){for(var P=new Array(j.length),$=0;$<P.length;++$)P[$]=j[$].listener||j[$];return P}function N(j,P){return new Promise(function($,q){function s(d){j.removeListener(P,u),q(d)}function u(){typeof j.removeListener=="function"&&j.removeListener("error",s),$([].slice.call(arguments))}M(j,P,u,{once:!0}),P!=="error"&&I(j,s,{once:!0})})}function I(j,P,$){typeof j.on=="function"&&M(j,"error",P,$)}function M(j,P,$,q){if(typeof j.on=="function")q.once?j.once(P,$):j.on(P,$);else if(typeof j.addEventListener=="function")j.addEventListener(P,function s(u){q.once&&j.removeEventListener(P,s),$(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}return rr.exports}var su=Bn(),au=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ri=Math.ceil,qe=Math.floor,Be="[BigNumber Error] ",ko=Be+"Number primitive has more than 15 significant digits: ",Je=1e14,oe=14,ii=9007199254740991,oi=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],St=1e7,Te=1e9;function na(e){var t,n,r,i=I.prototype={constructor:I,toString:null,valueOf:null},o=new I(1),a=20,l=4,h=-7,f=21,S=-1e7,A=1e7,D=!1,B=1,W=0,m={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},T="0123456789abcdefghijklmnopqrstuvwxyz",N=!0;function I(s,u){var d,E,_,p,C,c,b,v,R=this;if(!(R instanceof I))return new I(s,u);if(u==null){if(s&&s._isBigNumber===!0){R.s=s.s,!s.c||s.e>A?R.c=R.e=null:s.e<S?R.c=[R.e=0]:(R.e=s.e,R.c=s.c.slice());return}if((c=typeof s=="number")&&s*0==0){if(R.s=1/s<0?(s=-s,-1):1,s===~~s){for(p=0,C=s;C>=10;C/=10,p++);p>A?R.c=R.e=null:(R.e=p,R.c=[s]);return}v=String(s)}else{if(!au.test(v=String(s)))return r(R,v,c);R.s=v.charCodeAt(0)==45?(v=v.slice(1),-1):1}(p=v.indexOf("."))>-1&&(v=v.replace(".","")),(C=v.search(/e/i))>0?(p<0&&(p=C),p+=+v.slice(C+1),v=v.substring(0,C)):p<0&&(p=v.length)}else{if(be(u,2,T.length,"Base"),u==10&&N)return R=new I(s),$(R,a+R.e+1,l);if(v=String(s),c=typeof s=="number"){if(s*0!=0)return r(R,v,c,u);if(R.s=1/s<0?(v=v.slice(1),-1):1,I.DEBUG&&v.replace(/^0\.0*|\./,"").length>15)throw Error(ko+s)}else R.s=v.charCodeAt(0)===45?(v=v.slice(1),-1):1;for(d=T.slice(0,u),p=C=0,b=v.length;C<b;C++)if(d.indexOf(E=v.charAt(C))<0){if(E=="."){if(C>p){p=b;continue}}else if(!_&&(v==v.toUpperCase()&&(v=v.toLowerCase())||v==v.toLowerCase()&&(v=v.toUpperCase()))){_=!0,C=-1,p=0;continue}return r(R,String(s),c,u)}c=!1,v=n(v,u,10,R.s),(p=v.indexOf("."))>-1?v=v.replace(".",""):p=v.length}for(C=0;v.charCodeAt(C)===48;C++);for(b=v.length;v.charCodeAt(--b)===48;);if(v=v.slice(C,++b)){if(b-=C,c&&I.DEBUG&&b>15&&(s>ii||s!==qe(s)))throw Error(ko+R.s*s);if((p=p-C-1)>A)R.c=R.e=null;else if(p<S)R.c=[R.e=0];else{if(R.e=p,R.c=[],C=(p+1)%oe,p<0&&(C+=oe),C<b){for(C&&R.c.push(+v.slice(0,C)),b-=oe;C<b;)R.c.push(+v.slice(C,C+=oe));C=oe-(v=v.slice(C)).length}else C-=b;for(;C--;v+="0");R.c.push(+v)}}else R.c=[R.e=0]}I.clone=na,I.ROUND_UP=0,I.ROUND_DOWN=1,I.ROUND_CEIL=2,I.ROUND_FLOOR=3,I.ROUND_HALF_UP=4,I.ROUND_HALF_DOWN=5,I.ROUND_HALF_EVEN=6,I.ROUND_HALF_CEIL=7,I.ROUND_HALF_FLOOR=8,I.EUCLID=9,I.config=I.set=function(s){var u,d;if(s!=null)if(typeof s=="object"){if(s.hasOwnProperty(u="DECIMAL_PLACES")&&(d=s[u],be(d,0,Te,u),a=d),s.hasOwnProperty(u="ROUNDING_MODE")&&(d=s[u],be(d,0,8,u),l=d),s.hasOwnProperty(u="EXPONENTIAL_AT")&&(d=s[u],d&&d.pop?(be(d[0],-Te,0,u),be(d[1],0,Te,u),h=d[0],f=d[1]):(be(d,-Te,Te,u),h=-(f=d<0?-d:d))),s.hasOwnProperty(u="RANGE"))if(d=s[u],d&&d.pop)be(d[0],-Te,-1,u),be(d[1],1,Te,u),S=d[0],A=d[1];else if(be(d,-Te,Te,u),d)S=-(A=d<0?-d:d);else throw Error(Be+u+" cannot be zero: "+d);if(s.hasOwnProperty(u="CRYPTO"))if(d=s[u],d===!!d)if(d)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))D=d;else throw D=!d,Error(Be+"crypto unavailable");else D=d;else throw Error(Be+u+" not true or false: "+d);if(s.hasOwnProperty(u="MODULO_MODE")&&(d=s[u],be(d,0,9,u),B=d),s.hasOwnProperty(u="POW_PRECISION")&&(d=s[u],be(d,0,Te,u),W=d),s.hasOwnProperty(u="FORMAT"))if(d=s[u],typeof d=="object")m=d;else throw Error(Be+u+" not an object: "+d);if(s.hasOwnProperty(u="ALPHABET"))if(d=s[u],typeof d=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(d))N=d.slice(0,10)=="0123456789",T=d;else throw Error(Be+u+" invalid: "+d)}else throw Error(Be+"Object expected: "+s);return{DECIMAL_PLACES:a,ROUNDING_MODE:l,EXPONENTIAL_AT:[h,f],RANGE:[S,A],CRYPTO:D,MODULO_MODE:B,POW_PRECISION:W,FORMAT:m,ALPHABET:T}},I.isBigNumber=function(s){if(!s||s._isBigNumber!==!0)return!1;if(!I.DEBUG)return!0;var u,d,E=s.c,_=s.e,p=s.s;e:if({}.toString.call(E)=="[object Array]"){if((p===1||p===-1)&&_>=-Te&&_<=Te&&_===qe(_)){if(E[0]===0){if(_===0&&E.length===1)return!0;break e}if(u=(_+1)%oe,u<1&&(u+=oe),String(E[0]).length==u){for(u=0;u<E.length;u++)if(d=E[u],d<0||d>=Je||d!==qe(d))break e;if(d!==0)return!0}}}else if(E===null&&_===null&&(p===null||p===1||p===-1))return!0;throw Error(Be+"Invalid BigNumber: "+s)},I.maximum=I.max=function(){return j(arguments,-1)},I.minimum=I.min=function(){return j(arguments,1)},I.random=function(){var s=9007199254740992,u=Math.random()*s&2097151?function(){return qe(Math.random()*s)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(d){var E,_,p,C,c,b=0,v=[],R=new I(o);if(d==null?d=a:be(d,0,Te),C=ri(d/oe),D)if(crypto.getRandomValues){for(E=crypto.getRandomValues(new Uint32Array(C*=2));b<C;)c=E[b]*131072+(E[b+1]>>>11),c>=9e15?(_=crypto.getRandomValues(new Uint32Array(2)),E[b]=_[0],E[b+1]=_[1]):(v.push(c%1e14),b+=2);b=C/2}else if(crypto.randomBytes){for(E=crypto.randomBytes(C*=7);b<C;)c=(E[b]&31)*281474976710656+E[b+1]*1099511627776+E[b+2]*4294967296+E[b+3]*16777216+(E[b+4]<<16)+(E[b+5]<<8)+E[b+6],c>=9e15?crypto.randomBytes(7).copy(E,b):(v.push(c%1e14),b+=7);b=C/7}else throw D=!1,Error(Be+"crypto unavailable");if(!D)for(;b<C;)c=u(),c<9e15&&(v[b++]=c%1e14);for(C=v[--b],d%=oe,C&&d&&(c=oi[oe-d],v[b]=qe(C/c)*c);v[b]===0;v.pop(),b--);if(b<0)v=[p=0];else{for(p=-1;v[0]===0;v.splice(0,1),p-=oe);for(b=1,c=v[0];c>=10;c/=10,b++);b<oe&&(p-=oe-b)}return R.e=p,R.c=v,R}}(),I.sum=function(){for(var s=1,u=arguments,d=new I(u[0]);s<u.length;)d=d.plus(u[s++]);return d},n=function(){var s="0123456789";function u(d,E,_,p){for(var C,c=[0],b,v=0,R=d.length;v<R;){for(b=c.length;b--;c[b]*=E);for(c[0]+=p.indexOf(d.charAt(v++)),C=0;C<c.length;C++)c[C]>_-1&&(c[C+1]==null&&(c[C+1]=0),c[C+1]+=c[C]/_|0,c[C]%=_)}return c.reverse()}return function(d,E,_,p,C){var c,b,v,R,k,G,z,X,H=d.indexOf("."),ne=a,te=l;for(H>=0&&(R=W,W=0,d=d.replace(".",""),X=new I(E),G=X.pow(d.length-H),W=R,X.c=u(ft(Ue(G.c),G.e,"0"),10,_,s),X.e=X.c.length),z=u(d,E,_,C?(c=T,s):(c=s,T)),v=R=z.length;z[--R]==0;z.pop());if(!z[0])return c.charAt(0);if(H<0?--v:(G.c=z,G.e=v,G.s=p,G=t(G,X,ne,te,_),z=G.c,k=G.r,v=G.e),b=v+ne+1,H=z[b],R=_/2,k=k||b<0||z[b+1]!=null,k=te<4?(H!=null||k)&&(te==0||te==(G.s<0?3:2)):H>R||H==R&&(te==4||k||te==6&&z[b-1]&1||te==(G.s<0?8:7)),b<1||!z[0])d=k?ft(c.charAt(1),-ne,c.charAt(0)):c.charAt(0);else{if(z.length=b,k)for(--_;++z[--b]>_;)z[b]=0,b||(++v,z=[1].concat(z));for(R=z.length;!z[--R];);for(H=0,d="";H<=R;d+=c.charAt(z[H++]));d=ft(d,v,c.charAt(0))}return d}}(),t=function(){function s(E,_,p){var C,c,b,v,R=0,k=E.length,G=_%St,z=_/St|0;for(E=E.slice();k--;)b=E[k]%St,v=E[k]/St|0,C=z*b+v*G,c=G*b+C%St*St+R,R=(c/p|0)+(C/St|0)+z*v,E[k]=c%p;return R&&(E=[R].concat(E)),E}function u(E,_,p,C){var c,b;if(p!=C)b=p>C?1:-1;else for(c=b=0;c<p;c++)if(E[c]!=_[c]){b=E[c]>_[c]?1:-1;break}return b}function d(E,_,p,C){for(var c=0;p--;)E[p]-=c,c=E[p]<_[p]?1:0,E[p]=c*C+E[p]-_[p];for(;!E[0]&&E.length>1;E.splice(0,1));}return function(E,_,p,C,c){var b,v,R,k,G,z,X,H,ne,te,ie,se,Ee,Ae,Re,_e,me,O=E.s==_.s?1:-1,L=E.c,F=_.c;if(!L||!L[0]||!F||!F[0])return new I(!E.s||!_.s||(L?F&&L[0]==F[0]:!F)?NaN:L&&L[0]==0||!F?O*0:O/0);for(H=new I(O),ne=H.c=[],v=E.e-_.e,O=p+v+1,c||(c=Je,v=He(E.e/oe)-He(_.e/oe),O=O/oe|0),R=0;F[R]==(L[R]||0);R++);if(F[R]>(L[R]||0)&&v--,O<0)ne.push(1),k=!0;else{for(Ae=L.length,_e=F.length,R=0,O+=2,G=qe(c/(F[0]+1)),G>1&&(F=s(F,G,c),L=s(L,G,c),_e=F.length,Ae=L.length),Ee=_e,te=L.slice(0,_e),ie=te.length;ie<_e;te[ie++]=0);me=F.slice(),me=[0].concat(me),Re=F[0],F[1]>=c/2&&Re++;do{if(G=0,b=u(F,te,_e,ie),b<0){if(se=te[0],_e!=ie&&(se=se*c+(te[1]||0)),G=qe(se/Re),G>1)for(G>=c&&(G=c-1),z=s(F,G,c),X=z.length,ie=te.length;u(z,te,X,ie)==1;)G--,d(z,_e<X?me:F,X,c),X=z.length,b=1;else G==0&&(b=G=1),z=F.slice(),X=z.length;if(X<ie&&(z=[0].concat(z)),d(te,z,ie,c),ie=te.length,b==-1)for(;u(F,te,_e,ie)<1;)G++,d(te,_e<ie?me:F,ie,c),ie=te.length}else b===0&&(G++,te=[0]);ne[R++]=G,te[0]?te[ie++]=L[Ee]||0:(te=[L[Ee]],ie=1)}while((Ee++<Ae||te[0]!=null)&&O--);k=te[0]!=null,ne[0]||ne.splice(0,1)}if(c==Je){for(R=1,O=ne[0];O>=10;O/=10,R++);$(H,p+(H.e=R+v*oe-1)+1,C,k)}else H.e=v,H.r=+k;return H}}();function M(s,u,d,E){var _,p,C,c,b;if(d==null?d=l:be(d,0,8),!s.c)return s.toString();if(_=s.c[0],C=s.e,u==null)b=Ue(s.c),b=E==1||E==2&&(C<=h||C>=f)?or(b,C):ft(b,C,"0");else if(s=$(new I(s),u,d),p=s.e,b=Ue(s.c),c=b.length,E==1||E==2&&(u<=p||p<=h)){for(;c<u;b+="0",c++);b=or(b,p)}else if(u-=C+(E===2&&p>C),b=ft(b,p,"0"),p+1>c){if(--u>0)for(b+=".";u--;b+="0");}else if(u+=p-c,u>0)for(p+1==c&&(b+=".");u--;b+="0");return s.s<0&&_?"-"+b:b}function j(s,u){for(var d,E,_=1,p=new I(s[0]);_<s.length;_++)E=new I(s[_]),(!E.s||(d=Mt(p,E))===u||d===0&&p.s===u)&&(p=E);return p}function P(s,u,d){for(var E=1,_=u.length;!u[--_];u.pop());for(_=u[0];_>=10;_/=10,E++);return(d=E+d*oe-1)>A?s.c=s.e=null:d<S?s.c=[s.e=0]:(s.e=d,s.c=u),s}r=function(){var s=/^(-?)0([xbo])(?=\w[\w.]*$)/i,u=/^([^.]+)\.$/,d=/^\.([^.]+)$/,E=/^-?(Infinity|NaN)$/,_=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(p,C,c,b){var v,R=c?C:C.replace(_,"");if(E.test(R))p.s=isNaN(R)?null:R<0?-1:1;else{if(!c&&(R=R.replace(s,function(k,G,z){return v=(z=z.toLowerCase())=="x"?16:z=="b"?2:8,!b||b==v?G:k}),b&&(v=b,R=R.replace(u,"$1").replace(d,"0.$1")),C!=R))return new I(R,v);if(I.DEBUG)throw Error(Be+"Not a"+(b?" base "+b:"")+" number: "+C);p.s=null}p.c=p.e=null}}();function $(s,u,d,E){var _,p,C,c,b,v,R,k=s.c,G=oi;if(k){e:{for(_=1,c=k[0];c>=10;c/=10,_++);if(p=u-_,p<0)p+=oe,C=u,b=k[v=0],R=qe(b/G[_-C-1]%10);else if(v=ri((p+1)/oe),v>=k.length)if(E){for(;k.length<=v;k.push(0));b=R=0,_=1,p%=oe,C=p-oe+1}else break e;else{for(b=c=k[v],_=1;c>=10;c/=10,_++);p%=oe,C=p-oe+_,R=C<0?0:qe(b/G[_-C-1]%10)}if(E=E||u<0||k[v+1]!=null||(C<0?b:b%G[_-C-1]),E=d<4?(R||E)&&(d==0||d==(s.s<0?3:2)):R>5||R==5&&(d==4||E||d==6&&(p>0?C>0?b/G[_-C]:0:k[v-1])%10&1||d==(s.s<0?8:7)),u<1||!k[0])return k.length=0,E?(u-=s.e+1,k[0]=G[(oe-u%oe)%oe],s.e=-u||0):k[0]=s.e=0,s;if(p==0?(k.length=v,c=1,v--):(k.length=v+1,c=G[oe-p],k[v]=C>0?qe(b/G[_-C]%G[C])*c:0),E)for(;;)if(v==0){for(p=1,C=k[0];C>=10;C/=10,p++);for(C=k[0]+=c,c=1;C>=10;C/=10,c++);p!=c&&(s.e++,k[0]==Je&&(k[0]=1));break}else{if(k[v]+=c,k[v]!=Je)break;k[v--]=0,c=1}for(p=k.length;k[--p]===0;k.pop());}s.e>A?s.c=s.e=null:s.e<S&&(s.c=[s.e=0])}return s}function q(s){var u,d=s.e;return d===null?s.toString():(u=Ue(s.c),u=d<=h||d>=f?or(u,d):ft(u,d,"0"),s.s<0?"-"+u:u)}return i.absoluteValue=i.abs=function(){var s=new I(this);return s.s<0&&(s.s=1),s},i.comparedTo=function(s,u){return Mt(this,new I(s,u))},i.decimalPlaces=i.dp=function(s,u){var d,E,_,p=this;if(s!=null)return be(s,0,Te),u==null?u=l:be(u,0,8),$(new I(p),s+p.e+1,u);if(!(d=p.c))return null;if(E=((_=d.length-1)-He(this.e/oe))*oe,_=d[_])for(;_%10==0;_/=10,E--);return E<0&&(E=0),E},i.dividedBy=i.div=function(s,u){return t(this,new I(s,u),a,l)},i.dividedToIntegerBy=i.idiv=function(s,u){return t(this,new I(s,u),0,1)},i.exponentiatedBy=i.pow=function(s,u){var d,E,_,p,C,c,b,v,R,k=this;if(s=new I(s),s.c&&!s.isInteger())throw Error(Be+"Exponent not an integer: "+q(s));if(u!=null&&(u=new I(u)),c=s.e>14,!k.c||!k.c[0]||k.c[0]==1&&!k.e&&k.c.length==1||!s.c||!s.c[0])return R=new I(Math.pow(+q(k),c?s.s*(2-ir(s)):+q(s))),u?R.mod(u):R;if(b=s.s<0,u){if(u.c?!u.c[0]:!u.s)return new I(NaN);E=!b&&k.isInteger()&&u.isInteger(),E&&(k=k.mod(u))}else{if(s.e>9&&(k.e>0||k.e<-1||(k.e==0?k.c[0]>1||c&&k.c[1]>=24e7:k.c[0]<8e13||c&&k.c[0]<=9999975e7)))return p=k.s<0&&ir(s)?-0:0,k.e>-1&&(p=1/p),new I(b?1/p:p);W&&(p=ri(W/oe+2))}for(c?(d=new I(.5),b&&(s.s=1),v=ir(s)):(_=Math.abs(+q(s)),v=_%2),R=new I(o);;){if(v){if(R=R.times(k),!R.c)break;p?R.c.length>p&&(R.c.length=p):E&&(R=R.mod(u))}if(_){if(_=qe(_/2),_===0)break;v=_%2}else if(s=s.times(d),$(s,s.e+1,1),s.e>14)v=ir(s);else{if(_=+q(s),_===0)break;v=_%2}k=k.times(k),p?k.c&&k.c.length>p&&(k.c.length=p):E&&(k=k.mod(u))}return E?R:(b&&(R=o.div(R)),u?R.mod(u):p?$(R,W,l,C):R)},i.integerValue=function(s){var u=new I(this);return s==null?s=l:be(s,0,8),$(u,u.e+1,s)},i.isEqualTo=i.eq=function(s,u){return Mt(this,new I(s,u))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(s,u){return Mt(this,new I(s,u))>0},i.isGreaterThanOrEqualTo=i.gte=function(s,u){return(u=Mt(this,new I(s,u)))===1||u===0},i.isInteger=function(){return!!this.c&&He(this.e/oe)>this.c.length-2},i.isLessThan=i.lt=function(s,u){return Mt(this,new I(s,u))<0},i.isLessThanOrEqualTo=i.lte=function(s,u){return(u=Mt(this,new I(s,u)))===-1||u===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(s,u){var d,E,_,p,C=this,c=C.s;if(s=new I(s,u),u=s.s,!c||!u)return new I(NaN);if(c!=u)return s.s=-u,C.plus(s);var b=C.e/oe,v=s.e/oe,R=C.c,k=s.c;if(!b||!v){if(!R||!k)return R?(s.s=-u,s):new I(k?C:NaN);if(!R[0]||!k[0])return k[0]?(s.s=-u,s):new I(R[0]?C:l==3?-0:0)}if(b=He(b),v=He(v),R=R.slice(),c=b-v){for((p=c<0)?(c=-c,_=R):(v=b,_=k),_.reverse(),u=c;u--;_.push(0));_.reverse()}else for(E=(p=(c=R.length)<(u=k.length))?c:u,c=u=0;u<E;u++)if(R[u]!=k[u]){p=R[u]<k[u];break}if(p&&(_=R,R=k,k=_,s.s=-s.s),u=(E=k.length)-(d=R.length),u>0)for(;u--;R[d++]=0);for(u=Je-1;E>c;){if(R[--E]<k[E]){for(d=E;d&&!R[--d];R[d]=u);--R[d],R[E]+=Je}R[E]-=k[E]}for(;R[0]==0;R.splice(0,1),--v);return R[0]?P(s,R,v):(s.s=l==3?-1:1,s.c=[s.e=0],s)},i.modulo=i.mod=function(s,u){var d,E,_=this;return s=new I(s,u),!_.c||!s.s||s.c&&!s.c[0]?new I(NaN):!s.c||_.c&&!_.c[0]?new I(_):(B==9?(E=s.s,s.s=1,d=t(_,s,0,3),s.s=E,d.s*=E):d=t(_,s,0,B),s=_.minus(d.times(s)),!s.c[0]&&B==1&&(s.s=_.s),s)},i.multipliedBy=i.times=function(s,u){var d,E,_,p,C,c,b,v,R,k,G,z,X,H,ne,te=this,ie=te.c,se=(s=new I(s,u)).c;if(!ie||!se||!ie[0]||!se[0])return!te.s||!s.s||ie&&!ie[0]&&!se||se&&!se[0]&&!ie?s.c=s.e=s.s=null:(s.s*=te.s,!ie||!se?s.c=s.e=null:(s.c=[0],s.e=0)),s;for(E=He(te.e/oe)+He(s.e/oe),s.s*=te.s,b=ie.length,k=se.length,b<k&&(X=ie,ie=se,se=X,_=b,b=k,k=_),_=b+k,X=[];_--;X.push(0));for(H=Je,ne=St,_=k;--_>=0;){for(d=0,G=se[_]%ne,z=se[_]/ne|0,C=b,p=_+C;p>_;)v=ie[--C]%ne,R=ie[C]/ne|0,c=z*v+R*G,v=G*v+c%ne*ne+X[p]+d,d=(v/H|0)+(c/ne|0)+z*R,X[p--]=v%H;X[p]=d}return d?++E:X.splice(0,1),P(s,X,E)},i.negated=function(){var s=new I(this);return s.s=-s.s||null,s},i.plus=function(s,u){var d,E=this,_=E.s;if(s=new I(s,u),u=s.s,!_||!u)return new I(NaN);if(_!=u)return s.s=-u,E.minus(s);var p=E.e/oe,C=s.e/oe,c=E.c,b=s.c;if(!p||!C){if(!c||!b)return new I(_/0);if(!c[0]||!b[0])return b[0]?s:new I(c[0]?E:_*0)}if(p=He(p),C=He(C),c=c.slice(),_=p-C){for(_>0?(C=p,d=b):(_=-_,d=c),d.reverse();_--;d.push(0));d.reverse()}for(_=c.length,u=b.length,_-u<0&&(d=b,b=c,c=d,u=_),_=0;u;)_=(c[--u]=c[u]+b[u]+_)/Je|0,c[u]=Je===c[u]?0:c[u]%Je;return _&&(c=[_].concat(c),++C),P(s,c,C)},i.precision=i.sd=function(s,u){var d,E,_,p=this;if(s!=null&&s!==!!s)return be(s,1,Te),u==null?u=l:be(u,0,8),$(new I(p),s,u);if(!(d=p.c))return null;if(_=d.length-1,E=_*oe+1,_=d[_]){for(;_%10==0;_/=10,E--);for(_=d[0];_>=10;_/=10,E++);}return s&&p.e+1>E&&(E=p.e+1),E},i.shiftedBy=function(s){return be(s,-ii,ii),this.times("1e"+s)},i.squareRoot=i.sqrt=function(){var s,u,d,E,_,p=this,C=p.c,c=p.s,b=p.e,v=a+4,R=new I("0.5");if(c!==1||!C||!C[0])return new I(!c||c<0&&(!C||C[0])?NaN:C?p:1/0);if(c=Math.sqrt(+q(p)),c==0||c==1/0?(u=Ue(C),(u.length+b)%2==0&&(u+="0"),c=Math.sqrt(+u),b=He((b+1)/2)-(b<0||b%2),c==1/0?u="5e"+b:(u=c.toExponential(),u=u.slice(0,u.indexOf("e")+1)+b),d=new I(u)):d=new I(c+""),d.c[0]){for(b=d.e,c=b+v,c<3&&(c=0);;)if(_=d,d=R.times(_.plus(t(p,_,v,1))),Ue(_.c).slice(0,c)===(u=Ue(d.c)).slice(0,c))if(d.e<b&&--c,u=u.slice(c-3,c+1),u=="9999"||!E&&u=="4999"){if(!E&&($(_,_.e+a+2,0),_.times(_).eq(p))){d=_;break}v+=4,c+=4,E=1}else{(!+u||!+u.slice(1)&&u.charAt(0)=="5")&&($(d,d.e+a+2,1),s=!d.times(d).eq(p));break}}return $(d,d.e+a+1,l,s)},i.toExponential=function(s,u){return s!=null&&(be(s,0,Te),s++),M(this,s,u,1)},i.toFixed=function(s,u){return s!=null&&(be(s,0,Te),s=s+this.e+1),M(this,s,u)},i.toFormat=function(s,u,d){var E,_=this;if(d==null)s!=null&&u&&typeof u=="object"?(d=u,u=null):s&&typeof s=="object"?(d=s,s=u=null):d=m;else if(typeof d!="object")throw Error(Be+"Argument not an object: "+d);if(E=_.toFixed(s,u),_.c){var p,C=E.split("."),c=+d.groupSize,b=+d.secondaryGroupSize,v=d.groupSeparator||"",R=C[0],k=C[1],G=_.s<0,z=G?R.slice(1):R,X=z.length;if(b&&(p=c,c=b,b=p,X-=p),c>0&&X>0){for(p=X%c||c,R=z.substr(0,p);p<X;p+=c)R+=v+z.substr(p,c);b>0&&(R+=v+z.slice(p)),G&&(R="-"+R)}E=k?R+(d.decimalSeparator||"")+((b=+d.fractionGroupSize)?k.replace(new RegExp("\\d{"+b+"}\\B","g"),"$&"+(d.fractionGroupSeparator||"")):k):R}return(d.prefix||"")+E+(d.suffix||"")},i.toFraction=function(s){var u,d,E,_,p,C,c,b,v,R,k,G,z=this,X=z.c;if(s!=null&&(c=new I(s),!c.isInteger()&&(c.c||c.s!==1)||c.lt(o)))throw Error(Be+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+q(c));if(!X)return new I(z);for(u=new I(o),v=d=new I(o),E=b=new I(o),G=Ue(X),p=u.e=G.length-z.e-1,u.c[0]=oi[(C=p%oe)<0?oe+C:C],s=!s||c.comparedTo(u)>0?p>0?u:v:c,C=A,A=1/0,c=new I(G),b.c[0]=0;R=t(c,u,0,1),_=d.plus(R.times(E)),_.comparedTo(s)!=1;)d=E,E=_,v=b.plus(R.times(_=v)),b=_,u=c.minus(R.times(_=u)),c=_;return _=t(s.minus(d),E,0,1),b=b.plus(_.times(v)),d=d.plus(_.times(E)),b.s=v.s=z.s,p=p*2,k=t(v,E,p,l).minus(z).abs().comparedTo(t(b,d,p,l).minus(z).abs())<1?[v,E]:[b,d],A=C,k},i.toNumber=function(){return+q(this)},i.toPrecision=function(s,u){return s!=null&&be(s,1,Te),M(this,s,u,2)},i.toString=function(s){var u,d=this,E=d.s,_=d.e;return _===null?E?(u="Infinity",E<0&&(u="-"+u)):u="NaN":(s==null?u=_<=h||_>=f?or(Ue(d.c),_):ft(Ue(d.c),_,"0"):s===10&&N?(d=$(new I(d),a+_+1,l),u=ft(Ue(d.c),d.e,"0")):(be(s,2,T.length,"Base"),u=n(ft(Ue(d.c),_,"0"),10,s,E,!0)),E<0&&d.c[0]&&(u="-"+u)),u},i.valueOf=i.toJSON=function(){return q(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,e!=null&&I.set(e),I}function He(e){var t=e|0;return e>0||e===t?t:t-1}function Ue(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(t=e[r++]+"",n=oe-t.length;n--;t="0"+t);o+=t}for(i=o.length;o.charCodeAt(--i)===48;);return o.slice(0,i+1||1)}function Mt(e,t){var n,r,i=e.c,o=t.c,a=e.s,l=t.s,h=e.e,f=t.e;if(!a||!l)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-l:a;if(a!=l)return a;if(n=a<0,r=h==f,!i||!o)return r?0:!i^n?1:-1;if(!r)return h>f^n?1:-1;for(l=(h=i.length)<(f=o.length)?h:f,a=0;a<l;a++)if(i[a]!=o[a])return i[a]>o[a]^n?1:-1;return h==f?0:h>f^n?1:-1}function be(e,t,n,r){if(e<t||e>n||e!==qe(e))throw Error(Be+(r||"Argument")+(typeof e=="number"?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function ir(e){var t=e.c.length-1;return He(e.e/oe)==t&&e.c[t]%2!=0}function or(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function ft(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(r=e.length,++t>r){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}na();var ra={},eo=iu.Buffer,jo=eo.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function lu(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function uu(e){var t=lu(e);if(typeof t!="string"&&(eo.isEncoding===jo||!jo(e)))throw new Error("Unknown encoding: "+e);return t||e}ra.StringDecoder=Dn;function Dn(e){this.encoding=uu(e);var t;switch(this.encoding){case"utf16le":this.text=pu,this.end=wu,t=4;break;case"utf8":this.fillLast=du,t=4;break;case"base64":this.text=bu,this.end=yu,t=3;break;default:this.write=_u,this.end=mu;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=eo.allocUnsafe(t)}Dn.prototype.write=function(e){if(e.length===0)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""};Dn.prototype.end=gu;Dn.prototype.text=hu;Dn.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function si(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function fu(e,t,n){var r=t.length-1;if(r<n)return 0;var i=si(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||i===-2?0:(i=si(t[r]),i>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||i===-2?0:(i=si(t[r]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function cu(e,t,n){if((t[0]&192)!==128)return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"�"}}function du(e){var t=this.lastTotal-this.lastNeed,n=cu(this,e);if(n!==void 0)return n;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function hu(e,t){var n=fu(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)}function gu(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function pu(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function wu(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function bu(e,t){var n=(e.length-t)%3;return n===0?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function yu(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function _u(e){return e.toString(this.encoding)}function mu(e){return e&&e.length?this.write(e):""}function xn(e){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(e)}function Eu(e,t){if(xn(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Su(e){var t=Eu(e,"string");return xn(t)=="symbol"?t:t+""}function ee(e,t,n){return(t=Su(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uo(Object(n),!0).forEach(function(r){ee(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ia={exports:{}},ai={exports:{}};let vu=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let n="";for(let r=0;r<t.length;r++)n+=`    ${t[r].stack}
`;super(n),this.name="AggregateError",this.errors=t}};var ye={AggregateError:vu,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,n){return e.slice(t,n)},Error,FunctionPrototypeCall(e,t,...n){return e.call(t,...n)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,n){return Object.defineProperty(e,t,n)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,n){return e.then(t,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,n){return e.slice(t,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,n){return e.set(t,n)},Boolean,Uint8Array},oa={exports:{}},sa={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const i=t.shift();return r==="f"?i.toFixed(6):r==="j"?JSON.stringify(i):r==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}};const{format:Au,inspect:yr}=sa,{AggregateError:Ru}=ye,Iu=globalThis.AggregateError||Ru,Tu=Symbol("kIsNodeError"),Ou=["string","function","number","object","Function","Object","boolean","bigint","symbol"],xu=/^([A-Z][a-z0-9]*)+$/,Nu="__node_internal_",Rr={};function Wt(e,t){if(!e)throw new Rr.ERR_INTERNAL_ASSERTION(t)}function Wo(e){let t="",n=e.length;const r=e[0]==="-"?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function Cu(e,t,n){if(typeof t=="function")return Wt(t.length<=n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${t.length}).`),t(...n);const r=(t.match(/%[dfijoOs]/g)||[]).length;return Wt(r===n.length,`Code: ${e}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?t:Au(t,...n)}function Ne(e,t,n){n||(n=Error);class r extends n{constructor(...o){super(Cu(e,t,o))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=e,r.prototype[Tu]=!0,Rr[e]=r}function Fo(e){const t=Nu+e.name;return Object.defineProperty(e,"name",{value:t}),e}function Lu(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const n=new Iu([t,e],t.message);return n.code=t.code,n}return e||t}let Pu=class extends Error{constructor(t="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new Rr.ERR_INVALID_ARG_TYPE("options","Object",n);super(t,n),this.code="ABORT_ERR",this.name="AbortError"}};Ne("ERR_ASSERTION","%s",Error);Ne("ERR_INVALID_ARG_TYPE",(e,t,n)=>{Wt(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let r="The ";e.endsWith(" argument")?r+=`${e} `:r+=`"${e}" ${e.includes(".")?"property":"argument"} `,r+="must be ";const i=[],o=[],a=[];for(const h of t)Wt(typeof h=="string","All expected entries have to be of type string"),Ou.includes(h)?i.push(h.toLowerCase()):xu.test(h)?o.push(h):(Wt(h!=="object",'The value "object" should be written as "Object"'),a.push(h));if(o.length>0){const h=i.indexOf("object");h!==-1&&(i.splice(i,h,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:r+=`of type ${i[0]}`;break;case 2:r+=`one of type ${i[0]} or ${i[1]}`;break;default:{const h=i.pop();r+=`one of type ${i.join(", ")}, or ${h}`}}(o.length>0||a.length>0)&&(r+=" or ")}if(o.length>0){switch(o.length){case 1:r+=`an instance of ${o[0]}`;break;case 2:r+=`an instance of ${o[0]} or ${o[1]}`;break;default:{const h=o.pop();r+=`an instance of ${o.join(", ")}, or ${h}`}}a.length>0&&(r+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(r+="an "),r+=`${a[0]}`;break;case 2:r+=`one of ${a[0]} or ${a[1]}`;break;default:{const h=a.pop();r+=`one of ${a.join(", ")}, or ${h}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var l;if((l=n.constructor)!==null&&l!==void 0&&l.name)r+=`. Received an instance of ${n.constructor.name}`;else{const h=yr(n,{depth:-1});r+=`. Received ${h}`}}else{let h=yr(n,{colors:!1});h.length>25&&(h=`${h.slice(0,25)}...`),r+=`. Received type ${typeof n} (${h})`}return r},TypeError);Ne("ERR_INVALID_ARG_VALUE",(e,t,n="is invalid")=>{let r=yr(t);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${n}. Received ${r}`},TypeError);Ne("ERR_INVALID_RETURN_VALUE",(e,t,n)=>{var r;const i=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);Ne("ERR_MISSING_ARGS",(...e)=>{Wt(e.length>0,"At least one arg needs to be specified");let t;const n=e.length;switch(e=(Array.isArray(e)?e:[e]).map(r=>`"${r}"`).join(" or "),n){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}break}return`${t} must be specified`},TypeError);Ne("ERR_OUT_OF_RANGE",(e,t,n)=>{Wt(t,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=Wo(String(n));else if(typeof n=="bigint"){r=String(n);const i=BigInt(2)**BigInt(32);(n>i||n<-i)&&(r=Wo(r)),r+="n"}else r=yr(n);return`The value of "${e}" is out of range. It must be ${t}. Received ${r}`},RangeError);Ne("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Ne("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Ne("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Ne("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Ne("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Ne("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ne("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Ne("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Ne("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Ne("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Ne("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Le={AbortError:Pu,aggregateTwoErrors:Fo(Lu),hideStackFrames:Fo,codes:Rr},Sn={exports:{}},qo;function Nn(){if(qo)return Sn.exports;qo=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Sn.exports=e,Sn.exports.AbortSignal=t,Sn.exports.default=e,Sn.exports}(function(e){const t=zt,{format:n,inspect:r}=sa,{codes:{ERR_INVALID_ARG_TYPE:i}}=Le,{kResistStopPropagation:o,AggregateError:a,SymbolDispose:l}=ye,h=globalThis.AbortSignal||Nn().AbortSignal,f=globalThis.AbortController||Nn().AbortController,S=Object.getPrototypeOf(async function(){}).constructor,A=globalThis.Blob||t.Blob,D=typeof A<"u"?function(T){return T instanceof A}:function(T){return!1},B=(m,T)=>{if(m!==void 0&&(m===null||typeof m!="object"||!("aborted"in m)))throw new i(T,"AbortSignal",m)},W=(m,T)=>{if(typeof m!="function")throw new i(T,"Function",m)};e.exports={AggregateError:a,kEmptyObject:Object.freeze({}),once(m){let T=!1;return function(...N){T||(T=!0,m.apply(this,N))}},createDeferredPromise:function(){let m,T;return{promise:new Promise((I,M)=>{m=I,T=M}),resolve:m,reject:T}},promisify(m){return new Promise((T,N)=>{m((I,...M)=>I?N(I):T(...M))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(m){return m instanceof S},isArrayBufferView(m){return ArrayBuffer.isView(m)}},isBlob:D,deprecate(m,T){return m},addAbortListener:Bn().addAbortListener||function(T,N){if(T===void 0)throw new i("signal","AbortSignal",T);B(T,"signal"),W(N,"listener");let I;return T.aborted?queueMicrotask(()=>N()):(T.addEventListener("abort",N,{__proto__:null,once:!0,[o]:!0}),I=()=>{T.removeEventListener("abort",N)}),{__proto__:null,[l](){var M;(M=I)===null||M===void 0||M()}}},AbortSignalAny:h.any||function(T){if(T.length===1)return T[0];const N=new f,I=()=>N.abort();return T.forEach(M=>{B(M,"signals"),M.addEventListener("abort",I,{once:!0})}),N.signal.addEventListener("abort",()=>{T.forEach(M=>M.removeEventListener("abort",I))},{once:!0}),N.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(oa);var $e=oa.exports,to={};const{ArrayIsArray:aa,ArrayPrototypeIncludes:Mu,ArrayPrototypeJoin:Bu,ArrayPrototypeMap:Du,NumberIsInteger:no,NumberIsNaN:Sg,NumberMAX_SAFE_INTEGER:$u,NumberMIN_SAFE_INTEGER:ku,NumberParseInt:vg,ObjectPrototypeHasOwnProperty:ju,RegExpPrototypeExec:Ag,String:Uu,StringPrototypeToUpperCase:Rg,StringPrototypeTrim:Ig}=ye,{hideStackFrames:Ve,codes:{ERR_SOCKET_BAD_PORT:Tg,ERR_INVALID_ARG_TYPE:Ke,ERR_INVALID_ARG_VALUE:la,ERR_OUT_OF_RANGE:an,ERR_UNKNOWN_SIGNAL:Og}}=Le,{normalizeEncoding:xg}=$e,{isAsyncFunction:Wu,isArrayBufferView:Fu}=$e.types,qu=Ve((e,t,n=ku,r=$u)=>{if(typeof e!="number")throw new Ke(t,"number",e);if(!no(e))throw new an(t,"an integer",e);if(e<n||e>r)throw new an(t,`>= ${n} && <= ${r}`,e)});Ve((e,t,n=-2147483648,r=2147483647)=>{if(typeof e!="number")throw new Ke(t,"number",e);if(!no(e))throw new an(t,"an integer",e);if(e<n||e>r)throw new an(t,`>= ${n} && <= ${r}`,e)});Ve((e,t,n=!1)=>{if(typeof e!="number")throw new Ke(t,"number",e);if(!no(e))throw new an(t,"an integer",e);const r=n?1:0,i=4294967295;if(e<r||e>i)throw new an(t,`>= ${r} && <= ${i}`,e)});Ve((e,t,n)=>{if(!Mu(n,e)){const i="must be one of: "+Bu(Du(n,o=>typeof o=="string"?`'${o}'`:Uu(o)),", ");throw new la(t,e,i)}});function Hu(e,t){if(typeof e!="boolean")throw new Ke(t,"boolean",e)}function li(e,t,n){return e==null||!ju(e,t)?n:e[t]}const Gu=Ve((e,t,n=null)=>{const r=li(n,"allowArray",!1),i=li(n,"allowFunction",!1);if(!li(n,"nullable",!1)&&e===null||!r&&aa(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new Ke(t,"Object",e)});Ve((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new Ke(t,"a dictionary",e)});Ve((e,t,n=0)=>{if(!aa(e))throw new Ke(t,"Array",e);if(e.length<n){const r=`must be longer than ${n}`;throw new la(t,e,r)}});Ve((e,t="buffer")=>{if(!Fu(e))throw new Ke(t,["Buffer","TypedArray","DataView"],e)});const zu=Ve((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new Ke(t,"AbortSignal",e)}),Vu=Ve((e,t)=>{if(typeof e!="function")throw new Ke(t,"Function",e)});Ve((e,t)=>{if(typeof e!="function"||Wu(e))throw new Ke(t,"Function",e)});Ve((e,t)=>{if(e!==void 0)throw new Ke(t,"undefined",e)});var $n={validateBoolean:Hu,validateFunction:Vu,validateInteger:qu,validateObject:Gu,validateAbortSignal:zu},ro={exports:{}},ua={exports:{}},ve=ua.exports={},tt,nt;function Li(){throw new Error("setTimeout has not been defined")}function Pi(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?tt=setTimeout:tt=Li}catch{tt=Li}try{typeof clearTimeout=="function"?nt=clearTimeout:nt=Pi}catch{nt=Pi}})();function fa(e){if(tt===setTimeout)return setTimeout(e,0);if((tt===Li||!tt)&&setTimeout)return tt=setTimeout,setTimeout(e,0);try{return tt(e,0)}catch{try{return tt.call(null,e,0)}catch{return tt.call(this,e,0)}}}function Ku(e){if(nt===clearTimeout)return clearTimeout(e);if((nt===Pi||!nt)&&clearTimeout)return nt=clearTimeout,clearTimeout(e);try{return nt(e)}catch{try{return nt.call(null,e)}catch{return nt.call(this,e)}}}var pt=[],nn=!1,kt,gr=-1;function Yu(){!nn||!kt||(nn=!1,kt.length?pt=kt.concat(pt):gr=-1,pt.length&&ca())}function ca(){if(!nn){var e=fa(Yu);nn=!0;for(var t=pt.length;t;){for(kt=pt,pt=[];++gr<t;)kt&&kt[gr].run();gr=-1,t=pt.length}kt=null,nn=!1,Ku(e)}}ve.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];pt.push(new da(e,t)),pt.length===1&&!nn&&fa(ca)};function da(e,t){this.fun=e,this.array=t}da.prototype.run=function(){this.fun.apply(null,this.array)};ve.title="browser";ve.browser=!0;ve.env={};ve.argv=[];ve.version="";ve.versions={};function _t(){}ve.on=_t;ve.addListener=_t;ve.once=_t;ve.off=_t;ve.removeListener=_t;ve.removeAllListeners=_t;ve.emit=_t;ve.prependListener=_t;ve.prependOnceListener=_t;ve.listeners=function(e){return[]};ve.binding=function(e){throw new Error("process.binding is not supported")};ve.cwd=function(){return"/"};ve.chdir=function(e){throw new Error("process.chdir is not supported")};ve.umask=function(){return 0};var Vt=ua.exports;const{SymbolAsyncIterator:Ho,SymbolIterator:Go,SymbolFor:Kt}=ye,ha=Kt("nodejs.stream.destroyed"),Zu=Kt("nodejs.stream.errored"),zo=Kt("nodejs.stream.readable"),Vo=Kt("nodejs.stream.writable"),Ju=Kt("nodejs.stream.disturbed"),Xu=Kt("nodejs.webstream.isClosedPromise"),Qu=Kt("nodejs.webstream.controllerErrorFunction");function io(e,t=!1){var n;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((n=e._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!e._writableState||e._readableState))}function Ir(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function ef(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function st(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function ga(e){return!!(e&&!st(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function pa(e){return!!(e&&!st(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function wa(e){return!!(e&&!st(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function tf(e){return ga(e)||pa(e)||wa(e)}function nf(e,t){return e==null?!1:t===!0?typeof e[Ho]=="function":t===!1?typeof e[Go]=="function":typeof e[Ho]=="function"||typeof e[Go]=="function"}function Tr(e){if(!st(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!!(e.destroyed||e[ha]||r!=null&&r.destroyed)}function rf(e){if(!Ir(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function of(e,t){if(!Ir(e))return null;if(e.writableFinished===!0)return!0;const n=e._writableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.finished)!="boolean"?null:!!(n.finished||t===!1&&n.ended===!0&&n.length===0)}function ba(e,t){if(!io(e))return null;const n=e._readableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.endEmitted)!="boolean"?null:!!(n.endEmitted||t===!1&&n.ended===!0&&n.length===0)}function ya(e){return e&&e[zo]!=null?e[zo]:typeof(e==null?void 0:e.readable)!="boolean"?null:Tr(e)?!1:io(e)&&e.readable&&!ba(e)}function _a(e){return e&&e[Vo]!=null?e[Vo]:typeof(e==null?void 0:e.writable)!="boolean"?null:Tr(e)?!1:Ir(e)&&e.writable&&!rf(e)}function sf(e,t){return st(e)?Tr(e)?!0:!((t==null?void 0:t.readable)!==!1&&ya(e)||(t==null?void 0:t.writable)!==!1&&_a(e)):null}function af(e){var t,n;return st(e)?e.writableErrored?e.writableErrored:(t=(n=e._writableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function lf(e){var t,n;return st(e)?e.readableErrored?e.readableErrored:(t=(n=e._readableState)===null||n===void 0?void 0:n.errored)!==null&&t!==void 0?t:null:null}function uf(e){if(!st(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,n=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(n==null?void 0:n.closed)=="boolean"?(t==null?void 0:t.closed)||(n==null?void 0:n.closed):typeof e._closed=="boolean"&&ma(e)?e._closed:null}function ma(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function ff(e){return typeof e._sent100=="boolean"&&ma(e)}function cf(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function df(e){if(!st(e))return null;const t=e._writableState,n=e._readableState,r=t||n;return!r&&ff(e)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function hf(e){var t;return!!(e&&((t=e[Ju])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function gf(e){var t,n,r,i,o,a,l,h,f,S;return!!(e&&((t=(n=(r=(i=(o=(a=e[Zu])!==null&&a!==void 0?a:e.readableErrored)!==null&&o!==void 0?o:e.writableErrored)!==null&&i!==void 0?i:(l=e._readableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(h=e._writableState)===null||h===void 0?void 0:h.errorEmitted)!==null&&n!==void 0?n:(f=e._readableState)===null||f===void 0?void 0:f.errored)!==null&&t!==void 0?t:!((S=e._writableState)===null||S===void 0)&&S.errored))}var mt={isDestroyed:Tr,kIsDestroyed:ha,isDisturbed:hf,isErrored:gf,isReadable:ya,kIsClosedPromise:Xu,kControllerErrorFunction:Qu,isClosed:uf,isDuplexNodeStream:ef,isFinished:sf,isIterable:nf,isReadableNodeStream:io,isReadableStream:ga,isReadableFinished:ba,isReadableErrored:lf,isNodeStream:st,isWebStream:tf,isWritable:_a,isWritableNodeStream:Ir,isWritableStream:pa,isWritableFinished:of,isWritableErrored:af,isServerRequest:cf,willEmitClose:df,isTransformStream:wa};const Rt=Vt,{AbortError:Ea,codes:pf}=Le,{ERR_INVALID_ARG_TYPE:wf,ERR_STREAM_PREMATURE_CLOSE:Ko}=pf,{kEmptyObject:Mi,once:Bi}=$e,{validateAbortSignal:bf,validateFunction:yf,validateObject:_f,validateBoolean:mf}=$n,{Promise:Ef,PromisePrototypeThen:Sf,SymbolDispose:Sa}=ye,{isClosed:vf,isReadable:Yo,isReadableNodeStream:ui,isReadableStream:Af,isReadableFinished:Zo,isReadableErrored:Jo,isWritable:Xo,isWritableNodeStream:Qo,isWritableStream:Rf,isWritableFinished:es,isWritableErrored:ts,isNodeStream:If,willEmitClose:Tf,kIsClosedPromise:Of}=mt;let rn;function xf(e){return e.setHeader&&typeof e.abort=="function"}const Di=()=>{};function va(e,t,n){var r,i;if(arguments.length===2?(n=t,t=Mi):t==null?t=Mi:_f(t,"options"),yf(n,"callback"),bf(t.signal,"options.signal"),n=Bi(n),Af(e)||Rf(e))return Nf(e,t,n);if(!If(e))throw new wf("stream",["ReadableStream","WritableStream","Stream"],e);const o=(r=t.readable)!==null&&r!==void 0?r:ui(e),a=(i=t.writable)!==null&&i!==void 0?i:Qo(e),l=e._writableState,h=e._readableState,f=()=>{e.writable||D()};let S=Tf(e)&&ui(e)===o&&Qo(e)===a,A=es(e,!1);const D=()=>{A=!0,e.destroyed&&(S=!1),!(S&&(!e.readable||o))&&(!o||B)&&n.call(e)};let B=Zo(e,!1);const W=()=>{B=!0,e.destroyed&&(S=!1),!(S&&(!e.writable||a))&&(!a||A)&&n.call(e)},m=P=>{n.call(e,P)};let T=vf(e);const N=()=>{T=!0;const P=ts(e)||Jo(e);if(P&&typeof P!="boolean")return n.call(e,P);if(o&&!B&&ui(e,!0)&&!Zo(e,!1))return n.call(e,new Ko);if(a&&!A&&!es(e,!1))return n.call(e,new Ko);n.call(e)},I=()=>{T=!0;const P=ts(e)||Jo(e);if(P&&typeof P!="boolean")return n.call(e,P);n.call(e)},M=()=>{e.req.on("finish",D)};xf(e)?(e.on("complete",D),S||e.on("abort",N),e.req?M():e.on("request",M)):a&&!l&&(e.on("end",f),e.on("close",f)),!S&&typeof e.aborted=="boolean"&&e.on("aborted",N),e.on("end",W),e.on("finish",D),t.error!==!1&&e.on("error",m),e.on("close",N),T?Rt.nextTick(N):l!=null&&l.errorEmitted||h!=null&&h.errorEmitted?S||Rt.nextTick(I):(!o&&(!S||Yo(e))&&(A||Xo(e)===!1)||!a&&(!S||Xo(e))&&(B||Yo(e)===!1)||h&&e.req&&e.aborted)&&Rt.nextTick(I);const j=()=>{n=Di,e.removeListener("aborted",N),e.removeListener("complete",D),e.removeListener("abort",N),e.removeListener("request",M),e.req&&e.req.removeListener("finish",D),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",D),e.removeListener("end",W),e.removeListener("error",m),e.removeListener("close",N)};if(t.signal&&!T){const P=()=>{const $=n;j(),$.call(e,new Ea(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)Rt.nextTick(P);else{rn=rn||$e.addAbortListener;const $=rn(t.signal,P),q=n;n=Bi((...s)=>{$[Sa](),q.apply(e,s)})}}return j}function Nf(e,t,n){let r=!1,i=Di;if(t.signal)if(i=()=>{r=!0,n.call(e,new Ea(void 0,{cause:t.signal.reason}))},t.signal.aborted)Rt.nextTick(i);else{rn=rn||$e.addAbortListener;const a=rn(t.signal,i),l=n;n=Bi((...h)=>{a[Sa](),l.apply(e,h)})}const o=(...a)=>{r||Rt.nextTick(()=>n.apply(e,a))};return Sf(e[Of].promise,o,o),Di}function Cf(e,t){var n;let r=!1;return t===null&&(t=Mi),(n=t)!==null&&n!==void 0&&n.cleanup&&(mf(t.cleanup,"cleanup"),r=t.cleanup),new Ef((i,o)=>{const a=va(e,t,l=>{r&&a(),l?o(l):i()})})}ro.exports=va;ro.exports.finished=Cf;var xt=ro.exports;const it=Vt,{aggregateTwoErrors:Lf,codes:{ERR_MULTIPLE_CALLBACK:Pf},AbortError:Mf}=Le,{Symbol:Aa}=ye,{kIsDestroyed:Bf,isDestroyed:Df,isFinished:$f,isServerRequest:kf}=mt,Ra=Aa("kDestroy"),$i=Aa("kConstruct");function Ia(e,t,n){e&&(e.stack,t&&!t.errored&&(t.errored=e),n&&!n.errored&&(n.errored=e))}function jf(e,t){const n=this._readableState,r=this._writableState,i=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof t=="function"&&t(),this):(Ia(e,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),i.constructed?ns(this,e,t):this.once(Ra,function(o){ns(this,Lf(o,e),t)}),this)}function ns(e,t,n){let r=!1;function i(o){if(r)return;r=!0;const a=e._readableState,l=e._writableState;Ia(o,l,a),l&&(l.closed=!0),a&&(a.closed=!0),typeof n=="function"&&n(o),o?it.nextTick(Uf,e,o):it.nextTick(Ta,e)}try{e._destroy(t||null,i)}catch(o){i(o)}}function Uf(e,t){ki(e,t),Ta(e)}function Ta(e){const t=e._readableState,n=e._writableState;n&&(n.closeEmitted=!0),t&&(t.closeEmitted=!0),(n!=null&&n.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function ki(e,t){const n=e._readableState,r=e._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),e.emit("error",t))}function Wf(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function ji(e,t,n){const r=e._readableState,i=e._writableState;if(i!=null&&i.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||i!=null&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),r&&!r.errored&&(r.errored=t),n?it.nextTick(ki,e,t):ki(e,t))}function Ff(e,t){if(typeof e._construct!="function")return;const n=e._readableState,r=e._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),e.once($i,t),!(e.listenerCount($i)>1)&&it.nextTick(qf,e)}function qf(e){let t=!1;function n(r){if(t){ji(e,r??new Pf);return}t=!0;const i=e._readableState,o=e._writableState,a=o||i;i&&(i.constructed=!0),o&&(o.constructed=!0),a.destroyed?e.emit(Ra,r):r?ji(e,r,!0):it.nextTick(Hf,e)}try{e._construct(r=>{it.nextTick(n,r)})}catch(r){it.nextTick(n,r)}}function Hf(e){e.emit($i)}function rs(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function Oa(e){e.emit("close")}function Gf(e,t){e.emit("error",t),it.nextTick(Oa,e)}function zf(e,t){!e||Df(e)||(!t&&!$f(e)&&(t=new Mf),kf(e)?(e.socket=null,e.destroy(t)):rs(e)?e.abort():rs(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?it.nextTick(Gf,e,t):it.nextTick(Oa,e),e.destroyed||(e[Bf]=!0))}var dn={construct:Ff,destroyer:zf,destroy:jf,undestroy:Wf,errorOrDestroy:ji};const{ArrayIsArray:Vf,ObjectSetPrototypeOf:xa}=ye,{EventEmitter:Or}=Bn();function xr(e){Or.call(this,e)}xa(xr.prototype,Or.prototype);xa(xr,Or);xr.prototype.pipe=function(e,t){const n=this;function r(S){e.writable&&e.write(S)===!1&&n.pause&&n.pause()}n.on("data",r);function i(){n.readable&&n.resume&&n.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(n.on("end",a),n.on("close",l));let o=!1;function a(){o||(o=!0,e.end())}function l(){o||(o=!0,typeof e.destroy=="function"&&e.destroy())}function h(S){f(),Or.listenerCount(this,"error")===0&&this.emit("error",S)}Ui(n,"error",h),Ui(e,"error",h);function f(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",l),n.removeListener("error",h),e.removeListener("error",h),n.removeListener("end",f),n.removeListener("close",f),e.removeListener("close",f)}return n.on("end",f),n.on("close",f),e.on("close",f),e.emit("pipe",n),e};function Ui(e,t,n){if(typeof e.prependListener=="function")return e.prependListener(t,n);!e._events||!e._events[t]?e.on(t,n):Vf(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]}var oo={Stream:xr,prependListener:Ui},Na={exports:{}};(function(e){const{SymbolDispose:t}=ye,{AbortError:n,codes:r}=Le,{isNodeStream:i,isWebStream:o,kControllerErrorFunction:a}=mt,l=xt,{ERR_INVALID_ARG_TYPE:h}=r;let f;const S=(A,D)=>{if(typeof A!="object"||!("aborted"in A))throw new h(D,"AbortSignal",A)};e.exports.addAbortSignal=function(D,B){if(S(D,"signal"),!i(B)&&!o(B))throw new h("stream",["ReadableStream","WritableStream","Stream"],B);return e.exports.addAbortSignalNoValidate(D,B)},e.exports.addAbortSignalNoValidate=function(A,D){if(typeof A!="object"||!("aborted"in A))return D;const B=i(D)?()=>{D.destroy(new n(void 0,{cause:A.reason}))}:()=>{D[a](new n(void 0,{cause:A.reason}))};if(A.aborted)B();else{f=f||$e.addAbortListener;const W=f(A,B);l(D,W[t])}return D}})(Na);var Nr=Na.exports;const{StringPrototypeSlice:is,SymbolIterator:Kf,TypedArrayPrototypeSet:sr,Uint8Array:Yf}=ye,{Buffer:fi}=zt,{inspect:Zf}=$e;var Jf=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(t){const n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=t+n.data;return r}concat(t){if(this.length===0)return fi.alloc(0);const n=fi.allocUnsafe(t>>>0);let r=this.head,i=0;for(;r;)sr(n,r.data,i),i+=r.data.length,r=r.next;return n}consume(t,n){const r=this.head.data;if(t<r.length){const i=r.slice(0,t);return this.head.data=r.slice(t),i}return t===r.length?this.shift():n?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[Kf](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let n="",r=this.head,i=0;do{const o=r.data;if(t>o.length)n+=o,t-=o.length;else{t===o.length?(n+=o,++i,r.next?this.head=r.next:this.head=this.tail=null):(n+=is(o,0,t),this.head=r,r.data=is(o,t));break}++i}while((r=r.next)!==null);return this.length-=i,n}_getBuffer(t){const n=fi.allocUnsafe(t),r=t;let i=this.head,o=0;do{const a=i.data;if(t>a.length)sr(n,a,r-t),t-=a.length;else{t===a.length?(sr(n,a,r-t),++o,i.next?this.head=i.next:this.head=this.tail=null):(sr(n,new Yf(a.buffer,a.byteOffset,t),r-t),this.head=i,i.data=a.slice(t));break}++o}while((i=i.next)!==null);return this.length-=o,n}[Symbol.for("nodejs.util.inspect.custom")](t,n){return Zf(this,{...n,depth:0,customInspect:!1})}};const{MathFloor:Xf,NumberIsInteger:Qf}=ye,{validateInteger:ec}=$n,{ERR_INVALID_ARG_VALUE:tc}=Le.codes;let Ca=16*1024,La=16;function nc(e,t,n){return e.highWaterMark!=null?e.highWaterMark:t?e[n]:null}function Pa(e){return e?La:Ca}function rc(e,t){ec(t,"value",0),e?La=t:Ca=t}function ic(e,t,n,r){const i=nc(t,r,n);if(i!=null){if(!Qf(i)||i<0){const o=r?`options.${n}`:"options.highWaterMark";throw new tc(o,i)}return Xf(i)}return Pa(e.objectMode)}var Cr={getHighWaterMark:ic,getDefaultHighWaterMark:Pa,setDefaultHighWaterMark:rc};const os=Vt,{PromisePrototypeThen:oc,SymbolAsyncIterator:ss,SymbolIterator:as}=ye,{Buffer:sc}=zt,{ERR_INVALID_ARG_TYPE:ac,ERR_STREAM_NULL_VALUES:lc}=Le.codes;function uc(e,t,n){let r;if(typeof t=="string"||t instanceof sc)return new e({objectMode:!0,...n,read(){this.push(t),this.push(null)}});let i;if(t&&t[ss])i=!0,r=t[ss]();else if(t&&t[as])i=!1,r=t[as]();else throw new ac("iterable",["Iterable"],t);const o=new e({objectMode:!0,highWaterMark:1,...n});let a=!1;o._read=function(){a||(a=!0,h())},o._destroy=function(f,S){oc(l(f),()=>os.nextTick(S,f),A=>os.nextTick(S,A||f))};async function l(f){const S=f!=null,A=typeof r.throw=="function";if(S&&A){const{value:D,done:B}=await r.throw(f);if(await D,B)return}if(typeof r.return=="function"){const{value:D}=await r.return();await D}}async function h(){for(;;){try{const{value:f,done:S}=i?await r.next():r.next();if(S)o.push(null);else{const A=f&&typeof f.then=="function"?await f:f;if(A===null)throw a=!1,new lc;if(o.push(A))continue;a=!1}}catch(f){o.destroy(f)}break}}return o}var Ma=uc,ci,ls;function Lr(){if(ls)return ci;ls=1;const e=Vt,{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:i,ObjectDefineProperties:o,ObjectKeys:a,ObjectSetPrototypeOf:l,Promise:h,SafeSet:f,SymbolAsyncDispose:S,SymbolAsyncIterator:A,Symbol:D}=ye;ci=re,re.ReadableState=ke;const{EventEmitter:B}=Bn(),{Stream:W,prependListener:m}=oo,{Buffer:T}=zt,{addAbortSignal:N}=Nr,I=xt;let M=$e.debuglog("stream",g=>{M=g});const j=Jf,P=dn,{getHighWaterMark:$,getDefaultHighWaterMark:q}=Cr,{aggregateTwoErrors:s,codes:{ERR_INVALID_ARG_TYPE:u,ERR_METHOD_NOT_IMPLEMENTED:d,ERR_OUT_OF_RANGE:E,ERR_STREAM_PUSH_AFTER_EOF:_,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:p},AbortError:C}=Le,{validateObject:c}=$n,b=D("kPaused"),{StringDecoder:v}=ra,R=Ma;l(re.prototype,W.prototype),l(re,W);const k=()=>{},{errorOrDestroy:G}=P,z=1,X=2,H=4,ne=8,te=16,ie=32,se=64,Ee=128,Ae=256,Re=512,_e=1024,me=2048,O=4096,L=8192,F=16384,Y=32768,Q=65536,fe=1<<17,ge=1<<18;function le(g){return{enumerable:!1,get(){return(this.state&g)!==0},set(y){y?this.state|=g:this.state&=~g}}}o(ke.prototype,{objectMode:le(z),ended:le(X),endEmitted:le(H),reading:le(ne),constructed:le(te),sync:le(ie),needReadable:le(se),emittedReadable:le(Ee),readableListening:le(Ae),resumeScheduled:le(Re),errorEmitted:le(_e),emitClose:le(me),autoDestroy:le(O),destroyed:le(L),closed:le(F),closeEmitted:le(Y),multiAwaitDrain:le(Q),readingMore:le(fe),dataEmitted:le(ge)});function ke(g,y,V){typeof V!="boolean"&&(V=y instanceof bt()),this.state=me|O|te|ie,g&&g.objectMode&&(this.state|=z),V&&g&&g.readableObjectMode&&(this.state|=z),this.highWaterMark=g?$(this,g,"readableHighWaterMark",V):q(!1),this.buffer=new j,this.length=0,this.pipes=[],this.flowing=null,this[b]=null,g&&g.emitClose===!1&&(this.state&=~me),g&&g.autoDestroy===!1&&(this.state&=~O),this.errored=null,this.defaultEncoding=g&&g.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,g&&g.encoding&&(this.decoder=new v(g.encoding),this.encoding=g.encoding)}function re(g){if(!(this instanceof re))return new re(g);const y=this instanceof bt();this._readableState=new ke(g,this,y),g&&(typeof g.read=="function"&&(this._read=g.read),typeof g.destroy=="function"&&(this._destroy=g.destroy),typeof g.construct=="function"&&(this._construct=g.construct),g.signal&&!y&&N(g.signal,this)),W.call(this,g),P.construct(this,()=>{this._readableState.needReadable&&Ct(this,this._readableState)})}re.prototype.destroy=P.destroy,re.prototype._undestroy=P.undestroy,re.prototype._destroy=function(g,y){y(g)},re.prototype[B.captureRejectionSymbol]=function(g){this.destroy(g)},re.prototype[S]=function(){let g;return this.destroyed||(g=this.readableEnded?null:new C,this.destroy(g)),new h((y,V)=>I(this,K=>K&&K!==g?V(K):y(null)))},re.prototype.push=function(g,y){return xe(this,g,y,!1)},re.prototype.unshift=function(g,y){return xe(this,g,y,!0)};function xe(g,y,V,K){M("readableAddChunk",y);const Z=g._readableState;let Ie;if(Z.state&z||(typeof y=="string"?(V=V||Z.defaultEncoding,Z.encoding!==V&&(K&&Z.encoding?y=T.from(y,V).toString(Z.encoding):(y=T.from(y,V),V=""))):y instanceof T?V="":W._isUint8Array(y)?(y=W._uint8ArrayToBuffer(y),V=""):y!=null&&(Ie=new u("chunk",["string","Buffer","Uint8Array"],y))),Ie)G(g,Ie);else if(y===null)Z.state&=~ne,Xt(g,Z);else if(Z.state&z||y&&y.length>0)if(K)if(Z.state&H)G(g,new p);else{if(Z.destroyed||Z.errored)return!1;Jt(g,Z,y,!0)}else if(Z.ended)G(g,new _);else{if(Z.destroyed||Z.errored)return!1;Z.state&=~ne,Z.decoder&&!V?(y=Z.decoder.write(y),Z.objectMode||y.length!==0?Jt(g,Z,y,!1):Ct(g,Z)):Jt(g,Z,y,!1)}else K||(Z.state&=~ne,Ct(g,Z));return!Z.ended&&(Z.length<Z.highWaterMark||Z.length===0)}function Jt(g,y,V,K){y.flowing&&y.length===0&&!y.sync&&g.listenerCount("data")>0?(y.state&Q?y.awaitDrainWriters.clear():y.awaitDrainWriters=null,y.dataEmitted=!0,g.emit("data",V)):(y.length+=y.objectMode?1:V.length,K?y.buffer.unshift(V):y.buffer.push(V),y.state&se&&Nt(g)),Ct(g,y)}re.prototype.isPaused=function(){const g=this._readableState;return g[b]===!0||g.flowing===!1},re.prototype.setEncoding=function(g){const y=new v(g);this._readableState.decoder=y,this._readableState.encoding=this._readableState.decoder.encoding;const V=this._readableState.buffer;let K="";for(const Z of V)K+=y.write(Z);return V.clear(),K!==""&&V.push(K),this._readableState.length=K.length,this};const Fn=1073741824;function Fr(g){if(g>Fn)throw new E("size","<= 1GiB",g);return g--,g|=g>>>1,g|=g>>>2,g|=g>>>4,g|=g>>>8,g|=g>>>16,g++,g}function qn(g,y){return g<=0||y.length===0&&y.ended?0:y.state&z?1:r(g)?y.flowing&&y.length?y.buffer.first().length:y.length:g<=y.length?g:y.ended?y.length:0}re.prototype.read=function(g){M("read",g),g===void 0?g=NaN:n(g)||(g=i(g,10));const y=this._readableState,V=g;if(g>y.highWaterMark&&(y.highWaterMark=Fr(g)),g!==0&&(y.state&=~Ee),g===0&&y.needReadable&&((y.highWaterMark!==0?y.length>=y.highWaterMark:y.length>0)||y.ended))return M("read: emitReadable",y.length,y.ended),y.length===0&&y.ended?wn(this):Nt(this),null;if(g=qn(g,y),g===0&&y.ended)return y.length===0&&wn(this),null;let K=(y.state&se)!==0;if(M("need readable",K),(y.length===0||y.length-g<y.highWaterMark)&&(K=!0,M("length less than watermark",K)),y.ended||y.reading||y.destroyed||y.errored||!y.constructed)K=!1,M("reading, ended or constructing",K);else if(K){M("do read"),y.state|=ne|ie,y.length===0&&(y.state|=se);try{this._read(y.highWaterMark)}catch(Ie){G(this,Ie)}y.state&=~ie,y.reading||(g=qn(V,y))}let Z;return g>0?Z=Et(g,y):Z=null,Z===null?(y.needReadable=y.length<=y.highWaterMark,g=0):(y.length-=g,y.multiAwaitDrain?y.awaitDrainWriters.clear():y.awaitDrainWriters=null),y.length===0&&(y.ended||(y.needReadable=!0),V!==g&&y.ended&&wn(this)),Z!==null&&!y.errorEmitted&&!y.closeEmitted&&(y.dataEmitted=!0,this.emit("data",Z)),Z};function Xt(g,y){if(M("onEofChunk"),!y.ended){if(y.decoder){const V=y.decoder.end();V&&V.length&&(y.buffer.push(V),y.length+=y.objectMode?1:V.length)}y.ended=!0,y.sync?Nt(g):(y.needReadable=!1,y.emittedReadable=!0,gn(g))}}function Nt(g){const y=g._readableState;M("emitReadable",y.needReadable,y.emittedReadable),y.needReadable=!1,y.emittedReadable||(M("emitReadable",y.flowing),y.emittedReadable=!0,e.nextTick(gn,g))}function gn(g){const y=g._readableState;M("emitReadable_",y.destroyed,y.length,y.ended),!y.destroyed&&!y.errored&&(y.length||y.ended)&&(g.emit("readable"),y.emittedReadable=!1),y.needReadable=!y.flowing&&!y.ended&&y.length<=y.highWaterMark,pn(g)}function Ct(g,y){!y.readingMore&&y.constructed&&(y.readingMore=!0,e.nextTick(Hn,g,y))}function Hn(g,y){for(;!y.reading&&!y.ended&&(y.length<y.highWaterMark||y.flowing&&y.length===0);){const V=y.length;if(M("maybeReadMore read 0"),g.read(0),V===y.length)break}y.readingMore=!1}re.prototype._read=function(g){throw new d("_read()")},re.prototype.pipe=function(g,y){const V=this,K=this._readableState;K.pipes.length===1&&(K.multiAwaitDrain||(K.multiAwaitDrain=!0,K.awaitDrainWriters=new f(K.awaitDrainWriters?[K.awaitDrainWriters]:[]))),K.pipes.push(g),M("pipe count=%d opts=%j",K.pipes.length,y);const Ie=(!y||y.end!==!1)&&g!==e.stdout&&g!==e.stderr?Yn:Lt;K.endEmitted?e.nextTick(Ie):V.once("end",Ie),g.on("unpipe",Pe);function Pe(ut,Ye){M("onunpipe"),ut===V&&Ye&&Ye.hasUnpiped===!1&&(Ye.hasUnpiped=!0,zr())}function Yn(){M("onend"),g.end()}let Me,Zn=!1;function zr(){M("cleanup"),g.removeListener("close",Qe),g.removeListener("finish",_n),Me&&g.removeListener("drain",Me),g.removeListener("error",yn),g.removeListener("unpipe",Pe),V.removeListener("end",Yn),V.removeListener("end",Lt),V.removeListener("data",Xn),Zn=!0,Me&&K.awaitDrainWriters&&(!g._writableState||g._writableState.needDrain)&&Me()}function Jn(){Zn||(K.pipes.length===1&&K.pipes[0]===g?(M("false write response, pause",0),K.awaitDrainWriters=g,K.multiAwaitDrain=!1):K.pipes.length>1&&K.pipes.includes(g)&&(M("false write response, pause",K.awaitDrainWriters.size),K.awaitDrainWriters.add(g)),V.pause()),Me||(Me=qr(V,g),g.on("drain",Me))}V.on("data",Xn);function Xn(ut){M("ondata");const Ye=g.write(ut);M("dest.write",Ye),Ye===!1&&Jn()}function yn(ut){if(M("onerror",ut),Lt(),g.removeListener("error",yn),g.listenerCount("error")===0){const Ye=g._writableState||g._readableState;Ye&&!Ye.errorEmitted?G(g,ut):g.emit("error",ut)}}m(g,"error",yn);function Qe(){g.removeListener("finish",_n),Lt()}g.once("close",Qe);function _n(){M("onfinish"),g.removeListener("close",Qe),Lt()}g.once("finish",_n);function Lt(){M("unpipe"),V.unpipe(g)}return g.emit("pipe",V),g.writableNeedDrain===!0?Jn():K.flowing||(M("pipe resume"),V.resume()),g};function qr(g,y){return function(){const K=g._readableState;K.awaitDrainWriters===y?(M("pipeOnDrain",1),K.awaitDrainWriters=null):K.multiAwaitDrain&&(M("pipeOnDrain",K.awaitDrainWriters.size),K.awaitDrainWriters.delete(y)),(!K.awaitDrainWriters||K.awaitDrainWriters.size===0)&&g.listenerCount("data")&&g.resume()}}re.prototype.unpipe=function(g){const y=this._readableState,V={hasUnpiped:!1};if(y.pipes.length===0)return this;if(!g){const Z=y.pipes;y.pipes=[],this.pause();for(let Ie=0;Ie<Z.length;Ie++)Z[Ie].emit("unpipe",this,{hasUnpiped:!1});return this}const K=t(y.pipes,g);return K===-1?this:(y.pipes.splice(K,1),y.pipes.length===0&&this.pause(),g.emit("unpipe",this,V),this)},re.prototype.on=function(g,y){const V=W.prototype.on.call(this,g,y),K=this._readableState;return g==="data"?(K.readableListening=this.listenerCount("readable")>0,K.flowing!==!1&&this.resume()):g==="readable"&&!K.endEmitted&&!K.readableListening&&(K.readableListening=K.needReadable=!0,K.flowing=!1,K.emittedReadable=!1,M("on readable",K.length,K.reading),K.length?Nt(this):K.reading||e.nextTick(at,this)),V},re.prototype.addListener=re.prototype.on,re.prototype.removeListener=function(g,y){const V=W.prototype.removeListener.call(this,g,y);return g==="readable"&&e.nextTick(Gn,this),V},re.prototype.off=re.prototype.removeListener,re.prototype.removeAllListeners=function(g){const y=W.prototype.removeAllListeners.apply(this,arguments);return(g==="readable"||g===void 0)&&e.nextTick(Gn,this),y};function Gn(g){const y=g._readableState;y.readableListening=g.listenerCount("readable")>0,y.resumeScheduled&&y[b]===!1?y.flowing=!0:g.listenerCount("data")>0?g.resume():y.readableListening||(y.flowing=null)}function at(g){M("readable nexttick read 0"),g.read(0)}re.prototype.resume=function(){const g=this._readableState;return g.flowing||(M("resume"),g.flowing=!g.readableListening,Qt(this,g)),g[b]=!1,this};function Qt(g,y){y.resumeScheduled||(y.resumeScheduled=!0,e.nextTick(Hr,g,y))}function Hr(g,y){M("resume",y.reading),y.reading||g.read(0),y.resumeScheduled=!1,g.emit("resume"),pn(g),y.flowing&&!y.reading&&g.read(0)}re.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[b]=!0,this};function pn(g){const y=g._readableState;for(M("flow",y.flowing);y.flowing&&g.read()!==null;);}re.prototype.wrap=function(g){let y=!1;g.on("data",K=>{!this.push(K)&&g.pause&&(y=!0,g.pause())}),g.on("end",()=>{this.push(null)}),g.on("error",K=>{G(this,K)}),g.on("close",()=>{this.destroy()}),g.on("destroy",()=>{this.destroy()}),this._read=()=>{y&&g.resume&&(y=!1,g.resume())};const V=a(g);for(let K=1;K<V.length;K++){const Z=V[K];this[Z]===void 0&&typeof g[Z]=="function"&&(this[Z]=g[Z].bind(g))}return this},re.prototype[A]=function(){return zn(this)},re.prototype.iterator=function(g){return g!==void 0&&c(g,"options"),zn(this,g)};function zn(g,y){typeof g.read!="function"&&(g=re.wrap(g,{objectMode:!0}));const V=Vn(g,y);return V.stream=g,V}async function*Vn(g,y){let V=k;function K(Pe){this===g?(V(),V=k):V=Pe}g.on("readable",K);let Z;const Ie=I(g,{writable:!1},Pe=>{Z=Pe?s(Z,Pe):null,V(),V=k});try{for(;;){const Pe=g.destroyed?null:g.read();if(Pe!==null)yield Pe;else{if(Z)throw Z;if(Z===null)return;await new h(K)}}}catch(Pe){throw Z=s(Z,Pe),Z}finally{(Z||(y==null?void 0:y.destroyOnReturn)!==!1)&&(Z===void 0||g._readableState.autoDestroy)?P.destroyer(g,null):(g.off("readable",K),Ie())}}o(re.prototype,{readable:{__proto__:null,get(){const g=this._readableState;return!!g&&g.readable!==!1&&!g.destroyed&&!g.errorEmitted&&!g.endEmitted},set(g){this._readableState&&(this._readableState.readable=!!g)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(g){this._readableState&&(this._readableState.flowing=g)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(g){this._readableState&&(this._readableState.destroyed=g)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),o(ke.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[b]!==!1},set(g){this[b]=!!g}}}),re._fromList=Et;function Et(g,y){if(y.length===0)return null;let V;return y.objectMode?V=y.buffer.shift():!g||g>=y.length?(y.decoder?V=y.buffer.join(""):y.buffer.length===1?V=y.buffer.first():V=y.buffer.concat(y.length),y.buffer.clear()):V=y.buffer.consume(g,y.decoder),V}function wn(g){const y=g._readableState;M("endReadable",y.endEmitted),y.endEmitted||(y.ended=!0,e.nextTick(lt,y,g))}function lt(g,y){if(M("endReadableNT",g.endEmitted,g.length),!g.errored&&!g.closeEmitted&&!g.endEmitted&&g.length===0){if(g.endEmitted=!0,y.emit("end"),y.writable&&y.allowHalfOpen===!1)e.nextTick(Gr,y);else if(g.autoDestroy){const V=y._writableState;(!V||V.autoDestroy&&(V.finished||V.writable===!1))&&y.destroy()}}}function Gr(g){g.writable&&!g.writableEnded&&!g.destroyed&&g.end()}re.from=function(g,y){return R(re,g,y)};let bn;function Kn(){return bn===void 0&&(bn={}),bn}return re.fromWeb=function(g,y){return Kn().newStreamReadableFromReadableStream(g,y)},re.toWeb=function(g,y){return Kn().newReadableStreamFromStreamReadable(g,y)},re.wrap=function(g,y){var V,K;return new re({objectMode:(V=(K=g.readableObjectMode)!==null&&K!==void 0?K:g.objectMode)!==null&&V!==void 0?V:!0,...y,destroy(Z,Ie){P.destroyer(g,Z),Ie(Z)}}).wrap(g)},ci}var di,us;function so(){if(us)return di;us=1;const e=Vt,{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:i,ObjectDefineProperties:o,ObjectSetPrototypeOf:a,StringPrototypeToLowerCase:l,Symbol:h,SymbolHasInstance:f}=ye;di=c,c.WritableState=p;const{EventEmitter:S}=Bn(),A=oo.Stream,{Buffer:D}=zt,B=dn,{addAbortSignal:W}=Nr,{getHighWaterMark:m,getDefaultHighWaterMark:T}=Cr,{ERR_INVALID_ARG_TYPE:N,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:M,ERR_STREAM_CANNOT_PIPE:j,ERR_STREAM_DESTROYED:P,ERR_STREAM_ALREADY_FINISHED:$,ERR_STREAM_NULL_VALUES:q,ERR_STREAM_WRITE_AFTER_END:s,ERR_UNKNOWN_ENCODING:u}=Le.codes,{errorOrDestroy:d}=B;a(c.prototype,A.prototype),a(c,A);function E(){}const _=h("kOnFinished");function p(O,L,F){typeof F!="boolean"&&(F=L instanceof bt()),this.objectMode=!!(O&&O.objectMode),F&&(this.objectMode=this.objectMode||!!(O&&O.writableObjectMode)),this.highWaterMark=O?m(this,O,"writableHighWaterMark",F):T(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Y=!!(O&&O.decodeStrings===!1);this.decodeStrings=!Y,this.defaultEncoding=O&&O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,L),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,C(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!O||O.emitClose!==!1,this.autoDestroy=!O||O.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[_]=[]}function C(O){O.buffered=[],O.bufferedIndex=0,O.allBuffers=!0,O.allNoop=!0}p.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},i(p.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function c(O){const L=this instanceof bt();if(!L&&!r(c,this))return new c(O);this._writableState=new p(O,this,L),O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final),typeof O.construct=="function"&&(this._construct=O.construct),O.signal&&W(O.signal,this)),A.call(this,O),B.construct(this,()=>{const F=this._writableState;F.writing||ne(this,F),Ee(this,F)})}i(c,f,{__proto__:null,value:function(O){return r(this,O)?!0:this!==c?!1:O&&O._writableState instanceof p}}),c.prototype.pipe=function(){d(this,new j)};function b(O,L,F,Y){const Q=O._writableState;if(typeof F=="function")Y=F,F=Q.defaultEncoding;else{if(!F)F=Q.defaultEncoding;else if(F!=="buffer"&&!D.isEncoding(F))throw new u(F);typeof Y!="function"&&(Y=E)}if(L===null)throw new q;if(!Q.objectMode)if(typeof L=="string")Q.decodeStrings!==!1&&(L=D.from(L,F),F="buffer");else if(L instanceof D)F="buffer";else if(A._isUint8Array(L))L=A._uint8ArrayToBuffer(L),F="buffer";else throw new N("chunk",["string","Buffer","Uint8Array"],L);let fe;return Q.ending?fe=new s:Q.destroyed&&(fe=new P("write")),fe?(e.nextTick(Y,fe),d(O,fe,!0),fe):(Q.pendingcb++,v(O,Q,L,F,Y))}c.prototype.write=function(O,L,F){return b(this,O,L,F)===!0},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){const O=this._writableState;O.corked&&(O.corked--,O.writing||ne(this,O))},c.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=l(L)),!D.isEncoding(L))throw new u(L);return this._writableState.defaultEncoding=L,this};function v(O,L,F,Y,Q){const fe=L.objectMode?1:F.length;L.length+=fe;const ge=L.length<L.highWaterMark;return ge||(L.needDrain=!0),L.writing||L.corked||L.errored||!L.constructed?(L.buffered.push({chunk:F,encoding:Y,callback:Q}),L.allBuffers&&Y!=="buffer"&&(L.allBuffers=!1),L.allNoop&&Q!==E&&(L.allNoop=!1)):(L.writelen=fe,L.writecb=Q,L.writing=!0,L.sync=!0,O._write(F,Y,L.onwrite),L.sync=!1),ge&&!L.errored&&!L.destroyed}function R(O,L,F,Y,Q,fe,ge){L.writelen=Y,L.writecb=ge,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new P("write")):F?O._writev(Q,L.onwrite):O._write(Q,fe,L.onwrite),L.sync=!1}function k(O,L,F,Y){--L.pendingcb,Y(F),H(L),d(O,F)}function G(O,L){const F=O._writableState,Y=F.sync,Q=F.writecb;if(typeof Q!="function"){d(O,new M);return}F.writing=!1,F.writecb=null,F.length-=F.writelen,F.writelen=0,L?(L.stack,F.errored||(F.errored=L),O._readableState&&!O._readableState.errored&&(O._readableState.errored=L),Y?e.nextTick(k,O,F,L,Q):k(O,F,L,Q)):(F.buffered.length>F.bufferedIndex&&ne(O,F),Y?F.afterWriteTickInfo!==null&&F.afterWriteTickInfo.cb===Q?F.afterWriteTickInfo.count++:(F.afterWriteTickInfo={count:1,cb:Q,stream:O,state:F},e.nextTick(z,F.afterWriteTickInfo)):X(O,F,1,Q))}function z({stream:O,state:L,count:F,cb:Y}){return L.afterWriteTickInfo=null,X(O,L,F,Y)}function X(O,L,F,Y){for(!L.ending&&!O.destroyed&&L.length===0&&L.needDrain&&(L.needDrain=!1,O.emit("drain"));F-- >0;)L.pendingcb--,Y();L.destroyed&&H(L),Ee(O,L)}function H(O){if(O.writing)return;for(let Q=O.bufferedIndex;Q<O.buffered.length;++Q){var L;const{chunk:fe,callback:ge}=O.buffered[Q],le=O.objectMode?1:fe.length;O.length-=le,ge((L=O.errored)!==null&&L!==void 0?L:new P("write"))}const F=O[_].splice(0);for(let Q=0;Q<F.length;Q++){var Y;F[Q]((Y=O.errored)!==null&&Y!==void 0?Y:new P("end"))}C(O)}function ne(O,L){if(L.corked||L.bufferProcessing||L.destroyed||!L.constructed)return;const{buffered:F,bufferedIndex:Y,objectMode:Q}=L,fe=F.length-Y;if(!fe)return;let ge=Y;if(L.bufferProcessing=!0,fe>1&&O._writev){L.pendingcb-=fe-1;const le=L.allNoop?E:re=>{for(let xe=ge;xe<F.length;++xe)F[xe].callback(re)},ke=L.allNoop&&ge===0?F:t(F,ge);ke.allBuffers=L.allBuffers,R(O,L,!0,L.length,ke,"",le),C(L)}else{do{const{chunk:le,encoding:ke,callback:re}=F[ge];F[ge++]=null;const xe=Q?1:le.length;R(O,L,!1,xe,le,ke,re)}while(ge<F.length&&!L.writing);ge===F.length?C(L):ge>256?(F.splice(0,ge),L.bufferedIndex=0):L.bufferedIndex=ge}L.bufferProcessing=!1}c.prototype._write=function(O,L,F){if(this._writev)this._writev([{chunk:O,encoding:L}],F);else throw new I("_write()")},c.prototype._writev=null,c.prototype.end=function(O,L,F){const Y=this._writableState;typeof O=="function"?(F=O,O=null,L=null):typeof L=="function"&&(F=L,L=null);let Q;if(O!=null){const fe=b(this,O,L);fe instanceof n&&(Q=fe)}return Y.corked&&(Y.corked=1,this.uncork()),Q||(!Y.errored&&!Y.ending?(Y.ending=!0,Ee(this,Y,!0),Y.ended=!0):Y.finished?Q=new $("end"):Y.destroyed&&(Q=new P("end"))),typeof F=="function"&&(Q||Y.finished?e.nextTick(F,Q):Y[_].push(F)),this};function te(O){return O.ending&&!O.destroyed&&O.constructed&&O.length===0&&!O.errored&&O.buffered.length===0&&!O.finished&&!O.writing&&!O.errorEmitted&&!O.closeEmitted}function ie(O,L){let F=!1;function Y(Q){if(F){d(O,Q??M());return}if(F=!0,L.pendingcb--,Q){const fe=L[_].splice(0);for(let ge=0;ge<fe.length;ge++)fe[ge](Q);d(O,Q,L.sync)}else te(L)&&(L.prefinished=!0,O.emit("prefinish"),L.pendingcb++,e.nextTick(Ae,O,L))}L.sync=!0,L.pendingcb++;try{O._final(Y)}catch(Q){Y(Q)}L.sync=!1}function se(O,L){!L.prefinished&&!L.finalCalled&&(typeof O._final=="function"&&!L.destroyed?(L.finalCalled=!0,ie(O,L)):(L.prefinished=!0,O.emit("prefinish")))}function Ee(O,L,F){te(L)&&(se(O,L),L.pendingcb===0&&(F?(L.pendingcb++,e.nextTick((Y,Q)=>{te(Q)?Ae(Y,Q):Q.pendingcb--},O,L)):te(L)&&(L.pendingcb++,Ae(O,L))))}function Ae(O,L){L.pendingcb--,L.finished=!0;const F=L[_].splice(0);for(let Y=0;Y<F.length;Y++)F[Y]();if(O.emit("finish"),L.autoDestroy){const Y=O._readableState;(!Y||Y.autoDestroy&&(Y.endEmitted||Y.readable===!1))&&O.destroy()}}o(c.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(O){this._writableState&&(this._writableState.destroyed=O)}},writable:{__proto__:null,get(){const O=this._writableState;return!!O&&O.writable!==!1&&!O.destroyed&&!O.errored&&!O.ending&&!O.ended},set(O){this._writableState&&(this._writableState.writable=!!O)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const O=this._writableState;return O?!O.destroyed&&!O.ending&&O.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Re=B.destroy;c.prototype.destroy=function(O,L){const F=this._writableState;return!F.destroyed&&(F.bufferedIndex<F.buffered.length||F[_].length)&&e.nextTick(H,F),Re.call(this,O,L),this},c.prototype._undestroy=B.undestroy,c.prototype._destroy=function(O,L){L(O)},c.prototype[S.captureRejectionSymbol]=function(O){this.destroy(O)};let _e;function me(){return _e===void 0&&(_e={}),_e}return c.fromWeb=function(O,L){return me().newStreamWritableFromWritableStream(O,L)},c.toWeb=function(O){return me().newWritableStreamFromStreamWritable(O)},di}var hi,fs;function fc(){if(fs)return hi;fs=1;const e=Vt,t=zt,{isReadable:n,isWritable:r,isIterable:i,isNodeStream:o,isReadableNodeStream:a,isWritableNodeStream:l,isDuplexNodeStream:h,isReadableStream:f,isWritableStream:S}=mt,A=xt,{AbortError:D,codes:{ERR_INVALID_ARG_TYPE:B,ERR_INVALID_RETURN_VALUE:W}}=Le,{destroyer:m}=dn,T=bt(),N=Lr(),I=so(),{createDeferredPromise:M}=$e,j=Ma,P=globalThis.Blob||t.Blob,$=typeof P<"u"?function(p){return p instanceof P}:function(p){return!1},q=globalThis.AbortController||Nn().AbortController,{FunctionPrototypeCall:s}=ye;class u extends T{constructor(p){super(p),(p==null?void 0:p.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(p==null?void 0:p.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}hi=function _(p,C){if(h(p))return p;if(a(p))return E({readable:p});if(l(p))return E({writable:p});if(o(p))return E({writable:!1,readable:!1});if(f(p))return E({readable:N.fromWeb(p)});if(S(p))return E({writable:I.fromWeb(p)});if(typeof p=="function"){const{value:b,write:v,final:R,destroy:k}=d(p);if(i(b))return j(u,b,{objectMode:!0,write:v,final:R,destroy:k});const G=b==null?void 0:b.then;if(typeof G=="function"){let z;const X=s(G,b,H=>{if(H!=null)throw new W("nully","body",H)},H=>{m(z,H)});return z=new u({objectMode:!0,readable:!1,write:v,final(H){R(async()=>{try{await X,e.nextTick(H,null)}catch(ne){e.nextTick(H,ne)}})},destroy:k})}throw new W("Iterable, AsyncIterable or AsyncFunction",C,b)}if($(p))return _(p.arrayBuffer());if(i(p))return j(u,p,{objectMode:!0,writable:!1});if(f(p==null?void 0:p.readable)&&S(p==null?void 0:p.writable))return u.fromWeb(p);if(typeof(p==null?void 0:p.writable)=="object"||typeof(p==null?void 0:p.readable)=="object"){const b=p!=null&&p.readable?a(p==null?void 0:p.readable)?p==null?void 0:p.readable:_(p.readable):void 0,v=p!=null&&p.writable?l(p==null?void 0:p.writable)?p==null?void 0:p.writable:_(p.writable):void 0;return E({readable:b,writable:v})}const c=p==null?void 0:p.then;if(typeof c=="function"){let b;return s(c,p,v=>{v!=null&&b.push(v),b.push(null)},v=>{m(b,v)}),b=new u({objectMode:!0,writable:!1,read(){}})}throw new B(C,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],p)};function d(_){let{promise:p,resolve:C}=M();const c=new q,b=c.signal;return{value:_(async function*(){for(;;){const R=p;p=null;const{chunk:k,done:G,cb:z}=await R;if(e.nextTick(z),G)return;if(b.aborted)throw new D(void 0,{cause:b.reason});({promise:p,resolve:C}=M()),yield k}}(),{signal:b}),write(R,k,G){const z=C;C=null,z({chunk:R,done:!1,cb:G})},final(R){const k=C;C=null,k({done:!0,cb:R})},destroy(R,k){c.abort(),k(R)}}}function E(_){const p=_.readable&&typeof _.readable.read!="function"?N.wrap(_.readable):_.readable,C=_.writable;let c=!!n(p),b=!!r(C),v,R,k,G,z;function X(H){const ne=G;G=null,ne?ne(H):H&&z.destroy(H)}return z=new u({readableObjectMode:!!(p!=null&&p.readableObjectMode),writableObjectMode:!!(C!=null&&C.writableObjectMode),readable:c,writable:b}),b&&(A(C,H=>{b=!1,H&&m(p,H),X(H)}),z._write=function(H,ne,te){C.write(H,ne)?te():v=te},z._final=function(H){C.end(),R=H},C.on("drain",function(){if(v){const H=v;v=null,H()}}),C.on("finish",function(){if(R){const H=R;R=null,H()}})),c&&(A(p,H=>{c=!1,H&&m(p,H),X(H)}),p.on("readable",function(){if(k){const H=k;k=null,H()}}),p.on("end",function(){z.push(null)}),z._read=function(){for(;;){const H=p.read();if(H===null){k=z._read;return}if(!z.push(H))return}}),z._destroy=function(H,ne){!H&&G!==null&&(H=new D),k=null,v=null,R=null,G===null?ne(H):(G=ne,m(C,H),m(p,H))},z}return hi}var gi,cs;function bt(){if(cs)return gi;cs=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=ye;gi=a;const i=Lr(),o=so();r(a.prototype,i.prototype),r(a,i);{const S=n(o.prototype);for(let A=0;A<S.length;A++){const D=S[A];a.prototype[D]||(a.prototype[D]=o.prototype[D])}}function a(S){if(!(this instanceof a))return new a(S);i.call(this,S),o.call(this,S),S?(this.allowHalfOpen=S.allowHalfOpen!==!1,S.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),S.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(a.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(S){this._readableState&&this._writableState&&(this._readableState.destroyed=S,this._writableState.destroyed=S)}}});let l;function h(){return l===void 0&&(l={}),l}a.fromWeb=function(S,A){return h().newStreamDuplexFromReadableWritablePair(S,A)},a.toWeb=function(S){return h().newReadableWritablePairFromDuplex(S)};let f;return a.from=function(S){return f||(f=fc()),f(S,"body")},gi}const{ObjectSetPrototypeOf:Ba,Symbol:cc}=ye;var Da=yt;const{ERR_METHOD_NOT_IMPLEMENTED:dc}=Le.codes,ao=bt(),{getHighWaterMark:hc}=Cr;Ba(yt.prototype,ao.prototype);Ba(yt,ao);const Tn=cc("kCallback");function yt(e){if(!(this instanceof yt))return new yt(e);const t=e?hc(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),ao.call(this,e),this._readableState.sync=!1,this[Tn]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",gc)}function Wi(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,n)=>{if(t){e?e(t):this.destroy(t);return}n!=null&&this.push(n),this.push(null),e&&e()}):(this.push(null),e&&e())}function gc(){this._final!==Wi&&Wi.call(this)}yt.prototype._final=Wi;yt.prototype._transform=function(e,t,n){throw new dc("_transform()")};yt.prototype._write=function(e,t,n){const r=this._readableState,i=this._writableState,o=r.length;this._transform(e,t,(a,l)=>{if(a){n(a);return}l!=null&&this.push(l),i.ended||o===r.length||r.length<r.highWaterMark?n():this[Tn]=n})};yt.prototype._read=function(){if(this[Tn]){const e=this[Tn];this[Tn]=null,e()}};const{ObjectSetPrototypeOf:$a}=ye;var ka=ln;const lo=Da;$a(ln.prototype,lo.prototype);$a(ln,lo);function ln(e){if(!(this instanceof ln))return new ln(e);lo.call(this,e)}ln.prototype._transform=function(e,t,n){n(null,e)};const Rn=Vt,{ArrayIsArray:pc,Promise:wc,SymbolAsyncIterator:bc,SymbolDispose:yc}=ye,_r=xt,{once:_c}=$e,mc=dn,ds=bt(),{aggregateTwoErrors:Ec,codes:{ERR_INVALID_ARG_TYPE:Fi,ERR_INVALID_RETURN_VALUE:pi,ERR_MISSING_ARGS:Sc,ERR_STREAM_DESTROYED:vc,ERR_STREAM_PREMATURE_CLOSE:Ac},AbortError:Rc}=Le,{validateFunction:Ic,validateAbortSignal:Tc}=$n,{isIterable:Dt,isReadable:wi,isReadableNodeStream:pr,isNodeStream:hs,isTransformStream:en,isWebStream:Oc,isReadableStream:bi,isReadableFinished:xc}=mt,Nc=globalThis.AbortController||Nn().AbortController;let yi,_i,mi;function gs(e,t,n){let r=!1;e.on("close",()=>{r=!0});const i=_r(e,{readable:t,writable:n},o=>{r=!o});return{destroy:o=>{r||(r=!0,mc.destroyer(e,o||new vc("pipe")))},cleanup:i}}function Cc(e){return Ic(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function Ei(e){if(Dt(e))return e;if(pr(e))return Lc(e);throw new Fi("val",["Readable","Iterable","AsyncIterable"],e)}async function*Lc(e){_i||(_i=Lr()),yield*_i.prototype[bc].call(e)}async function ar(e,t,n,{end:r}){let i,o=null;const a=f=>{if(f&&(i=f),o){const S=o;o=null,S()}},l=()=>new wc((f,S)=>{i?S(i):o=()=>{i?S(i):f()}});t.on("drain",a);const h=_r(t,{readable:!1},a);try{t.writableNeedDrain&&await l();for await(const f of e)t.write(f)||await l();r&&(t.end(),await l()),n()}catch(f){n(i!==f?Ec(i,f):f)}finally{h(),t.off("drain",a)}}async function Si(e,t,n,{end:r}){en(t)&&(t=t.writable);const i=t.getWriter();try{for await(const o of e)await i.ready,i.write(o).catch(()=>{});await i.ready,r&&await i.close(),n()}catch(o){try{await i.abort(o),n(o)}catch(a){n(a)}}}function Pc(...e){return ja(e,_c(Cc(e)))}function ja(e,t,n){if(e.length===1&&pc(e[0])&&(e=e[0]),e.length<2)throw new Sc("streams");const r=new Nc,i=r.signal,o=n==null?void 0:n.signal,a=[];Tc(o,"options.signal");function l(){W(new Rc)}mi=mi||$e.addAbortListener;let h;o&&(h=mi(o,l));let f,S;const A=[];let D=0;function B(I){W(I,--D===0)}function W(I,M){var j;if(I&&(!f||f.code==="ERR_STREAM_PREMATURE_CLOSE")&&(f=I),!(!f&&!M)){for(;A.length;)A.shift()(f);(j=h)===null||j===void 0||j[yc](),r.abort(),M&&(f||a.forEach(P=>P()),Rn.nextTick(t,f,S))}}let m;for(let I=0;I<e.length;I++){const M=e[I],j=I<e.length-1,P=I>0,$=j||(n==null?void 0:n.end)!==!1,q=I===e.length-1;if(hs(M)){let s=function(u){u&&u.name!=="AbortError"&&u.code!=="ERR_STREAM_PREMATURE_CLOSE"&&B(u)};if($){const{destroy:u,cleanup:d}=gs(M,j,P);A.push(u),wi(M)&&q&&a.push(d)}M.on("error",s),wi(M)&&q&&a.push(()=>{M.removeListener("error",s)})}if(I===0)if(typeof M=="function"){if(m=M({signal:i}),!Dt(m))throw new pi("Iterable, AsyncIterable or Stream","source",m)}else Dt(M)||pr(M)||en(M)?m=M:m=ds.from(M);else if(typeof M=="function"){if(en(m)){var T;m=Ei((T=m)===null||T===void 0?void 0:T.readable)}else m=Ei(m);if(m=M(m,{signal:i}),j){if(!Dt(m,!0))throw new pi("AsyncIterable",`transform[${I-1}]`,m)}else{var N;yi||(yi=ka);const s=new yi({objectMode:!0}),u=(N=m)===null||N===void 0?void 0:N.then;if(typeof u=="function")D++,u.call(m,_=>{S=_,_!=null&&s.write(_),$&&s.end(),Rn.nextTick(B)},_=>{s.destroy(_),Rn.nextTick(B,_)});else if(Dt(m,!0))D++,ar(m,s,B,{end:$});else if(bi(m)||en(m)){const _=m.readable||m;D++,ar(_,s,B,{end:$})}else throw new pi("AsyncIterable or Promise","destination",m);m=s;const{destroy:d,cleanup:E}=gs(m,!1,!0);A.push(d),q&&a.push(E)}}else if(hs(M)){if(pr(m)){D+=2;const s=Mc(m,M,B,{end:$});wi(M)&&q&&a.push(s)}else if(en(m)||bi(m)){const s=m.readable||m;D++,ar(s,M,B,{end:$})}else if(Dt(m))D++,ar(m,M,B,{end:$});else throw new Fi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=M}else if(Oc(M)){if(pr(m))D++,Si(Ei(m),M,B,{end:$});else if(bi(m)||Dt(m))D++,Si(m,M,B,{end:$});else if(en(m))D++,Si(m.readable,M,B,{end:$});else throw new Fi("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],m);m=M}else m=ds.from(M)}return(i!=null&&i.aborted||o!=null&&o.aborted)&&Rn.nextTick(l),m}function Mc(e,t,n,{end:r}){let i=!1;if(t.on("close",()=>{i||n(new Ac)}),e.pipe(t,{end:!1}),r){let o=function(){i=!0,t.end()};xc(e)?Rn.nextTick(o):e.once("end",o)}else n();return _r(e,{readable:!0,writable:!1},o=>{const a=e._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?e.once("end",n).once("error",n):n(o)}),_r(t,{readable:!1,writable:!0},n)}var uo={pipelineImpl:ja,pipeline:Pc};const{pipeline:Bc}=uo,lr=bt(),{destroyer:Dc}=dn,{isNodeStream:ur,isReadable:ps,isWritable:ws,isWebStream:vi,isTransformStream:Bt,isWritableStream:bs,isReadableStream:ys}=mt,{AbortError:$c,codes:{ERR_INVALID_ARG_VALUE:_s,ERR_MISSING_ARGS:kc}}=Le,jc=xt;var Ua=function(...t){if(t.length===0)throw new kc("streams");if(t.length===1)return lr.from(t[0]);const n=[...t];if(typeof t[0]=="function"&&(t[0]=lr.from(t[0])),typeof t[t.length-1]=="function"){const B=t.length-1;t[B]=lr.from(t[B])}for(let B=0;B<t.length;++B)if(!(!ur(t[B])&&!vi(t[B]))){if(B<t.length-1&&!(ps(t[B])||ys(t[B])||Bt(t[B])))throw new _s(`streams[${B}]`,n[B],"must be readable");if(B>0&&!(ws(t[B])||bs(t[B])||Bt(t[B])))throw new _s(`streams[${B}]`,n[B],"must be writable")}let r,i,o,a,l;function h(B){const W=a;a=null,W?W(B):B?l.destroy(B):!D&&!A&&l.destroy()}const f=t[0],S=Bc(t,h),A=!!(ws(f)||bs(f)||Bt(f)),D=!!(ps(S)||ys(S)||Bt(S));if(l=new lr({writableObjectMode:!!(f!=null&&f.writableObjectMode),readableObjectMode:!!(S!=null&&S.readableObjectMode),writable:A,readable:D}),A){if(ur(f))l._write=function(W,m,T){f.write(W,m)?T():r=T},l._final=function(W){f.end(),i=W},f.on("drain",function(){if(r){const W=r;r=null,W()}});else if(vi(f)){const m=(Bt(f)?f.writable:f).getWriter();l._write=async function(T,N,I){try{await m.ready,m.write(T).catch(()=>{}),I()}catch(M){I(M)}},l._final=async function(T){try{await m.ready,m.close().catch(()=>{}),i=T}catch(N){T(N)}}}const B=Bt(S)?S.readable:S;jc(B,()=>{if(i){const W=i;i=null,W()}})}if(D){if(ur(S))S.on("readable",function(){if(o){const B=o;o=null,B()}}),S.on("end",function(){l.push(null)}),l._read=function(){for(;;){const B=S.read();if(B===null){o=l._read;return}if(!l.push(B))return}};else if(vi(S)){const W=(Bt(S)?S.readable:S).getReader();l._read=async function(){for(;;)try{const{value:m,done:T}=await W.read();if(!l.push(m))return;if(T){l.push(null);return}}catch{return}}}}return l._destroy=function(B,W){!B&&a!==null&&(B=new $c),o=null,r=null,i=null,a===null?W(B):(a=W,ur(S)&&Dc(S,B))},l};const Uc=globalThis.AbortController||Nn().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Wc,ERR_INVALID_ARG_TYPE:kn,ERR_MISSING_ARGS:Fc,ERR_OUT_OF_RANGE:qc},AbortError:ot}=Le,{validateAbortSignal:Yt,validateInteger:ms,validateObject:Zt}=$n,Hc=ye.Symbol("kWeak"),Gc=ye.Symbol("kResistStopPropagation"),{finished:zc}=xt,Vc=Ua,{addAbortSignalNoValidate:Kc}=Nr,{isWritable:Yc,isNodeStream:Zc}=mt,{deprecate:Jc}=$e,{ArrayPrototypePush:Xc,Boolean:Qc,MathFloor:Es,Number:ed,NumberIsNaN:td,Promise:Ss,PromiseReject:vs,PromiseResolve:nd,PromisePrototypeThen:As,Symbol:Wa}=ye,mr=Wa("kEmpty"),Rs=Wa("kEof");function rd(e,t){if(t!=null&&Zt(t,"options"),(t==null?void 0:t.signal)!=null&&Yt(t.signal,"options.signal"),Zc(e)&&!Yc(e))throw new Wc("stream",e,"must be writable");const n=Vc(this,e);return t!=null&&t.signal&&Kc(t.signal,n),n}function Pr(e,t){if(typeof e!="function")throw new kn("fn",["Function","AsyncFunction"],e);t!=null&&Zt(t,"options"),(t==null?void 0:t.signal)!=null&&Yt(t.signal,"options.signal");let n=1;(t==null?void 0:t.concurrency)!=null&&(n=Es(t.concurrency));let r=n-1;return(t==null?void 0:t.highWaterMark)!=null&&(r=Es(t.highWaterMark)),ms(n,"options.concurrency",1),ms(r,"options.highWaterMark",0),r+=n,(async function*(){const o=$e.AbortSignalAny([t==null?void 0:t.signal].filter(Qc)),a=this,l=[],h={signal:o};let f,S,A=!1,D=0;function B(){A=!0,W()}function W(){D-=1,m()}function m(){S&&!A&&D<n&&l.length<r&&(S(),S=null)}async function T(){try{for await(let N of a){if(A)return;if(o.aborted)throw new ot;try{if(N=e(N,h),N===mr)continue;N=nd(N)}catch(I){N=vs(I)}D+=1,As(N,W,B),l.push(N),f&&(f(),f=null),!A&&(l.length>=r||D>=n)&&await new Ss(I=>{S=I})}l.push(Rs)}catch(N){const I=vs(N);As(I,W,B),l.push(I)}finally{A=!0,f&&(f(),f=null)}}T();try{for(;;){for(;l.length>0;){const N=await l[0];if(N===Rs)return;if(o.aborted)throw new ot;N!==mr&&(yield N),l.shift(),m()}await new Ss(N=>{f=N})}}finally{A=!0,S&&(S(),S=null)}}).call(this)}function id(e=void 0){return e!=null&&Zt(e,"options"),(e==null?void 0:e.signal)!=null&&Yt(e.signal,"options.signal"),(async function*(){let n=0;for await(const i of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new ot({cause:e.signal.reason});yield[n++,i]}}).call(this)}async function Fa(e,t=void 0){for await(const n of fo.call(this,e,t))return!0;return!1}async function od(e,t=void 0){if(typeof e!="function")throw new kn("fn",["Function","AsyncFunction"],e);return!await Fa.call(this,async(...n)=>!await e(...n),t)}async function sd(e,t){for await(const n of fo.call(this,e,t))return n}async function ad(e,t){if(typeof e!="function")throw new kn("fn",["Function","AsyncFunction"],e);async function n(r,i){return await e(r,i),mr}for await(const r of Pr.call(this,n,t));}function fo(e,t){if(typeof e!="function")throw new kn("fn",["Function","AsyncFunction"],e);async function n(r,i){return await e(r,i)?r:mr}return Pr.call(this,n,t)}class ld extends Fc{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function ud(e,t,n){var r;if(typeof e!="function")throw new kn("reducer",["Function","AsyncFunction"],e);n!=null&&Zt(n,"options"),(n==null?void 0:n.signal)!=null&&Yt(n.signal,"options.signal");let i=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){const f=new ot(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await zc(this.destroy(f)),f}const o=new Uc,a=o.signal;if(n!=null&&n.signal){const f={once:!0,[Hc]:this,[Gc]:!0};n.signal.addEventListener("abort",()=>o.abort(),f)}let l=!1;try{for await(const f of this){var h;if(l=!0,n!=null&&(h=n.signal)!==null&&h!==void 0&&h.aborted)throw new ot;i?t=await e(t,f,{signal:a}):(t=f,i=!0)}if(!l&&!i)throw new ld}finally{o.abort()}return t}async function fd(e){e!=null&&Zt(e,"options"),(e==null?void 0:e.signal)!=null&&Yt(e.signal,"options.signal");const t=[];for await(const r of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ot(void 0,{cause:e.signal.reason});Xc(t,r)}return t}function cd(e,t){const n=Pr.call(this,e,t);return(async function*(){for await(const i of n)yield*i}).call(this)}function qa(e){if(e=ed(e),td(e))return 0;if(e<0)throw new qc("number",">= 0",e);return e}function dd(e,t=void 0){return t!=null&&Zt(t,"options"),(t==null?void 0:t.signal)!=null&&Yt(t.signal,"options.signal"),e=qa(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ot;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new ot;e--<=0&&(yield o)}}).call(this)}function hd(e,t=void 0){return t!=null&&Zt(t,"options"),(t==null?void 0:t.signal)!=null&&Yt(t.signal,"options.signal"),e=qa(e),(async function*(){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ot;for await(const o of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new ot;if(e-- >0&&(yield o),e<=0)return}}).call(this)}to.streamReturningOperators={asIndexedPairs:Jc(id,"readable.asIndexedPairs will be removed in a future version."),drop:dd,filter:fo,flatMap:cd,map:Pr,take:hd,compose:rd};to.promiseReturningOperators={every:od,forEach:ad,reduce:ud,toArray:fd,some:Fa,find:sd};var Ai,Is;function Ha(){if(Is)return Ai;Is=1;const{ArrayPrototypePop:e,Promise:t}=ye,{isIterable:n,isNodeStream:r,isWebStream:i}=mt,{pipelineImpl:o}=uo,{finished:a}=xt;Ga();function l(...h){return new t((f,S)=>{let A,D;const B=h[h.length-1];if(B&&typeof B=="object"&&!r(B)&&!n(B)&&!i(B)){const W=e(h);A=W.signal,D=W.end}o(h,(W,m)=>{W?S(W):f(m)},{signal:A,end:D})})}return Ai={finished:a,pipeline:l},Ai}var Ts;function Ga(){if(Ts)return ai.exports;Ts=1;const{Buffer:e}=zt,{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=ye,{promisify:{custom:i}}=$e,{streamReturningOperators:o,promiseReturningOperators:a}=to,{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=Le,h=Ua,{setDefaultHighWaterMark:f,getDefaultHighWaterMark:S}=Cr,{pipeline:A}=uo,{destroyer:D}=dn,B=xt,W=Ha(),m=mt,T=ai.exports=oo.Stream;T.isDestroyed=m.isDestroyed,T.isDisturbed=m.isDisturbed,T.isErrored=m.isErrored,T.isReadable=m.isReadable,T.isWritable=m.isWritable,T.Readable=Lr();for(const I of n(o)){let j=function(...P){if(new.target)throw l();return T.Readable.from(r(M,this,P))};const M=o[I];t(j,"name",{__proto__:null,value:M.name}),t(j,"length",{__proto__:null,value:M.length}),t(T.Readable.prototype,I,{__proto__:null,value:j,enumerable:!1,configurable:!0,writable:!0})}for(const I of n(a)){let j=function(...P){if(new.target)throw l();return r(M,this,P)};const M=a[I];t(j,"name",{__proto__:null,value:M.name}),t(j,"length",{__proto__:null,value:M.length}),t(T.Readable.prototype,I,{__proto__:null,value:j,enumerable:!1,configurable:!0,writable:!0})}T.Writable=so(),T.Duplex=bt(),T.Transform=Da,T.PassThrough=ka,T.pipeline=A;const{addAbortSignal:N}=Nr;return T.addAbortSignal=N,T.finished=B,T.destroy=D,T.compose=h,T.setDefaultHighWaterMark=f,T.getDefaultHighWaterMark=S,t(T,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return W}}),t(A,i,{__proto__:null,enumerable:!0,get(){return W.pipeline}}),t(B,i,{__proto__:null,enumerable:!0,get(){return W.finished}}),T.Stream=T,T._isUint8Array=function(M){return M instanceof Uint8Array},T._uint8ArrayToBuffer=function(M){return e.from(M.buffer,M.byteOffset,M.byteLength)},ai.exports}(function(e){const t=Ga(),n=Ha(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(ia);var Mr=ia.exports,za=Cn;Cn.default=Cn;Cn.stable=Ya;Cn.stableStringify=Ya;var Er="[...]",Va="[Circular]",qt=[],jt=[];function Ka(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Cn(e,t,n,r){typeof r>"u"&&(r=Ka()),qi(e,"",0,[],void 0,0,r);var i;try{jt.length===0?i=JSON.stringify(e,t,n):i=JSON.stringify(e,Za(t),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;qt.length!==0;){var o=qt.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function on(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:e}),qt.push([r,n,t,i])):jt.push([t,n,e]):(r[n]=e,qt.push([r,n,t]))}function qi(e,t,n,r,i,o,a){o+=1;var l;if(typeof e=="object"&&e!==null){for(l=0;l<r.length;l++)if(r[l]===e){on(Va,e,t,i);return}if(typeof a.depthLimit<"u"&&o>a.depthLimit){on(Er,e,t,i);return}if(typeof a.edgesLimit<"u"&&n+1>a.edgesLimit){on(Er,e,t,i);return}if(r.push(e),Array.isArray(e))for(l=0;l<e.length;l++)qi(e[l],l,l,r,e,o,a);else{var h=Object.keys(e);for(l=0;l<h.length;l++){var f=h[l];qi(e[f],f,l,r,e,o,a)}}r.pop()}}function gd(e,t){return e<t?-1:e>t?1:0}function Ya(e,t,n,r){typeof r>"u"&&(r=Ka());var i=Hi(e,"",0,[],void 0,0,r)||e,o;try{jt.length===0?o=JSON.stringify(i,t,n):o=JSON.stringify(i,Za(t),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;qt.length!==0;){var a=qt.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return o}function Hi(e,t,n,r,i,o,a){o+=1;var l;if(typeof e=="object"&&e!==null){for(l=0;l<r.length;l++)if(r[l]===e){on(Va,e,t,i);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof a.depthLimit<"u"&&o>a.depthLimit){on(Er,e,t,i);return}if(typeof a.edgesLimit<"u"&&n+1>a.edgesLimit){on(Er,e,t,i);return}if(r.push(e),Array.isArray(e))for(l=0;l<e.length;l++)Hi(e[l],l,l,r,e,o,a);else{var h={},f=Object.keys(e).sort(gd);for(l=0;l<f.length;l++){var S=f[l];Hi(e[S],S,l,r,e,o,a),h[S]=e[S]}if(typeof i<"u")qt.push([i,t,e]),i[t]=h;else return h}r.pop()}}function Za(e){return e=typeof e<"u"?e:function(t,n){return n},function(t,n){if(jt.length>0)for(var r=0;r<jt.length;r++){var i=jt[r];if(i[1]===t&&i[0]===n){n=i[2],jt.splice(r,1);break}}return e.call(this,t,n)}}const pd=cn(za);var co={exports:{}},wd=Ja;function Ja(e,t){if(e&&t)return Ja(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(r){n[r]=e[r]}),n;function n(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];var o=e.apply(this,r),a=r[r.length-1];return typeof o=="function"&&o!==a&&Object.keys(a).forEach(function(l){o[l]=a[l]}),o}}var Xa=wd;co.exports=Xa(wr);co.exports.strict=Xa(Qa);wr.proto=wr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return wr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Qa(this)},configurable:!0})});function wr(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Qa(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}var ho=co.exports;const bd=cn(ho);var yd=ho,_d=function(){},md=tn.Bare?queueMicrotask:process.nextTick.bind(process),Ed=function(e){return e.setHeader&&typeof e.abort=="function"},Sd=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},el=function(e,t,n){if(typeof t=="function")return el(e,null,t);t||(t={}),n=yd(n||_d);var r=e._writableState,i=e._readableState,o=t.readable||t.readable!==!1&&e.readable,a=t.writable||t.writable!==!1&&e.writable,l=!1,h=function(){e.writable||f()},f=function(){a=!1,o||n.call(e)},S=function(){o=!1,a||n.call(e)},A=function(T){n.call(e,T?new Error("exited with error code: "+T):null)},D=function(T){n.call(e,T)},B=function(){md(W)},W=function(){if(!l){if(o&&!(i&&i.ended&&!i.destroyed))return n.call(e,new Error("premature close"));if(a&&!(r&&r.ended&&!r.destroyed))return n.call(e,new Error("premature close"))}},m=function(){e.req.on("finish",f)};return Ed(e)?(e.on("complete",f),e.on("abort",B),e.req?m():e.on("request",m)):a&&!r&&(e.on("end",h),e.on("close",h)),Sd(e)&&e.on("exit",A),e.on("end",S),e.on("finish",f),t.error!==!1&&e.on("error",D),e.on("close",B),function(){l=!0,e.removeListener("complete",f),e.removeListener("abort",B),e.removeListener("request",m),e.req&&e.req.removeListener("finish",f),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("exit",A),e.removeListener("end",S),e.removeListener("error",D),e.removeListener("close",B)}},tl=el;const Os=cn(tl);var vd=ho,Ad=tl,br;try{br=ou}catch{}var Ln=function(){},Rd=typeof process>"u"?!1:/^v?\.0/.test(process.version),Br=function(e){return typeof e=="function"},Id=function(e){return!Rd||!br?!1:(e instanceof(br.ReadStream||Ln)||e instanceof(br.WriteStream||Ln))&&Br(e.close)},Td=function(e){return e.setHeader&&Br(e.abort)},Od=function(e,t,n,r){r=vd(r);var i=!1;e.on("close",function(){i=!0}),Ad(e,{readable:t,writable:n},function(a){if(a)return r(a);i=!0,r()});var o=!1;return function(a){if(!i&&!o){if(o=!0,Id(e))return e.close(Ln);if(Td(e))return e.abort();if(Br(e.destroy))return e.destroy();r(a||new Error("stream was destroyed"))}}},xs=function(e){e()},xd=function(e,t){return e.pipe(t)},Nd=function(){var e=Array.prototype.slice.call(arguments),t=Br(e[e.length-1]||Ln)&&e.pop()||Ln;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var n,r=e.map(function(i,o){var a=o<e.length-1,l=o>0;return Od(i,a,l,function(h){n||(n=h),h&&r.forEach(xs),!a&&(r.forEach(xs),t(n))})});return e.reduce(xd)},Cd=Nd;const Ns=cn(Cd);function fr(){}const Cs="SYN",Ri="ACK",Ls="BRK";class Ps extends Mr.Duplex{constructor(t){let{name:n,target:r,targetWindow:i=window,targetOrigin:o="*"}=t;if(super({objectMode:!0}),ee(this,"_init",void 0),ee(this,"_haveSyn",void 0),ee(this,"_name",void 0),ee(this,"_target",void 0),ee(this,"_targetWindow",void 0),ee(this,"_targetOrigin",void 0),ee(this,"_onMessage",void 0),ee(this,"_synIntervalId",void 0),!n||!r)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=n,this._target=r,this._targetWindow=i,this._targetOrigin=o,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write(Ls,null,fr),this._haveSyn=!1,this._init=!1}_handShake(){this._write(Cs,null,fr),this.cork()}_onData(t){if(!this._init)t===Cs?(this._haveSyn=!0,this._write(Ri,null,fr)):t===Ri&&(this._init=!0,this._haveSyn||this._write(Ri,null,fr),this.uncork());else if(t===Ls)this._break();else try{this.push(t)}catch(n){this.emit("error",n)}}_postMessage(t){const n=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:t},n)}onMessage(t){const n=t.data;this._targetOrigin!=="*"&&t.origin!==this._targetOrigin||t.source!==this._targetWindow||typeof n!="object"||n.target!==this._name||!n.data||this._onData(n.data)}_read(){}_write(t,n,r){this._postMessage(t),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const Ld={rpc:{internal:-32603}},Ms={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Bs=Ld.rpc.internal,Pd="Unspecified error message. This is a bug, please report it.";function nl(e){return Number.isInteger(e)}function Ds(e){return typeof e=="string"&&e.length>0}function $s(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function rl(e){const t=e;return!(!t||!nl(t.code)||!Ds(t.message)||t.stack&&!Ds(t.stack))}function Md(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pd;if(nl(e)){const n=e.toString();if(Object.hasOwn(Ms,n))return Ms[n].message}return t}const Bd={code:Bs,message:Md(Bs)};function Gi(e){try{JSON.parse(JSON.stringify(e,(t,n)=>{if(t==="__proto__"||t==="constructor")throw new Error("Not valid json");if(typeof n=="function"||typeof n=="symbol")throw new Error("Not valid json");return n}),(t,n)=>{if(!(t==="__proto__"||t==="constructor"))return n})}catch{return!1}return!0}function ks(e){return Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return Gi(r)&&(t[n]=r),t},{})}function Dd(e){return Array.isArray(e)?e.map(t=>Gi(t)?t:$s(t)?ks(t):null):$s(e)?ks(e):Gi(e)?e:null}function $d(e,t){if(e&&typeof e=="object"&&"serialize"in e&&typeof e.serialize=="function")return e.serialize();if(rl(e))return e;const n=Dd(e);return ze(ze({},t),{},{data:{cause:n}})}function js(e){let{fallbackError:t=Bd,shouldIncludeStack:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!rl(t))throw new Error("Must provide fallback error with integer number code and string message.");const r=$d(e,t);return n||delete r.stack,r}function Us(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(()=>{throw r})}}function kd(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}class Dr extends su.EventEmitter{emit(t){let n=t==="error";const r=this._events;if(r!==void 0)n=n&&r.error===void 0;else if(!n)return!1;for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(n){let h;if(o.length>0&&([h]=o),h instanceof Error)throw h;const f=new Error(`Unhandled error.${h?` (${h.message})`:""}`);throw f.context=h,f}const l=r[t];if(l===void 0)return!1;if(typeof l=="function")Us(l,this,o);else{const h=l.length,f=kd(l);for(let S=0;S<h;S+=1)Us(f[S],this,o)}return!0}}class vn extends Error{constructor(t){let{code:n,message:r,data:i}=t;if(!Number.isInteger(n))throw new Error("code must be an integer");if(!r||typeof r!="string")throw new Error("message must be string");super(r),ee(this,"code",void 0),ee(this,"data",void 0),this.code=n,i!==void 0&&(this.data=i)}toString(){return pd({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const zi=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(r,i)=>{r||i.error?t(r||i.error):!n||Array.isArray(i)?e(i):e(i.result)}};function jd(){const e={};function t(){return!1}const n=new Dr;function r(h){const f=e[h.id];if(!f)throw new Error(`StreamMiddleware - Unknown response id "${h.id}"`);delete e[h.id],Object.assign(f.res,h),setTimeout(f.end)}function i(h){n.emit("notification",h)}function o(h,f,S){let A;try{!h.id?i(h):r(h)}catch(D){A=D}S(A)}const a=new Mr.Duplex({objectMode:!0,read:t,write:o});return{events:n,middleware:(h,f,S,A)=>{a.push(h),e[h.id]={req:h,res:f,next:S,end:A}},stream:a}}function Ud(){return(e,t,n,r)=>{const i=e.id,o=Math.random().toString(36).slice(2);e.id=o,t.id=o,n(a=>{e.id=i,t.id=i,a()})}}class dt extends Dr{constructor(){super(),ee(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(t,n,r){const i=[];let o=null,a=!1;for(const l of r)if([o,a]=await dt._runMiddleware(t,n,l,i),a)break;return[o,a,i.reverse()]}static _runMiddleware(t,n,r,i){return new Promise(o=>{const a=h=>{const f=h||n.error;f&&(typeof f=="object"&&Object.keys(f).includes("stack")===!1&&(f.stack="Stack trace is not available."),n.error=js(f,{shouldIncludeStack:!0,fallbackError:{message:(f==null?void 0:f.message)||(f==null?void 0:f.toString()),code:(f==null?void 0:f.code)||-32603,stack:(f==null?void 0:f.stack)||"Stack trace is not available.",data:(f==null?void 0:f.data)||(f==null?void 0:f.message)||(f==null?void 0:f.toString())}})),o([f,!0])},l=h=>{n.error?a(n.error):(h&&(typeof h!="function"&&a(new vn({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),i.push(h)),o([null,!1]))};try{r(t,n,l,a)}catch(h){a(h)}})}static async _runReturnHandlers(t){for(const n of t)await new Promise((r,i)=>{n(o=>o?i(o):r())})}static _checkForCompletion(t,n,r){if(!("result"in n)&&!("error"in n))throw new vn({code:-32603,message:"Response has no error or result for request"});if(!r)throw new vn({code:-32603,message:"Nothing ended request"})}push(t){this._middleware.push(t)}handle(t,n){if(n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(t)?n?this._handleBatch(t,n):this._handleBatch(t):n?this._handle(t,n):this._promiseHandle(t)}asMiddleware(){return async(t,n,r,i)=>{try{const[o,a,l]=await dt._runAllMiddleware(t,n,this._middleware);return a?(await dt._runReturnHandlers(l),i(o)):r(async h=>{try{await dt._runReturnHandlers(l)}catch(f){return h(f)}return h()})}catch(o){return i(o)}}}async _handleBatch(t,n){try{const r=await Promise.all(t.map(this._promiseHandle.bind(this)));return n?n(null,r):r}catch(r){if(n)return n(r);throw r}}_promiseHandle(t){return new Promise((n,r)=>{this._handle(t,(i,o)=>{i&&o===void 0?r(i):n(o)}).catch(r)})}async _handle(t,n){if(!t||Array.isArray(t)||typeof t!="object"){const B=new vn({code:-32603,message:"request must be plain object"});return n(B,{id:void 0,jsonrpc:"2.0",error:B})}if(typeof t.method!="string"){const B=new vn({code:-32603,message:"method must be string"});return n(B,{id:t.id,jsonrpc:"2.0",error:B})}const r=ze({},t),i={id:r.id,jsonrpc:r.jsonrpc};let o=null;try{await this._processRequest(r,i)}catch(B){o=B}if(o&&(delete i.result,!i.error)){var a,l,h,f,S,A,D;typeof o=="object"&&Object.keys(o).includes("stack")===!1&&(o.stack="Stack trace is not available."),i.error=js(o,{shouldIncludeStack:!0,fallbackError:{message:((a=o)===null||a===void 0?void 0:a.message)||((l=o)===null||l===void 0?void 0:l.toString()),code:((h=o)===null||h===void 0?void 0:h.code)||-32603,stack:((f=o)===null||f===void 0?void 0:f.stack)||"Stack trace is not available.",data:((S=o)===null||S===void 0?void 0:S.data)||((A=o)===null||A===void 0?void 0:A.message)||((D=o)===null||D===void 0?void 0:D.toString())}})}return n(o,i)}async _processRequest(t,n){const[r,i,o]=await dt._runAllMiddleware(t,n,this._middleware);if(dt._checkForCompletion(t,n,i),await dt._runReturnHandlers(o),r)throw r}}class Wd extends Mr.Duplex{constructor(t){let{parent:n,name:r}=t;super({objectMode:!0}),ee(this,"_parent",void 0),ee(this,"_name",void 0),this._parent=n,this._name=r}_read(){}_write(t,n,r){this._parent.push({name:this._name,data:t}),r()}}const Ws=Symbol("IGNORE_SUBSTREAM");class Fd extends Mr.Duplex{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(ze(ze({},t),{},{objectMode:!0})),ee(this,"_substreams",void 0),ee(this,"getStream",void 0),this._substreams={}}createStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const n=new Wd({parent:this,name:t});return this._substreams[t]=n,qd(this,r=>n.destroy(r||void 0)),n}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=Ws}_read(){}_write(t,n,r){const{name:i,data:o}=t;if(!i)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),r();const a=this._substreams[i];return a?(a!==Ws&&a.push(o),r()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${i}"`),r())}}function qd(e,t){const n=bd(t);Os(e,{readable:!1},n),Os(e,{writable:!1},n)}var Sr={exports:{}};Sr.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,o=16,a=9007199254740991,l="[object Arguments]",h="[object Array]",f="[object AsyncFunction]",S="[object Boolean]",A="[object Date]",D="[object Error]",B="[object Function]",W="[object GeneratorFunction]",m="[object Map]",T="[object Number]",N="[object Null]",I="[object Object]",M="[object Proxy]",j="[object RegExp]",P="[object Set]",$="[object String]",q="[object Undefined]",s="[object WeakMap]",u="[object ArrayBuffer]",d="[object DataView]",E="[object Float32Array]",_="[object Float64Array]",p="[object Int8Array]",C="[object Int16Array]",c="[object Int32Array]",b="[object Uint8Array]",v="[object Uint8ClampedArray]",R="[object Uint16Array]",k="[object Uint32Array]",G=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,H={};H[E]=H[_]=H[p]=H[C]=H[c]=H[b]=H[v]=H[R]=H[k]=!0,H[l]=H[h]=H[u]=H[S]=H[d]=H[A]=H[D]=H[B]=H[m]=H[T]=H[I]=H[j]=H[P]=H[$]=H[s]=!1;var ne=typeof tn=="object"&&tn&&tn.Object===Object&&tn,te=typeof self=="object"&&self&&self.Object===Object&&self,ie=ne||te||Function("return this")(),se=t&&!t.nodeType&&t,Ee=se&&!0&&e&&!e.nodeType&&e,Ae=Ee&&Ee.exports===se,Re=Ae&&ne.process,_e=function(){try{var w=Ee&&Ee.require&&Ee.require("util").types;return w||Re&&Re.binding&&Re.binding("util")}catch{}}(),me=_e&&_e.isTypedArray;function O(w,x,U){switch(U.length){case 0:return w.call(x);case 1:return w.call(x,U[0]);case 2:return w.call(x,U[0],U[1]);case 3:return w.call(x,U[0],U[1],U[2])}return w.apply(x,U)}function L(w,x){for(var U=-1,J=Array(w);++U<w;)J[U]=x(U);return J}function F(w){return function(x){return w(x)}}function Y(w,x){return w==null?void 0:w[x]}function Q(w,x){return function(U){return w(x(U))}}var fe=Array.prototype,ge=Function.prototype,le=Object.prototype,ke=ie["__core-js_shared__"],re=ge.toString,xe=le.hasOwnProperty,Jt=function(){var w=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),Fn=le.toString,Fr=re.call(Object),qn=RegExp("^"+re.call(xe).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xt=Ae?ie.Buffer:void 0,Nt=ie.Symbol,gn=ie.Uint8Array;Xt&&Xt.allocUnsafe;var Ct=Q(Object.getPrototypeOf,Object),Hn=Object.create,qr=le.propertyIsEnumerable,Gn=fe.splice,at=Nt?Nt.toStringTag:void 0,Qt=function(){try{var w=Yr(Object,"defineProperty");return w({},"",{}),w}catch{}}(),Hr=Xt?Xt.isBuffer:void 0,pn=Math.max,zn=Date.now,Vn=Yr(ie,"Map"),Et=Yr(Object,"create"),wn=function(){function w(){}return function(x){if(!Pt(x))return{};if(Hn)return Hn(x);w.prototype=x;var U=new w;return w.prototype=void 0,U}}();function lt(w){var x=-1,U=w==null?0:w.length;for(this.clear();++x<U;){var J=w[x];this.set(J[0],J[1])}}function Gr(){this.__data__=Et?Et(null):{},this.size=0}function bn(w){var x=this.has(w)&&delete this.__data__[w];return this.size-=x?1:0,x}function Kn(w){var x=this.__data__;if(Et){var U=x[w];return U===r?void 0:U}return xe.call(x,w)?x[w]:void 0}function g(w){var x=this.__data__;return Et?x[w]!==void 0:xe.call(x,w)}function y(w,x){var U=this.__data__;return this.size+=this.has(w)?0:1,U[w]=Et&&x===void 0?r:x,this}lt.prototype.clear=Gr,lt.prototype.delete=bn,lt.prototype.get=Kn,lt.prototype.has=g,lt.prototype.set=y;function V(w){var x=-1,U=w==null?0:w.length;for(this.clear();++x<U;){var J=w[x];this.set(J[0],J[1])}}function K(){this.__data__=[],this.size=0}function Z(w){var x=this.__data__,U=Qn(x,w);if(U<0)return!1;var J=x.length-1;return U==J?x.pop():Gn.call(x,U,1),--this.size,!0}function Ie(w){var x=this.__data__,U=Qn(x,w);return U<0?void 0:x[U][1]}function Pe(w){return Qn(this.__data__,w)>-1}function Yn(w,x){var U=this.__data__,J=Qn(U,w);return J<0?(++this.size,U.push([w,x])):U[J][1]=x,this}V.prototype.clear=K,V.prototype.delete=Z,V.prototype.get=Ie,V.prototype.has=Pe,V.prototype.set=Yn;function Me(w){var x=-1,U=w==null?0:w.length;for(this.clear();++x<U;){var J=w[x];this.set(J[0],J[1])}}function Zn(){this.size=0,this.__data__={hash:new lt,map:new(Vn||V),string:new lt}}function zr(w){var x=tr(this,w).delete(w);return this.size-=x?1:0,x}function Jn(w){return tr(this,w).get(w)}function Xn(w){return tr(this,w).has(w)}function yn(w,x){var U=tr(this,w),J=U.size;return U.set(w,x),this.size+=U.size==J?0:1,this}Me.prototype.clear=Zn,Me.prototype.delete=zr,Me.prototype.get=Jn,Me.prototype.has=Xn,Me.prototype.set=yn;function Qe(w){var x=this.__data__=new V(w);this.size=x.size}function _n(){this.__data__=new V,this.size=0}function Lt(w){var x=this.__data__,U=x.delete(w);return this.size=x.size,U}function ut(w){return this.__data__.get(w)}function Ye(w){return this.__data__.has(w)}function Al(w,x){var U=this.__data__;if(U instanceof V){var J=U.__data__;if(!Vn||J.length<n-1)return J.push([w,x]),this.size=++U.size,this;U=this.__data__=new Me(J)}return U.set(w,x),this.size=U.size,this}Qe.prototype.clear=_n,Qe.prototype.delete=Lt,Qe.prototype.get=ut,Qe.prototype.has=Ye,Qe.prototype.set=Al;function Rl(w,x){var U=Xr(w),J=!U&&Jr(w),ae=!U&&!J&&No(w),ce=!U&&!J&&!ae&&Lo(w),pe=U||J||ae||ce,ue=pe?L(w.length,String):[],we=ue.length;for(var Ze in w)pe&&(Ze=="length"||ae&&(Ze=="offset"||Ze=="parent")||ce&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||Oo(Ze,we))||ue.push(Ze);return ue}function Vr(w,x,U){(U!==void 0&&!nr(w[x],U)||U===void 0&&!(x in w))&&Kr(w,x,U)}function Il(w,x,U){var J=w[x];(!(xe.call(w,x)&&nr(J,U))||U===void 0&&!(x in w))&&Kr(w,x,U)}function Qn(w,x){for(var U=w.length;U--;)if(nr(w[U][0],x))return U;return-1}function Kr(w,x,U){x=="__proto__"&&Qt?Qt(w,x,{configurable:!0,enumerable:!0,value:U,writable:!0}):w[x]=U}var Tl=Ul();function er(w){return w==null?w===void 0?q:N:at&&at in Object(w)?Wl(w):Vl(w)}function Io(w){return mn(w)&&er(w)==l}function Ol(w){if(!Pt(w)||Gl(w))return!1;var x=ei(w)?qn:z;return x.test(Jl(w))}function xl(w){return mn(w)&&Co(w.length)&&!!H[er(w)]}function Nl(w){if(!Pt(w))return zl(w);var x=xo(w),U=[];for(var J in w)J=="constructor"&&(x||!xe.call(w,J))||U.push(J);return U}function To(w,x,U,J,ae){w!==x&&Tl(x,function(ce,pe){if(ae||(ae=new Qe),Pt(ce))Cl(w,x,pe,U,To,J,ae);else{var ue=J?J(Zr(w,pe),ce,pe+"",w,x,ae):void 0;ue===void 0&&(ue=ce),Vr(w,pe,ue)}},Po)}function Cl(w,x,U,J,ae,ce,pe){var ue=Zr(w,U),we=Zr(x,U),Ze=pe.get(we);if(Ze){Vr(w,U,Ze);return}var je=ce?ce(ue,we,U+"",w,x,pe):void 0,En=je===void 0;if(En){var ti=Xr(we),ni=!ti&&No(we),Bo=!ti&&!ni&&Lo(we);je=we,ti||ni||Bo?Xr(ue)?je=ue:Xl(ue)?je=$l(ue):ni?(En=!1,je=Ml(we)):Bo?(En=!1,je=Dl(we)):je=[]:Ql(we)||Jr(we)?(je=ue,Jr(ue)?je=eu(ue):(!Pt(ue)||ei(ue))&&(je=Fl(we))):En=!1}En&&(pe.set(we,je),ae(je,we,J,ce,pe),pe.delete(we)),Vr(w,U,je)}function Ll(w,x){return Yl(Kl(w,x,Mo),w+"")}var Pl=Qt?function(w,x){return Qt(w,"toString",{configurable:!0,enumerable:!1,value:nu(x),writable:!0})}:Mo;function Ml(w,x){return w.slice()}function Bl(w){var x=new w.constructor(w.byteLength);return new gn(x).set(new gn(w)),x}function Dl(w,x){var U=Bl(w.buffer);return new w.constructor(U,w.byteOffset,w.length)}function $l(w,x){var U=-1,J=w.length;for(x||(x=Array(J));++U<J;)x[U]=w[U];return x}function kl(w,x,U,J){var ae=!U;U||(U={});for(var ce=-1,pe=x.length;++ce<pe;){var ue=x[ce],we=void 0;we===void 0&&(we=w[ue]),ae?Kr(U,ue,we):Il(U,ue,we)}return U}function jl(w){return Ll(function(x,U){var J=-1,ae=U.length,ce=ae>1?U[ae-1]:void 0,pe=ae>2?U[2]:void 0;for(ce=w.length>3&&typeof ce=="function"?(ae--,ce):void 0,pe&&ql(U[0],U[1],pe)&&(ce=ae<3?void 0:ce,ae=1),x=Object(x);++J<ae;){var ue=U[J];ue&&w(x,ue,J,ce)}return x})}function Ul(w){return function(x,U,J){for(var ae=-1,ce=Object(x),pe=J(x),ue=pe.length;ue--;){var we=pe[++ae];if(U(ce[we],we,ce)===!1)break}return x}}function tr(w,x){var U=w.__data__;return Hl(x)?U[typeof x=="string"?"string":"hash"]:U.map}function Yr(w,x){var U=Y(w,x);return Ol(U)?U:void 0}function Wl(w){var x=xe.call(w,at),U=w[at];try{w[at]=void 0;var J=!0}catch{}var ae=Fn.call(w);return J&&(x?w[at]=U:delete w[at]),ae}function Fl(w){return typeof w.constructor=="function"&&!xo(w)?wn(Ct(w)):{}}function Oo(w,x){var U=typeof w;return x=x??a,!!x&&(U=="number"||U!="symbol"&&X.test(w))&&w>-1&&w%1==0&&w<x}function ql(w,x,U){if(!Pt(U))return!1;var J=typeof x;return(J=="number"?Qr(U)&&Oo(x,U.length):J=="string"&&x in U)?nr(U[x],w):!1}function Hl(w){var x=typeof w;return x=="string"||x=="number"||x=="symbol"||x=="boolean"?w!=="__proto__":w===null}function Gl(w){return!!Jt&&Jt in w}function xo(w){var x=w&&w.constructor,U=typeof x=="function"&&x.prototype||le;return w===U}function zl(w){var x=[];if(w!=null)for(var U in Object(w))x.push(U);return x}function Vl(w){return Fn.call(w)}function Kl(w,x,U){return x=pn(x===void 0?w.length-1:x,0),function(){for(var J=arguments,ae=-1,ce=pn(J.length-x,0),pe=Array(ce);++ae<ce;)pe[ae]=J[x+ae];ae=-1;for(var ue=Array(x+1);++ae<x;)ue[ae]=J[ae];return ue[x]=U(pe),O(w,this,ue)}}function Zr(w,x){if(!(x==="constructor"&&typeof w[x]=="function")&&x!="__proto__")return w[x]}var Yl=Zl(Pl);function Zl(w){var x=0,U=0;return function(){var J=zn(),ae=o-(J-U);if(U=J,ae>0){if(++x>=i)return arguments[0]}else x=0;return w.apply(void 0,arguments)}}function Jl(w){if(w!=null){try{return re.call(w)}catch{}try{return w+""}catch{}}return""}function nr(w,x){return w===x||w!==w&&x!==x}var Jr=Io(function(){return arguments}())?Io:function(w){return mn(w)&&xe.call(w,"callee")&&!qr.call(w,"callee")},Xr=Array.isArray;function Qr(w){return w!=null&&Co(w.length)&&!ei(w)}function Xl(w){return mn(w)&&Qr(w)}var No=Hr||ru;function ei(w){if(!Pt(w))return!1;var x=er(w);return x==B||x==W||x==f||x==M}function Co(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=a}function Pt(w){var x=typeof w;return w!=null&&(x=="object"||x=="function")}function mn(w){return w!=null&&typeof w=="object"}function Ql(w){if(!mn(w)||er(w)!=I)return!1;var x=Ct(w);if(x===null)return!0;var U=xe.call(x,"constructor")&&x.constructor;return typeof U=="function"&&U instanceof U&&re.call(U)==Fr}var Lo=me?F(me):xl;function eu(w){return kl(w,Po(w))}function Po(w){return Qr(w)?Rl(w):Nl(w)}var tu=jl(function(w,x,U){To(w,x,U)});function nu(w){return function(){return w}}function Mo(w){return w}function ru(){return!1}e.exports=tu})(Sr,Sr.exports);Sr.exports;var il={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(tn,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},a=null;function l(m,T){var N=m[T];if(typeof N.bind=="function")return N.bind(m);try{return Function.prototype.bind.call(N,m)}catch{return function(){return Function.prototype.apply.apply(N,[m,arguments])}}}function h(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?h:console[m]!==void 0?l(console,m):console.log!==void 0?l(console,"log"):t}function S(){for(var m=this.getLevel(),T=0;T<i.length;T++){var N=i[T];this[N]=T<m?t:this.methodFactory(N,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function A(m){return function(){typeof console!==n&&(S.call(this),this[m].apply(this,arguments))}}function D(m,T,N){return f(m)||A.apply(this,arguments)}function B(m,T){var N=this,I,M,j,P="loglevel";typeof m=="string"?P+=":"+m:typeof m=="symbol"&&(P=void 0);function $(E){var _=(i[E]||"silent").toUpperCase();if(!(typeof window===n||!P)){try{window.localStorage[P]=_;return}catch{}try{window.document.cookie=encodeURIComponent(P)+"="+_+";"}catch{}}}function q(){var E;if(!(typeof window===n||!P)){try{E=window.localStorage[P]}catch{}if(typeof E===n)try{var _=window.document.cookie,p=encodeURIComponent(P),C=_.indexOf(p+"=");C!==-1&&(E=/^([^;]+)/.exec(_.slice(C+p.length+1))[1])}catch{}return N.levels[E]===void 0&&(E=void 0),E}}function s(){if(!(typeof window===n||!P)){try{window.localStorage.removeItem(P)}catch{}try{window.document.cookie=encodeURIComponent(P)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function u(E){var _=E;if(typeof _=="string"&&N.levels[_.toUpperCase()]!==void 0&&(_=N.levels[_.toUpperCase()]),typeof _=="number"&&_>=0&&_<=N.levels.SILENT)return _;throw new TypeError("log.setLevel() called with invalid level: "+E)}N.name=m,N.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},N.methodFactory=T||D,N.getLevel=function(){return j??M??I},N.setLevel=function(E,_){return j=u(E),_!==!1&&$(j),S.call(N)},N.setDefaultLevel=function(E){M=u(E),q()||N.setLevel(E,!1)},N.resetLevel=function(){j=null,s(),S.call(N)},N.enableAll=function(E){N.setLevel(N.levels.TRACE,E)},N.disableAll=function(E){N.setLevel(N.levels.SILENT,E)},N.rebuild=function(){if(a!==N&&(I=u(a.getLevel())),S.call(N),a===N)for(var E in o)o[E].rebuild()},I=u(a?a.getLevel():"WARN");var d=q();d!=null&&(j=u(d)),S.call(N)}a=new B,a.getLogger=function(T){if(typeof T!="symbol"&&typeof T!="string"||T==="")throw new TypeError("You must supply a name when creating a logger.");var N=o[T];return N||(N=o[T]=new B(T,a.methodFactory)),N};var W=typeof window!==n?window.log:void 0;return a.noConflict=function(){return typeof window!==n&&window.log===a&&(window.log=W),a},a.getLoggers=function(){return o},a.default=a,a})})(il);var ol=il.exports;const vr=cn(ol),Hd=vr.getLogger("http-helpers");Hd.setLevel(ol.levels.INFO);function Fs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Gd(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function $r(e,...t){if(!Gd(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function zd(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Fs(e.outputLen),Fs(e.blockLen)}function Ar(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Vd(e,t){$r(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const Ii=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ti=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),et=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Kd(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function go(e){return typeof e=="string"&&(e=Kd(e)),$r(e),e}function Yd(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];$r(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}class sl{clone(){return this._cloneInto()}}function Zd(e){const t=r=>e().update(go(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Jd(e=32){if(Ii&&typeof Ii.getRandomValues=="function")return Ii.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function Xd(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),l=Number(n&o),h=r?4:0,f=r?0:4;e.setUint32(t+h,a,r),e.setUint32(t+f,l,r)}const Qd=(e,t,n)=>e&t^~e&n,eh=(e,t,n)=>e&t^e&n^t&n;class th extends sl{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ti(this.buffer)}update(t){Ar(this);const{view:n,buffer:r,blockLen:i}=this;t=go(t);const o=t.length;for(let a=0;a<o;){const l=Math.min(i-this.pos,o-a);if(l===i){const h=Ti(t);for(;i<=o-a;a+=i)this.process(h,a);continue}r.set(t.subarray(a,a+l),this.pos),this.pos+=l,a+=l,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ar(this),Vd(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:o}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>i-a&&(this.process(r,0),a=0);for(let A=a;A<i;A++)n[A]=0;Xd(r,i-8,BigInt(this.length*8),o),this.process(r,0);const l=Ti(t),h=this.outputLen;if(h%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=h/4,S=this.get();if(f>S.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<f;A++)l.setUint32(4*A,S[A],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:o,destroyed:a,pos:l}=this;return t.length=i,t.pos=l,t.finished=o,t.destroyed=a,i%n&&t.buffer.set(r),t}}const nh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),At=new Uint32Array(64);class rh extends th{constructor(){super(64,32,8,!1),this.A=vt[0]|0,this.B=vt[1]|0,this.C=vt[2]|0,this.D=vt[3]|0,this.E=vt[4]|0,this.F=vt[5]|0,this.G=vt[6]|0,this.H=vt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:o,F:a,G:l,H:h}=this;return[t,n,r,i,o,a,l,h]}set(t,n,r,i,o,a,l,h){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=o|0,this.F=a|0,this.G=l|0,this.H=h|0}process(t,n){for(let A=0;A<16;A++,n+=4)At[A]=t.getUint32(n,!1);for(let A=16;A<64;A++){const D=At[A-15],B=At[A-2],W=et(D,7)^et(D,18)^D>>>3,m=et(B,17)^et(B,19)^B>>>10;At[A]=m+At[A-7]+W+At[A-16]|0}let{A:r,B:i,C:o,D:a,E:l,F:h,G:f,H:S}=this;for(let A=0;A<64;A++){const D=et(l,6)^et(l,11)^et(l,25),B=S+D+Qd(l,h,f)+nh[A]+At[A]|0,m=(et(r,2)^et(r,13)^et(r,22))+eh(r,i,o)|0;S=f,f=h,h=l,l=a+B|0,a=o,o=i,i=r,r=B+m|0}r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,a=a+this.D|0,l=l+this.E|0,h=h+this.F|0,f=f+this.G|0,S=S+this.H|0,this.set(r,i,o,a,l,h,f,S)}roundClean(){At.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ih=Zd(()=>new rh);class al extends sl{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,zd(t);const r=go(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?t.create().update(r).digest():r);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return Ar(this),this.iHash.update(t),this}digestInto(t){Ar(this),$r(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:o,blockLen:a,outputLen:l}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=a,t.outputLen=l,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ll=(e,t,n)=>new al(e,t).update(n).digest();ll.create=(e,t)=>new al(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oh=BigInt(1),sh=BigInt(2);function Ht(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function jn(e){if(!Ht(e))throw new Error("Uint8Array expected")}const ah=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function un(e){jn(e);let t="";for(let n=0;n<e.length;n++)t+=ah[e[n]];return t}function po(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const ct={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function qs(e){if(e>=ct._0&&e<=ct._9)return e-ct._0;if(e>=ct._A&&e<=ct._F)return e-(ct._A-10);if(e>=ct._a&&e<=ct._f)return e-(ct._a-10)}function Pn(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const a=qs(e.charCodeAt(o)),l=qs(e.charCodeAt(o+1));if(a===void 0||l===void 0){const h=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+h+'" at index '+o)}r[i]=a*16+l}return r}function Ft(e){return po(un(e))}function wo(e){return jn(e),po(un(Uint8Array.from(e).reverse()))}function fn(e,t){return Pn(e.toString(16).padStart(t*2,"0"))}function bo(e,t){return fn(e,t).reverse()}function Xe(e,t,n){let r;if(typeof t=="string")try{r=Pn(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(Ht(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function Mn(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];jn(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const o=e[r];n.set(o,i),i+=o.length}return n}const yo=e=>(sh<<BigInt(e-1))-oh,Oi=e=>new Uint8Array(e),Hs=e=>Uint8Array.from(e);function ul(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Oi(e),i=Oi(e),o=0;const a=()=>{r.fill(1),i.fill(0),o=0},l=(...A)=>n(i,r,...A),h=(A=Oi())=>{i=l(Hs([0]),A),r=l(),A.length!==0&&(i=l(Hs([1]),A),r=l())},f=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let A=0;const D=[];for(;A<t;){r=l();const B=r.slice();D.push(B),A+=r.length}return Mn(...D)};return(A,D)=>{a(),h(A);let B;for(;!(B=D(f()));)h();return a(),B}}const lh={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Ht(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Un(e,t,n={}){const r=(i,o,a)=>{const l=lh[o];if(typeof l!="function")throw new Error(`Invalid validator "${o}", expected function`);const h=e[i];if(!(a&&h===void 0)&&!l(h,e))throw new Error(`Invalid param ${String(i)}=${h} (${typeof h}), expected ${o}`)};for(const[i,o]of Object.entries(t))r(i,o,!1);for(const[i,o]of Object.entries(n))r(i,o,!0);return e}const uh=Object.freeze(Object.defineProperty({__proto__:null,abytes:jn,bitMask:yo,bytesToHex:un,bytesToNumberBE:Ft,bytesToNumberLE:wo,concatBytes:Mn,createHmacDrbg:ul,ensureBytes:Xe,hexToBytes:Pn,hexToNumber:po,isBytes:Ht,numberToBytesBE:fn,numberToBytesLE:bo,validateObject:Un},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oe=BigInt(0),Se=BigInt(1),$t=BigInt(2),fh=BigInt(3),Vi=BigInt(4),Gs=BigInt(5),zs=BigInt(8);BigInt(9);BigInt(16);function De(e,t){const n=e%t;return n>=Oe?n:t+n}function ch(e,t,n){if(n<=Oe||t<Oe)throw new Error("Expected power/modulo > 0");if(n===Se)return Oe;let r=Se;for(;t>Oe;)t&Se&&(r=r*e%n),e=e*e%n,t>>=Se;return r}function We(e,t,n){let r=e;for(;t-- >Oe;)r*=r,r%=n;return r}function Ki(e,t){if(e===Oe||t<=Oe)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=De(e,t),r=t,i=Oe,o=Se;for(;n!==Oe;){const l=r/n,h=r%n,f=i-o*l;r=n,n=h,i=o,o=f}if(r!==Se)throw new Error("invert: does not exist");return De(i,t)}function dh(e){const t=(e-Se)/$t;let n,r,i;for(n=e-Se,r=0;n%$t===Oe;n/=$t,r++);for(i=$t;i<e&&ch(i,t,e)!==e-Se;i++);if(r===1){const a=(e+Se)/Vi;return function(h,f){const S=h.pow(f,a);if(!h.eql(h.sqr(S),f))throw new Error("Cannot find square root");return S}}const o=(n+Se)/$t;return function(l,h){if(l.pow(h,t)===l.neg(l.ONE))throw new Error("Cannot find square root");let f=r,S=l.pow(l.mul(l.ONE,i),n),A=l.pow(h,o),D=l.pow(h,n);for(;!l.eql(D,l.ONE);){if(l.eql(D,l.ZERO))return l.ZERO;let B=1;for(let m=l.sqr(D);B<f&&!l.eql(m,l.ONE);B++)m=l.sqr(m);const W=l.pow(S,Se<<BigInt(f-B-1));S=l.sqr(W),A=l.mul(A,W),D=l.mul(D,S),f=B}return A}}function hh(e){if(e%Vi===fh){const t=(e+Se)/Vi;return function(r,i){const o=r.pow(i,t);if(!r.eql(r.sqr(o),i))throw new Error("Cannot find square root");return o}}if(e%zs===Gs){const t=(e-Gs)/zs;return function(r,i){const o=r.mul(i,$t),a=r.pow(o,t),l=r.mul(i,a),h=r.mul(r.mul(l,$t),a),f=r.mul(l,r.sub(h,r.ONE));if(!r.eql(r.sqr(f),i))throw new Error("Cannot find square root");return f}}return dh(e)}const gh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ph(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=gh.reduce((r,i)=>(r[i]="function",r),t);return Un(e,n)}function wh(e,t,n){if(n<Oe)throw new Error("Expected power > 0");if(n===Oe)return e.ONE;if(n===Se)return t;let r=e.ONE,i=t;for(;n>Oe;)n&Se&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Se;return r}function bh(e,t){const n=new Array(t.length),r=t.reduce((o,a,l)=>e.is0(a)?o:(n[l]=o,e.mul(o,a)),e.ONE),i=e.inv(r);return t.reduceRight((o,a,l)=>e.is0(a)?o:(n[l]=e.mul(o,n[l]),e.mul(o,a)),i),n}function fl(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function yh(e,t,n=!1,r={}){if(e<=Oe)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=fl(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=hh(e),l=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:yo(i),ZERO:Oe,ONE:Se,create:h=>De(h,e),isValid:h=>{if(typeof h!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof h}`);return Oe<=h&&h<e},is0:h=>h===Oe,isOdd:h=>(h&Se)===Se,neg:h=>De(-h,e),eql:(h,f)=>h===f,sqr:h=>De(h*h,e),add:(h,f)=>De(h+f,e),sub:(h,f)=>De(h-f,e),mul:(h,f)=>De(h*f,e),pow:(h,f)=>wh(l,h,f),div:(h,f)=>De(h*Ki(f,e),e),sqrN:h=>h*h,addN:(h,f)=>h+f,subN:(h,f)=>h-f,mulN:(h,f)=>h*f,inv:h=>Ki(h,e),sqrt:r.sqrt||(h=>a(l,h)),invertBatch:h=>bh(l,h),cmov:(h,f,S)=>S?f:h,toBytes:h=>n?bo(h,o):fn(h,o),fromBytes:h=>{if(h.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${h.length}`);return n?wo(h):Ft(h)}});return Object.freeze(l)}function cl(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function dl(e){const t=cl(e);return t+Math.ceil(t/2)}function _h(e,t,n=!1){const r=e.length,i=cl(t),o=dl(t);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const a=n?Ft(e):wo(e),l=De(a,t-Se)+Se;return n?bo(l,i):fn(l,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mh=BigInt(0),xi=BigInt(1);function Eh(e,t){const n=(i,o)=>{const a=o.negate();return i?a:o},r=i=>{const o=Math.ceil(t/i)+1,a=2**(i-1);return{windows:o,windowSize:a}};return{constTimeNegate:n,unsafeLadder(i,o){let a=e.ZERO,l=i;for(;o>mh;)o&xi&&(a=a.add(l)),l=l.double(),o>>=xi;return a},precomputeWindow(i,o){const{windows:a,windowSize:l}=r(o),h=[];let f=i,S=f;for(let A=0;A<a;A++){S=f,h.push(S);for(let D=1;D<l;D++)S=S.add(f),h.push(S);f=S.double()}return h},wNAF(i,o,a){const{windows:l,windowSize:h}=r(i);let f=e.ZERO,S=e.BASE;const A=BigInt(2**i-1),D=2**i,B=BigInt(i);for(let W=0;W<l;W++){const m=W*h;let T=Number(a&A);a>>=B,T>h&&(T-=D,a+=xi);const N=m,I=m+Math.abs(T)-1,M=W%2!==0,j=T<0;T===0?S=S.add(n(M,o[N])):f=f.add(n(j,o[I]))}return{p:f,f:S}},wNAFCached(i,o,a,l){const h=i._WINDOW_SIZE||1;let f=o.get(i);return f||(f=this.precomputeWindow(i,h),h!==1&&o.set(i,l(f))),this.wNAF(h,f,a)}}}function hl(e){return ph(e.Fp),Un(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...fl(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Sh(e){const t=hl(e);Un(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:vh,hexToBytes:Ah}=uh,Ut={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){const{Err:t}=Ut;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:vh(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Ut,n=typeof e=="string"?Ah(e):e;jn(n);let r=n.length;if(r<2||n[0]!=48)throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=Ut._parseInt(n.subarray(2)),{d:a,l}=Ut._parseInt(o);if(l.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){const t=f=>Number.parseInt(f[0],16)&8?"00"+f:f,n=f=>{const S=f.toString(16);return S.length&1?`0${S}`:S},r=t(n(e.s)),i=t(n(e.r)),o=r.length/2,a=i.length/2,l=n(o),h=n(a);return`30${n(a+o+4)}02${h}${i}02${l}${r}`}},ht=BigInt(0),Ge=BigInt(1);BigInt(2);const Vs=BigInt(3);BigInt(4);function Rh(e){const t=Sh(e),{Fp:n}=t,r=t.toBytes||((W,m,T)=>{const N=m.toAffine();return Mn(Uint8Array.from([4]),n.toBytes(N.x),n.toBytes(N.y))}),i=t.fromBytes||(W=>{const m=W.subarray(1),T=n.fromBytes(m.subarray(0,n.BYTES)),N=n.fromBytes(m.subarray(n.BYTES,2*n.BYTES));return{x:T,y:N}});function o(W){const{a:m,b:T}=t,N=n.sqr(W),I=n.mul(N,W);return n.add(n.add(I,n.mul(W,m)),T)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(W){return typeof W=="bigint"&&ht<W&&W<t.n}function l(W){if(!a(W))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function h(W){const{allowedPrivateKeyLengths:m,nByteLength:T,wrapPrivateKey:N,n:I}=t;if(m&&typeof W!="bigint"){if(Ht(W)&&(W=un(W)),typeof W!="string"||!m.includes(W.length))throw new Error("Invalid key");W=W.padStart(T*2,"0")}let M;try{M=typeof W=="bigint"?W:Ft(Xe("private key",W,T))}catch{throw new Error(`private key must be ${T} bytes, hex or bigint, not ${typeof W}`)}return N&&(M=De(M,I)),l(M),M}const f=new Map;function S(W){if(!(W instanceof A))throw new Error("ProjectivePoint expected")}class A{constructor(m,T,N){if(this.px=m,this.py=T,this.pz=N,m==null||!n.isValid(m))throw new Error("x required");if(T==null||!n.isValid(T))throw new Error("y required");if(N==null||!n.isValid(N))throw new Error("z required")}static fromAffine(m){const{x:T,y:N}=m||{};if(!m||!n.isValid(T)||!n.isValid(N))throw new Error("invalid affine point");if(m instanceof A)throw new Error("projective point not allowed");const I=M=>n.eql(M,n.ZERO);return I(T)&&I(N)?A.ZERO:new A(T,N,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const T=n.invertBatch(m.map(N=>N.pz));return m.map((N,I)=>N.toAffine(T[I])).map(A.fromAffine)}static fromHex(m){const T=A.fromAffine(i(Xe("pointHex",m)));return T.assertValidity(),T}static fromPrivateKey(m){return A.BASE.multiply(h(m))}_setWindowSize(m){this._WINDOW_SIZE=m,f.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:T}=this.toAffine();if(!n.isValid(m)||!n.isValid(T))throw new Error("bad point: x or y not FE");const N=n.sqr(T),I=o(m);if(!n.eql(N,I))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(n.isOdd)return!n.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){S(m);const{px:T,py:N,pz:I}=this,{px:M,py:j,pz:P}=m,$=n.eql(n.mul(T,P),n.mul(M,I)),q=n.eql(n.mul(N,P),n.mul(j,I));return $&&q}negate(){return new A(this.px,n.neg(this.py),this.pz)}double(){const{a:m,b:T}=t,N=n.mul(T,Vs),{px:I,py:M,pz:j}=this;let P=n.ZERO,$=n.ZERO,q=n.ZERO,s=n.mul(I,I),u=n.mul(M,M),d=n.mul(j,j),E=n.mul(I,M);return E=n.add(E,E),q=n.mul(I,j),q=n.add(q,q),P=n.mul(m,q),$=n.mul(N,d),$=n.add(P,$),P=n.sub(u,$),$=n.add(u,$),$=n.mul(P,$),P=n.mul(E,P),q=n.mul(N,q),d=n.mul(m,d),E=n.sub(s,d),E=n.mul(m,E),E=n.add(E,q),q=n.add(s,s),s=n.add(q,s),s=n.add(s,d),s=n.mul(s,E),$=n.add($,s),d=n.mul(M,j),d=n.add(d,d),s=n.mul(d,E),P=n.sub(P,s),q=n.mul(d,u),q=n.add(q,q),q=n.add(q,q),new A(P,$,q)}add(m){S(m);const{px:T,py:N,pz:I}=this,{px:M,py:j,pz:P}=m;let $=n.ZERO,q=n.ZERO,s=n.ZERO;const u=t.a,d=n.mul(t.b,Vs);let E=n.mul(T,M),_=n.mul(N,j),p=n.mul(I,P),C=n.add(T,N),c=n.add(M,j);C=n.mul(C,c),c=n.add(E,_),C=n.sub(C,c),c=n.add(T,I);let b=n.add(M,P);return c=n.mul(c,b),b=n.add(E,p),c=n.sub(c,b),b=n.add(N,I),$=n.add(j,P),b=n.mul(b,$),$=n.add(_,p),b=n.sub(b,$),s=n.mul(u,c),$=n.mul(d,p),s=n.add($,s),$=n.sub(_,s),s=n.add(_,s),q=n.mul($,s),_=n.add(E,E),_=n.add(_,E),p=n.mul(u,p),c=n.mul(d,c),_=n.add(_,p),p=n.sub(E,p),p=n.mul(u,p),c=n.add(c,p),E=n.mul(_,c),q=n.add(q,E),E=n.mul(b,c),$=n.mul(C,$),$=n.sub($,E),E=n.mul(C,_),s=n.mul(b,s),s=n.add(s,E),new A($,q,s)}subtract(m){return this.add(m.negate())}is0(){return this.equals(A.ZERO)}wNAF(m){return B.wNAFCached(this,f,m,T=>{const N=n.invertBatch(T.map(I=>I.pz));return T.map((I,M)=>I.toAffine(N[M])).map(A.fromAffine)})}multiplyUnsafe(m){const T=A.ZERO;if(m===ht)return T;if(l(m),m===Ge)return this;const{endo:N}=t;if(!N)return B.unsafeLadder(this,m);let{k1neg:I,k1:M,k2neg:j,k2:P}=N.splitScalar(m),$=T,q=T,s=this;for(;M>ht||P>ht;)M&Ge&&($=$.add(s)),P&Ge&&(q=q.add(s)),s=s.double(),M>>=Ge,P>>=Ge;return I&&($=$.negate()),j&&(q=q.negate()),q=new A(n.mul(q.px,N.beta),q.py,q.pz),$.add(q)}multiply(m){l(m);let T=m,N,I;const{endo:M}=t;if(M){const{k1neg:j,k1:P,k2neg:$,k2:q}=M.splitScalar(T);let{p:s,f:u}=this.wNAF(P),{p:d,f:E}=this.wNAF(q);s=B.constTimeNegate(j,s),d=B.constTimeNegate($,d),d=new A(n.mul(d.px,M.beta),d.py,d.pz),N=s.add(d),I=u.add(E)}else{const{p:j,f:P}=this.wNAF(T);N=j,I=P}return A.normalizeZ([N,I])[0]}multiplyAndAddUnsafe(m,T,N){const I=A.BASE,M=(P,$)=>$===ht||$===Ge||!P.equals(I)?P.multiplyUnsafe($):P.multiply($),j=M(this,T).add(M(m,N));return j.is0()?void 0:j}toAffine(m){const{px:T,py:N,pz:I}=this,M=this.is0();m==null&&(m=M?n.ONE:n.inv(I));const j=n.mul(T,m),P=n.mul(N,m),$=n.mul(I,m);if(M)return{x:n.ZERO,y:n.ZERO};if(!n.eql($,n.ONE))throw new Error("invZ was invalid");return{x:j,y:P}}isTorsionFree(){const{h:m,isTorsionFree:T}=t;if(m===Ge)return!0;if(T)return T(A,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:T}=t;return m===Ge?this:T?T(A,this):this.multiplyUnsafe(t.h)}toRawBytes(m=!0){return this.assertValidity(),r(A,this,m)}toHex(m=!0){return un(this.toRawBytes(m))}}A.BASE=new A(t.Gx,t.Gy,n.ONE),A.ZERO=new A(n.ZERO,n.ONE,n.ZERO);const D=t.nBitLength,B=Eh(A,t.endo?Math.ceil(D/2):D);return{CURVE:t,ProjectivePoint:A,normPrivateKeyToScalar:h,weierstrassEquation:o,isWithinCurveOrder:a}}function Ih(e){const t=hl(e);return Un(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Th(e){const t=Ih(e),{Fp:n,n:r}=t,i=n.BYTES+1,o=2*n.BYTES+1;function a(c){return ht<c&&c<n.ORDER}function l(c){return De(c,r)}function h(c){return Ki(c,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:S,weierstrassEquation:A,isWithinCurveOrder:D}=Rh({...t,toBytes(c,b,v){const R=b.toAffine(),k=n.toBytes(R.x),G=Mn;return v?G(Uint8Array.from([b.hasEvenY()?2:3]),k):G(Uint8Array.from([4]),k,n.toBytes(R.y))},fromBytes(c){const b=c.length,v=c[0],R=c.subarray(1);if(b===i&&(v===2||v===3)){const k=Ft(R);if(!a(k))throw new Error("Point is not on curve");const G=A(k);let z;try{z=n.sqrt(G)}catch(ne){const te=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+te)}const X=(z&Ge)===Ge;return(v&1)===1!==X&&(z=n.neg(z)),{x:k,y:z}}else if(b===o&&v===4){const k=n.fromBytes(R.subarray(0,n.BYTES)),G=n.fromBytes(R.subarray(n.BYTES,2*n.BYTES));return{x:k,y:G}}else throw new Error(`Point of length ${b} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),B=c=>un(fn(c,t.nByteLength));function W(c){const b=r>>Ge;return c>b}function m(c){return W(c)?l(-c):c}const T=(c,b,v)=>Ft(c.slice(b,v));class N{constructor(b,v,R){this.r=b,this.s=v,this.recovery=R,this.assertValidity()}static fromCompact(b){const v=t.nByteLength;return b=Xe("compactSignature",b,v*2),new N(T(b,0,v),T(b,v,2*v))}static fromDER(b){const{r:v,s:R}=Ut.toSig(Xe("DER",b));return new N(v,R)}assertValidity(){if(!D(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!D(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(b){return new N(this.r,this.s,b)}recoverPublicKey(b){const{r:v,s:R,recovery:k}=this,G=q(Xe("msgHash",b));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const z=k===2||k===3?v+t.n:v;if(z>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const X=k&1?"03":"02",H=f.fromHex(X+B(z)),ne=h(z),te=l(-G*ne),ie=l(R*ne),se=f.BASE.multiplyAndAddUnsafe(H,te,ie);if(!se)throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return W(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return Pn(this.toDERHex())}toDERHex(){return Ut.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Pn(this.toCompactHex())}toCompactHex(){return B(this.r)+B(this.s)}}const I={isValidPrivateKey(c){try{return S(c),!0}catch{return!1}},normPrivateKeyToScalar:S,randomPrivateKey:()=>{const c=dl(t.n);return _h(t.randomBytes(c),t.n)},precompute(c=8,b=f.BASE){return b._setWindowSize(c),b.multiply(BigInt(3)),b}};function M(c,b=!0){return f.fromPrivateKey(c).toRawBytes(b)}function j(c){const b=Ht(c),v=typeof c=="string",R=(b||v)&&c.length;return b?R===i||R===o:v?R===2*i||R===2*o:c instanceof f}function P(c,b,v=!0){if(j(c))throw new Error("first arg must be private key");if(!j(b))throw new Error("second arg must be public key");return f.fromHex(b).multiply(S(c)).toRawBytes(v)}const $=t.bits2int||function(c){const b=Ft(c),v=c.length*8-t.nBitLength;return v>0?b>>BigInt(v):b},q=t.bits2int_modN||function(c){return l($(c))},s=yo(t.nBitLength);function u(c){if(typeof c!="bigint")throw new Error("bigint expected");if(!(ht<=c&&c<s))throw new Error(`bigint expected < 2^${t.nBitLength}`);return fn(c,t.nByteLength)}function d(c,b,v=E){if(["recovered","canonical"].some(Ae=>Ae in v))throw new Error("sign() legacy options not supported");const{hash:R,randomBytes:k}=t;let{lowS:G,prehash:z,extraEntropy:X}=v;G==null&&(G=!0),c=Xe("msgHash",c),z&&(c=Xe("prehashed msgHash",R(c)));const H=q(c),ne=S(b),te=[u(ne),u(H)];if(X!=null&&X!==!1){const Ae=X===!0?k(n.BYTES):X;te.push(Xe("extraEntropy",Ae))}const ie=Mn(...te),se=H;function Ee(Ae){const Re=$(Ae);if(!D(Re))return;const _e=h(Re),me=f.BASE.multiply(Re).toAffine(),O=l(me.x);if(O===ht)return;const L=l(_e*l(se+O*ne));if(L===ht)return;let F=(me.x===O?0:2)|Number(me.y&Ge),Y=L;return G&&W(L)&&(Y=m(L),F^=1),new N(O,Y,F)}return{seed:ie,k2sig:Ee}}const E={lowS:t.lowS,prehash:!1},_={lowS:t.lowS,prehash:!1};function p(c,b,v=E){const{seed:R,k2sig:k}=d(c,b,v),G=t;return ul(G.hash.outputLen,G.nByteLength,G.hmac)(R,k)}f.BASE._setWindowSize(8);function C(c,b,v,R=_){var me;const k=c;if(b=Xe("msgHash",b),v=Xe("publicKey",v),"strict"in R)throw new Error("options.strict was renamed to lowS");const{lowS:G,prehash:z}=R;let X,H;try{if(typeof k=="string"||Ht(k))try{X=N.fromDER(k)}catch(O){if(!(O instanceof Ut.Err))throw O;X=N.fromCompact(k)}else if(typeof k=="object"&&typeof k.r=="bigint"&&typeof k.s=="bigint"){const{r:O,s:L}=k;X=new N(O,L)}else throw new Error("PARSE");H=f.fromHex(v)}catch(O){if(O.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(G&&X.hasHighS())return!1;z&&(b=t.hash(b));const{r:ne,s:te}=X,ie=q(b),se=h(te),Ee=l(ie*se),Ae=l(ne*se),Re=(me=f.BASE.multiplyAndAddUnsafe(H,Ee,Ae))==null?void 0:me.toAffine();return Re?l(Re.x)===ne:!1}return{CURVE:t,getPublicKey:M,getSharedSecret:P,sign:p,verify:C,ProjectivePoint:f,Signature:N,utils:I}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Oh(e){return{hash:e,hmac:(t,...n)=>ll(e,t,Yd(...n)),randomBytes:Jd}}function xh(e,t){const n=r=>Th({...e,...Oh(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gl=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ks=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Nh=BigInt(1),Yi=BigInt(2),Ys=(e,t)=>(e+t/Yi)/t;function Ch(e){const t=gl,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),l=BigInt(44),h=BigInt(88),f=e*e*e%t,S=f*f*e%t,A=We(S,n,t)*S%t,D=We(A,n,t)*S%t,B=We(D,Yi,t)*f%t,W=We(B,i,t)*B%t,m=We(W,o,t)*W%t,T=We(m,l,t)*m%t,N=We(T,h,t)*T%t,I=We(N,l,t)*m%t,M=We(I,n,t)*S%t,j=We(M,a,t)*W%t,P=We(j,r,t)*f%t,$=We(P,Yi,t);if(!Zi.eql(Zi.sqr($),e))throw new Error("Cannot find square root");return $}const Zi=yh(gl,void 0,void 0,{sqrt:Ch}),_o=xh({a:BigInt(0),b:BigInt(7),Fp:Zi,n:Ks,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ks,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Nh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,a=BigInt("0x100000000000000000000000000000000"),l=Ys(o*e,t),h=Ys(-r*e,t);let f=De(e-l*n-h*i,t),S=De(-l*r-h*o,t);const A=f>a,D=S>a;if(A&&(f=t-f),D&&(S=t-S),f>a||S>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:A,k1:f,k2neg:D,k2:S}}}},ih);BigInt(0);_o.ProjectivePoint;function Lh(e){let t=e;if(typeof t!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof t}`);return t.length%2&&(t=`0${t}`),t}BigInt(0);const Ji={},Xi={};for(let e=0;e<16;e++){const t=e,n=e*16,r=e.toString(16).toLowerCase();Xi[r]=t,Xi[r.toUpperCase()]=t,Ji[r]=n,Ji[r.toUpperCase()]=n}function Ph(e){const t=e.length,n=new Uint8Array(t/2);for(let r=0;r<t;r+=2)n[r/2]=Ji[e[r]]+Xi[e[r+1]];return n}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));for(let e=0;e<=256*256-1;e++)BigInt(e);const kr=e=>{if(typeof e!="string")throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);const t=e.slice(2);return Ph(t.length%2===0?t:Lh(t))},Mh=e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`},Wn=e=>{const t=Mh(e);return kr(t)};BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");_o.CURVE.n;_o.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const Bh="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";kr(Bh);const Dh="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";kr(Dh);const $h="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";kr($h);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));var Zs;(function(e){e.String="string",e.Bytes="view",e.Number="number"})(Zs||(Zs={}));var Js;(function(e){e.String="string",e.Bytes="view",e.JSON="json"})(Js||(Js={}));var Xs;(function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"})(Xs||(Xs={}));var Qs;(function(e){e[e.Deposit=0]="Deposit",e[e.Withdrawal=1]="Withdrawal",e[e.Consolidation=2]="Consolidation"})(Qs||(Qs={}));var Gt;(function(e){e[e.Version=0]="Version",e[e.Balance=1]="Balance",e[e.Nonce=2]="Nonce",e[e.CodeHash=3]="CodeHash",e[e.CodeSize=4]="CodeSize"})(Gt||(Gt={}));Wn(Gt.Version);Wn(Gt.Balance);Wn(Gt.Nonce);Wn(Gt.CodeHash);Wn(Gt.CodeSize);BigInt(256)**BigInt(31);var kh={exports:{}},mo={},Eo={};Object.defineProperty(Eo,"__esModule",{value:!0});function jh(e){var t=4,n=e.length,r=n%t;if(!r)return e;var i=n,o=t-r,a=n+o,l=Buffer.alloc(a);for(l.write(e);o--;)l.write("=",i++);return l.toString()}Eo.default=jh;Object.defineProperty(mo,"__esModule",{value:!0});var Uh=Eo;function pl(e,t){return t===void 0&&(t="utf8"),Buffer.isBuffer(e)?Qi(e.toString("base64")):Qi(Buffer.from(e,t).toString("base64"))}function Wh(e,t){return t===void 0&&(t="utf8"),Buffer.from(So(e),"base64").toString(t)}function So(e){return e=e.toString(),Uh.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function Qi(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Fh(e){return Buffer.from(So(e),"base64")}var hn=pl;hn.encode=pl;hn.decode=Wh;hn.toBase64=So;hn.fromBase64=Qi;hn.toBuffer=Fh;mo.default=hn;(function(e){e.exports=mo.default,e.exports.default=e.exports})(kh);const he={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},It={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";he.AQUA+"",It.SAPPHIRE_MAINNET,he.CELESTE+"",It.SAPPHIRE_MAINNET,he.CYAN+"",It.SAPPHIRE_MAINNET,he.MAINNET+"",It.SAPPHIRE_MAINNET,he.TESTNET+"",It.SAPPHIRE_DEVNET;he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";It.SAPPHIRE_MAINNET+"",It.SAPPHIRE_DEVNET+"",he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";he.MAINNET+"",he.TESTNET+"",he.CYAN+"",he.AQUA+"",he.CELESTE+"";function ea(e){let t=!1,n=0,r;try{r=window[e],t=!0,n=r.length;const i="__storage_test__";return r.setItem(i,i),r.removeItem(i),!0}catch(i){const o=i;return o&&(o.code===22||o.code===1014||o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&n!==0}}class qh{constructor(){ee(this,"store",new Map)}getItem(t){return this.store.get(t)||null}setItem(t,n){this.store.set(t,n)}removeItem(t){this.store.delete(t)}}class Hh{constructor(t,n){ee(this,"storage",void 0),ee(this,"_storeKey",void 0),this.storage=n,this._storeKey=t;try{n.getItem(t)||this.resetStore()}catch{}}static getInstance(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"local";if(!this.instanceMap.has(t)){let r;n==="local"&&ea("localStorage")?r=window.localStorage:n==="session"&&ea("sessionStorage")?r=window.sessionStorage:r=new qh,this.instanceMap.set(t,new this(t,r))}return this.instanceMap.get(t)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const t=this.getStore();return this.storage.removeItem(this._storeKey),t}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(t){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[t]}set(t,n){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[t]=n,this.storage.setItem(this._storeKey,JSON.stringify(r))}}ee(Hh,"instanceMap",new Map);ze(ze({},It),he);class Gh extends Error{}Gh.prototype.name="InvalidTokenError";const cr={IFRAME_STATUS:"iframe_status",CLOSE_WINDOW:"close_window",USER_LOGGED_IN:"user_logged_in",USER_LOGGED_OUT:"user_logged_out"},gt={LOGOUT:"logout",WALLET_INSTANCE_ID:"wallet_instance_id",USER_INFO:"user_info",SET_PROVIDER:"set_provider",TOPUP:"topup",IFRAME_STATUS:"iframe_status",CLOSED_WINDOW:"closed_window",WINDOW_BLOCKED:"window_blocked",GET_PROVIDER_STATE:"get_provider_state",LOGIN_WITH_PRIVATE_KEY:"login_with_private_key",SHOW_WALLET_CONNECT:"show_wallet_connect",SHOW_CHECKOUT:"show_checkout",SHOW_WALLET_UI:"show_wallet_ui",LOGIN_WITH_SESSION_ID:"login_with_session_id"},zh={GET_PROVIDER_STATE:"wallet_get_provider_state"},Ni={ACCOUNTS_CHANGED:"wallet_accounts_changed",CHAIN_CHANGED:"wallet_chain_changed",UNLOCK_STATE_CHANGED:"wallet_unlock_state_changed"};function Vh(e){return function(n,r,i){i(o=>{r.error&&vr.warn(`Error in RPC response:
`,r),!n.isTorusInternal&&(vr.info(`RPC (${e.origin}):`,n,"->",r),o())})}}var wt={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});Tt.EthereumProviderError=Tt.EthereumRpcError=void 0;const Kh=za;class wl extends Error{constructor(t,n,r){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=t,r!==void 0&&(this.data=r)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data),this.stack&&(t.stack=this.stack),t}toString(){return Kh.default(this.serialize(),Jh,2)}}Tt.EthereumRpcError=wl;class Yh extends wl{constructor(t,n,r){if(!Zh(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,n,r)}}Tt.EthereumProviderError=Yh;function Zh(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function Jh(e,t){if(t!=="[Circular]")return t}var vo={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.errorValues=Ot.errorCodes=void 0;Ot.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}};Ot.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=Ot,n=Tt,r=t.errorCodes.rpc.internal,i="Unspecified error message. This is a bug, please report it.",o={code:r,message:a(r)};e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function a(D,B=i){if(Number.isInteger(D)){const W=D.toString();if(A(t.errorValues,W))return t.errorValues[W].message;if(f(D))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return B}e.getMessageFromCode=a;function l(D){if(!Number.isInteger(D))return!1;const B=D.toString();return!!(t.errorValues[B]||f(D))}e.isValidCode=l;function h(D,{fallbackError:B=o,shouldIncludeStack:W=!1}={}){var m,T;if(!B||!Number.isInteger(B.code)||typeof B.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(D instanceof n.EthereumRpcError)return D.serialize();const N={};if(D&&typeof D=="object"&&!Array.isArray(D)&&A(D,"code")&&l(D.code)){const M=D;N.code=M.code,M.message&&typeof M.message=="string"?(N.message=M.message,A(M,"data")&&(N.data=M.data)):(N.message=a(N.code),N.data={originalError:S(D)})}else{N.code=B.code;const M=(m=D)===null||m===void 0?void 0:m.message;N.message=M&&typeof M=="string"?M:B.message,N.data={originalError:S(D)}}const I=(T=D)===null||T===void 0?void 0:T.stack;return W&&D&&I&&typeof I=="string"&&(N.stack=I),N}e.serializeError=h;function f(D){return D>=-32099&&D<=-32e3}function S(D){return D&&typeof D=="object"&&!Array.isArray(D)?Object.assign({},D):D}function A(D,B){return Object.prototype.hasOwnProperty.call(D,B)}})(vo);var jr={};Object.defineProperty(jr,"__esModule",{value:!0});jr.ethErrors=void 0;const Ao=Tt,bl=vo,Ce=Ot;jr.ethErrors={rpc:{parse:e=>Fe(Ce.errorCodes.rpc.parse,e),invalidRequest:e=>Fe(Ce.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Fe(Ce.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Fe(Ce.errorCodes.rpc.methodNotFound,e),internal:e=>Fe(Ce.errorCodes.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Fe(t,e)},invalidInput:e=>Fe(Ce.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Fe(Ce.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Fe(Ce.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Fe(Ce.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Fe(Ce.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Fe(Ce.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>An(Ce.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>An(Ce.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>An(Ce.errorCodes.provider.unsupportedMethod,e),disconnected:e=>An(Ce.errorCodes.provider.disconnected,e),chainDisconnected:e=>An(Ce.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:r}=e;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new Ao.EthereumProviderError(t,n,r)}}};function Fe(e,t){const[n,r]=yl(t);return new Ao.EthereumRpcError(e,n||bl.getMessageFromCode(e),r)}function An(e,t){const[n,r]=yl(t);return new Ao.EthereumProviderError(e,n||bl.getMessageFromCode(e),r)}function yl(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=Tt;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const n=vo;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=jr;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const i=Ot;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})})(wt);var Xh=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n};const Qh=cn(Xh);var eg="2.1.0";function _l(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function tg(e){return _l(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"}function ng(e){return _l(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object"}function rg(e){return tg(e)&&ng(e)}var rt={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>`Invalid options. Received: { maxEventListeners: ${e}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`Torus: Connected to chain with ID "${e}".`}};const Lg={MOONPAY:"moonpay",WYRE:"wyre",RAMPNETWORK:"rampnetwork",XANPOOL:"xanpool",MERCURYO:"mercuryo",TRANSAK:"transak"},ig={PRODUCTION:"production",DEVELOPMENT:"development",TESTING:"testing"},In={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},Ci={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",EMAIL_PASSWORDLESS:"email_passwordless"},og={en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}};var Ro={supportedVerifierList:[Ci.GOOGLE,Ci.REDDIT,Ci.DISCORD],translations:og,localStorageKeyPrefix:"torus-"},de=vr.getLogger("solana-embed");function sg(){return(e,t,n)=>{(typeof e.method!="string"||!e.method)&&(t.error=wt.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),n(r=>{const{error:i}=t;return i&&de.error(`Torus - RPC Error: ${i.message}`,i),r()})}}function ag(e,t,n){let r=`Torus: Lost connection to "${e}".`;t!=null&&t.stack&&(r+=`
${t.stack}`),de.warn(r),n&&n.listenerCount("error")>0&&n.emit("error",r)}const dr=()=>Math.random().toString(36).slice(2),ml=async e=>{let t,n;switch(e){case"testing":t="https://solana-testing.tor.us",n="debug";break;case"development":t="http://localhost:8080",n="debug";break;default:t="https://solana.tor.us",n="error";break}return{torusUrl:t,logLevel:n}},lg=()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(Ro.translations,t[0])?t[0]:"en",e},ug={height:660,width:375},fg={height:740,width:1315},cg={height:700,width:1200},El={height:600,width:400};function dg(e){let t;try{t=window[e];const n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(n){const r=n;return r&&(r.code===22||r.code===1014||r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0}}function On(e){let{width:t,height:n}=e;const r=window.screenLeft!==void 0?window.screenLeft:window.screenX,i=window.screenTop!==void 0?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,a=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,l=1,h=Math.abs((o-t)/2/l+r),f=Math.abs((a-n)/2/l+i);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${n/l},width=${t/l},top=${f},left=${h}`}class Sl extends Dr{constructor(t,n){let{maxEventListeners:r=100,jsonRpcStreamName:i="provider"}=n;if(super(),ee(this,"isTorus",void 0),ee(this,"_rpcEngine",void 0),ee(this,"jsonRpcConnectionEvents",void 0),ee(this,"_state",void 0),!rg(t))throw new Error(rt.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(r),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const o=new Fd;Ns(t,o,t,this._handleStreamDisconnect.bind(this,"Torus")),o.ignoreStream("phishing");const a=jd();Ns(a.stream,o.createStream(i),a.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const l=new dt;l.push(Ud()),l.push(sg()),l.push(Vh({origin:location.origin})),l.push(a.middleware),this._rpcEngine=l,this.jsonRpcConnectionEvents=a.events}async request(t){if(!t||typeof t!="object"||Array.isArray(t))throw wt.ethErrors.rpc.invalidRequest({message:rt.errors.invalidRequestArgs(),data:t});const{method:n,params:r}=t;if(typeof n!="string"||n.length===0)throw wt.ethErrors.rpc.invalidRequest({message:rt.errors.invalidRequestMethod(),data:t});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw wt.ethErrors.rpc.invalidRequest({message:rt.errors.invalidRequestParams(),data:t});return new Promise((i,o)=>{this._rpcRequest({method:n,params:r},zi(i,o))})}send(t,n){this._rpcRequest(t,n)}sendAsync(t){return new Promise((n,r)=>{this._rpcRequest(t,zi(n,r))})}_handleStreamDisconnect(t,n){ag(t,n,this),this._handleDisconnect(!1,n?n.message:void 0)}}const sn=e=>{const t=window.document.createElement("template"),n=e.trim();return t.innerHTML=n,t.content.firstChild};function hr(e){return e.version===void 0}class vl extends Dr{constructor(t){let{url:n,target:r,features:i,timeout:o=3e4}=t;super(),ee(this,"url",void 0),ee(this,"target",void 0),ee(this,"features",void 0),ee(this,"window",void 0),ee(this,"windowTimer",void 0),ee(this,"iClosedWindow",void 0),ee(this,"timeout",void 0),this.url=n,this.target=r||"_blank",this.features=i||On(cg),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=o,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var t;return this.window=window.open(this.url.href,this.target,this.features),(t=this.window)!=null&&t.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(t){t?window.location.replace(this.url.href):window.location.href=this.url.href}}class Ur extends Sl{constructor(t,n){let{maxEventListeners:r=100,jsonRpcStreamName:i="provider"}=n;super(t,{maxEventListeners:r,jsonRpcStreamName:i}),ee(this,"embedTranslations",void 0),ee(this,"torusUrl",void 0),ee(this,"dappStorageKey",void 0),ee(this,"windowRefs",void 0),ee(this,"tryWindowHandle",void 0),ee(this,"torusAlertContainer",void 0),ee(this,"torusIframe",void 0),this._state=ze({},Ur._defaultState),this.torusUrl="",this.dappStorageKey="";const o=Ro.translations[lg()];this.embedTranslations=o.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});const a=l=>{const{method:h,params:f}=l;if(h===cr.IFRAME_STATUS){const{isFullScreen:S,rid:A}=f;this._displayIframe({isFull:S,rid:A})}else if(h==="create_window"){const{windowId:S,url:A}=f;this._createPopupBlockAlert(S,A)}else if(h===cr.CLOSE_WINDOW)this._handleCloseWindow(f);else if(h===cr.USER_LOGGED_IN){const{currentLoginProvider:S}=f;this._state.isLoggedIn=!0,this._state.currentLoginProvider=S}else h===cr.USER_LOGGED_OUT&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())};this.jsonRpcConnectionEvents.on("notification",a)}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(t){try{const{torusUrl:n,dappStorageKey:r,torusAlertContainer:i,torusIframe:o}=t;this.torusUrl=n,this.dappStorageKey=r,this.torusAlertContainer=i,this.torusIframe=o,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:a,isLoggedIn:l}=await this.request({method:gt.GET_PROVIDER_STATE,params:[]});this._handleConnect(a,l)}catch(n){de.error("Torus: Failed to get initial state. Please report this bug.",n)}finally{de.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(t){let{url:n,target:r,features:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=new URL(n||`${this.torusUrl}/redirect?windowId=${t}`);this.dappStorageKey&&(o.hash?o.hash+=`&dappStorageKey=${this.dappStorageKey}`:o.hash=`#dappStorageKey=${this.dappStorageKey}`);const a=new vl({url:o,target:r,features:i});if(a.open(),!a.window){this._createPopupBlockAlert(t,o.href);return}this.windowRefs[t]=a,this.request({method:"opened_window",params:{windowId:t}}),a.once("close",()=>{delete this.windowRefs[t],this.request({method:gt.CLOSED_WINDOW,params:{windowId:t}})})}_displayIframe(){let{isFull:t=!1,rid:n=""}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={};if(t)r.display="block",r.width="100%",r.height="100%",r.top="0px",r.right="0px",r.left="0px",r.bottom="0px";else switch(r.display=this._state.torusWidgetVisibility?"block":"none",r.height="70px",r.width="70px",this._state.buttonPosition){case In.TOP_LEFT:r.top="0px",r.left="0px",r.right="auto",r.bottom="auto";break;case In.TOP_RIGHT:r.top="0px",r.right="0px",r.left="auto",r.bottom="auto";break;case In.BOTTOM_RIGHT:r.bottom="0px",r.right="0px",r.top="auto",r.left="auto";break;case In.BOTTOM_LEFT:default:r.bottom="0px",r.left="0px",r.top="auto",r.right="auto";break}Object.assign(this.torusIframe.style,r),this._state.isIFrameFullScreen=t,this.request({method:gt.IFRAME_STATUS,params:{isIFrameFullScreen:t,rid:n}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(t,n){const r=n,i=t;Array.isArray(i)||i.jsonrpc||(i.jsonrpc="2.0"),this.tryWindowHandle(i,r)}_handleConnect(t,n){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:t,isLoggedIn:n}),de.debug(rt.info.connected(t)))}_handleDisconnect(t,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let r;t?(r=new wt.EthereumRpcError(1013,n||rt.errors.disconnected()),de.debug(r)):(r=new wt.EthereumRpcError(1011,n||rt.errors.permanentlyDisconnected()),de.error(r),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleCloseWindow(t){const{windowId:n}=t;this.windowRefs[n]&&(this.windowRefs[n].close(),delete this.windowRefs[n])}async _createPopupBlockAlert(t,n){const r=this.getLogoUrl(),i=sn(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${r}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),o=sn(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),a=sn('<div id="torusAlert__btn-container"></div>');a.appendChild(o),i.appendChild(a);const l=()=>{o.addEventListener("click",()=>{this._handleWindow(t,{url:n,target:"_blank",features:On(El)}),i.remove(),this.torusAlertContainer.children.length===0&&(this.torusAlertContainer.style.display="none")})};(()=>{this.torusAlertContainer.appendChild(i)})(),l(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}ee(Ur,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Wr extends Sl{constructor(t,n){let{maxEventListeners:r=100,jsonRpcStreamName:i="provider"}=n;super(t,{maxEventListeners:r,jsonRpcStreamName:i}),ee(this,"chainId",void 0),ee(this,"selectedAddress",void 0),ee(this,"tryWindowHandle",void 0),this._state=ze({},Wr._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});const o=a=>{const{method:l,params:h}=a;l===Ni.ACCOUNTS_CHANGED?this._handleAccountsChanged(h):l===Ni.UNLOCK_STATE_CHANGED?this._handleUnlockStateChanged(h):l===Ni.CHAIN_CHANGED&&this._handleChainChanged(h)};this.jsonRpcConnectionEvents.on("notification",o)}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:t,chainId:n,isUnlocked:r}=await this.request({method:zh.GET_PROVIDER_STATE,params:[]});this.emit("connect",{chainId:n}),this._handleChainChanged({chainId:n}),this._handleUnlockStateChanged({accounts:t,isUnlocked:r}),this._handleAccountsChanged(t)}catch(t){de.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{de.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=n;const o=t;if(!Array.isArray(o)){if(o.jsonrpc||(o.jsonrpc="2.0"),o.method==="solana_accounts"||o.method==="solana_requestAccounts")i=(a,l)=>{this._handleAccountsChanged(l.result||[],o.method==="solana_accounts",r),n(a,l)};else if(o.method==="wallet_getProviderState"){this._rpcEngine.handle(t,i);return}}this.tryWindowHandle(o,i)}_handleConnect(t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:t}),de.debug(rt.info.connected(t)))}_handleDisconnect(t,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!t){this._state.isConnected=!1;let r;t?(r=new wt.EthereumRpcError(1013,n||rt.errors.disconnected()),de.debug(r)):(r=new wt.EthereumRpcError(1011,n||rt.errors.permanentlyDisconnected()),de.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleAccountsChanged(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t;Array.isArray(i)||(de.error("Torus: Received non-array accounts parameter. Please report this bug.",i),i=[]);for(const o of t)if(typeof o!="string"){de.error("Torus: Received non-string account. Please report this bug.",t),i=[];break}Qh(this._state.accounts,i)||(n&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&de.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',i),this._state.accounts=i,this.emit("accountsChanged",i)),this.selectedAddress!==i[0]&&(this.selectedAddress=i[0]||null)}_handleChainChanged(){let{chainId:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t){de.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:t});return}t==="loading"?this._handleDisconnect(!0):(this._handleConnect(t),t!==this.chainId&&(this.chainId=t,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:t,isUnlocked:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof n!="boolean"){de.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:n});return}n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(t||[]))}}ee(Wr,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});function ta(e){return new Promise((t,n)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(r){n(r)}})}const hg=e=>{const{document:t}=e,n=t.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=t.querySelector('head > meta[name="title"]');return r?r.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function gg(e){try{const{document:t}=e;let n=t.querySelector('head > link[rel="shortcut icon"]');return n&&await ta(n.href)||(n=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(r=>!!r.href),n&&await ta(n.href))?n.href:""}catch{return""}}const pg=async()=>({name:hg(window),icon:await gg(window)}),wg=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],bg=[gt.SET_PROVIDER],yg=dg("localStorage");(async function(){try{if(typeof document>"u")return;const t=document.createElement("link"),{torusUrl:n}=await ml("production");t.href=`${n}/frame`,t.crossOrigin="anonymous",t.type="text/html",t.rel="prefetch",t.relList&&t.relList.supports&&t.relList.supports("prefetch")&&document.head.appendChild(t)}catch(t){de.warn(t)}})();class Pg{constructor(){let{modalZIndex:t=99999}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ee(this,"isInitialized",void 0),ee(this,"torusAlert",void 0),ee(this,"modalZIndex",void 0),ee(this,"alertZIndex",void 0),ee(this,"requestedLoginProvider",void 0),ee(this,"provider",void 0),ee(this,"communicationProvider",void 0),ee(this,"dappStorageKey",void 0),ee(this,"isTopupHidden",!1),ee(this,"torusAlertContainer",void 0),ee(this,"torusUrl",void 0),ee(this,"torusIframe",void 0),ee(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=t,this.alertZIndex=t+1e3,this.dappStorageKey=""}get isLoggedIn(){return this.communicationProvider?this.communicationProvider.isLoggedIn:!1}async init(){let{buildEnv:t=ig.PRODUCTION,enableLogging:n=!1,network:r,showTorusButton:i=!1,useLocalStorage:o=!1,buttonPosition:a=In.BOTTOM_LEFT,apiKey:l="torus-default",extraParams:h={},whiteLabel:f}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:S,logLevel:A}=await ml(t);de.enableAll(),de.info(S,"url loaded"),de.info(`Solana Embed Version :${eg}`),this.torusUrl=S,de.setDefaultLevel(A),n?de.enableAll():de.disableAll();const D=this.handleDappStorageKey(o),B=new URL(S);B.pathname.endsWith("/")?B.pathname+="frame":B.pathname+="/frame";const W=new URLSearchParams;return D&&W.append("dappStorageKey",D),W.append("origin",window.location.origin),B.hash=W.toString(),this.torusIframe=sn(`<iframe
        id="torusIframe"
        class="torusIframe"
        src="${B.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"
      ></iframe>`),this.torusAlertContainer=sn(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=sn(`<link href="${S}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((m,T)=>{try{this.torusIframe.addEventListener("load",async()=>{const N=await pg();this.torusIframe.contentWindow.postMessage({buttonPosition:a,apiKey:l,network:r,dappMetadata:N,extraParams:h,whiteLabel:f},B.origin),await this._setupWeb3({torusUrl:S}),i&&this.showTorusButton(),f!=null&&f.topupHide?this.isTopupHidden=f.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,m()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(N){T(N)}})}async login(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=t.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const n=await new Promise((r,i)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,t.login_hint]},zi(r,i))});if(Array.isArray(n)&&n.length>0)return n;throw new Error("Login failed")}catch(n){throw de.error("login failed",n),n}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(t){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:n,userInfo:r}=t,{success:i}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:n,userInfo:r}});if(!i)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:gt.LOGOUT,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function t(n){return n instanceof Element||n instanceof Document}t(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),t(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),t(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(t){await this.communicationProvider.request({method:gt.SET_PROVIDER,params:ze({},t)})}async showWallet(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=await this.communicationProvider.request({method:gt.WALLET_INSTANCE_ID,params:[]}),i=t?`/${t}`:"",o=new URL(`${this.torusUrl}/wallet${i}`);o.searchParams.append("instanceId",r),Object.keys(n).forEach(l=>{o.searchParams.append(l,n[l])}),this.dappStorageKey&&(o.hash=`#dappStorageKey=${this.dappStorageKey}`),new vl({url:o,features:On(fg)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:gt.USER_INFO,params:[]})}async initiateTopup(t,n){if(!this.isInitialized)throw new Error("Torus is not initialized");const r=dr();return this.communicationProvider._handleWindow(r),await this.communicationProvider.request({method:gt.TOPUP,params:{provider:t,params:n,windowId:r}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(t){const n=hr(t),r=n?t.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(t.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:r,isLegacyTransaction:n}})}async signAndSendTransaction(t,n){const r=hr(t),i=r?t.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(t.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:i,options:n,isLegacyTransaction:r}})}}async signTransaction(t){const n=hr(t),r=n?t.serializeMessage().toString("hex"):Buffer.from(t.message.serialize()).toString("hex"),i=await this.provider.request({method:"sign_transaction",params:{message:r,messageOnly:!0,isLegacyTransaction:n}}),o=JSON.parse(i),a={publicKey:new Do(o.publicKey),signature:Buffer.from(o.signature,"hex")};return t.addSignature(a.publicKey,a.signature),t}async signAllTransactions(t){let n;const r=t.map(a=>(n=hr(a),n?a.serializeMessage().toString("hex"):Buffer.from(a.message.serialize()).toString("hex"))),o=(await this.provider.request({method:"sign_all_transactions",params:{message:r,messageOnly:!0,isLegacyTransaction:n}})).map(a=>{const l=JSON.parse(a);return{publicKey:new Do(l.publicKey),signature:Buffer.from(l.signature,"hex")}});return t.forEach((a,l)=>(a.addSignature(o[l].publicKey,o[l].signature),a)),t}async signMessage(t){return await this.provider.request({method:"sign_message",params:{data:t}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(t){const n=`${Ro.localStorageKeyPrefix}${window.location.hostname}`;let r="";if(yg&&t){const i=window.localStorage.getItem(n);if(i)r=i;else{const o=`torus-app-${dr()}`;window.localStorage.setItem(n,o),r=o}}return this.dappStorageKey=r,r}async _setupWeb3(t){de.info("setupWeb3 running");const n=new Ps({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),r=new Ps({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),i=new Wr(n,{}),o=new Ur(r,{});i.tryWindowHandle=(f,S)=>{const A=f;if(!Array.isArray(A)&&wg.includes(A.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const D=dr();o._handleWindow(D,{target:"_blank",features:On(El)}),A.windowId=D}i._rpcEngine.handle(A,S)},o.tryWindowHandle=(f,S)=>{const A=f;if(!Array.isArray(A)&&bg.includes(A.method)){const D=dr();o._handleWindow(D,{target:"_blank",features:On(ug)}),A.params.windowId=D}o._rpcEngine.handle(A,S)};const a=f=>{const S=i[f],A=this;i[f]=function(B,W){const{method:m,params:T=[]}=B;if(m==="solana_requestAccounts"){if(!W)return A.login({loginProvider:T[0]});A.login({loginProvider:T[0]}).then(N=>W(null,N)).catch(N=>W(N))}return S.apply(this,[B,W])}};a("request"),a("sendAsync"),a("send");const l=new Proxy(i,{deleteProperty:()=>!0}),h=new Proxy(o,{deleteProperty:()=>!0});this.provider=l,this.communicationProvider=h,await Promise.all([i._initializeState(),o._initializeState(ze(ze({},t),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),de.debug("Torus - injected provider")}}export{In as BUTTON_POSITION,Ci as LOGIN_PROVIDER,Lg as PAYMENT_PROVIDER,ig as TORUS_BUILD_ENV,Wr as TorusInPageProvider,Pg as default};
